@using DEWAXP.Foundation.Helpers
@using Sitecore.Globalization
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@model List<DEWAXP.Foundation.Content.Models.MoveOut.MoveoutReviewV3>

@Html.Sitecore().Placeholder("j18/m26-page-title")

<div class="grid__row">
    <div class="grid__column grid__column--12 grid__column--form">
        @Html.Sitecore().Placeholder("j18/m38-step-tracker")
        @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
    </div>
</div>
<div class="grid__row">
    <div class="grid__column grid__column--12 grid__column--form m14-richtext">
        <h2>@Translate.Text("Review Summary")</h2>
        @Html.Sitecore().Placeholder("j18/m14-formatted-text")
    </div>
</div>
@using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @data_parsley_focus = "true", @data_form = "true", @class = "form", @data_submit_validate = "enabled" }))
{
    @Html.Sitecore().FormHandler()
    @Html.AntiForgeryToken()
    var i = 0;
<div class="grid__row">
    <div class="grid__column grid__column--12 grid__column--form">
        <div class="m42-keyvalue">
            @foreach (var refund in Model)
            {
                if (refund.RefundFlag == "N")
                {
                    i++;
                }
            <dl class="mb24">
                @if (string.IsNullOrWhiteSpace(refund.ReceivingCountry))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("J85.CustName")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@(!string.IsNullOrWhiteSpace(refund.CustomerName) ? refund.CustomerName : Translate.Text("updateiban.firstnamedash"))</dd>
                }
                else
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.firstname")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@(!string.IsNullOrWhiteSpace(refund.CustomerFirstName) ? refund.CustomerFirstName : Translate.Text("updateiban.firstnamedash"))</dd>
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.lastname")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@(!string.IsNullOrWhiteSpace(refund.CustomerLastName) ? refund.CustomerLastName : Translate.Text("updateiban.lastnamedash"))</dd>
                }
                @if (!string.IsNullOrWhiteSpace(refund.CustomerAccountNumber))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.customeraccountnumber")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.CustomerAccountNumber</dd>
                }
                @if (!string.IsNullOrWhiteSpace(refund.CardNumber))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("EV_Dashboard_Card_Number")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.CardNumber</dd>
                }
                @if (!string.IsNullOrWhiteSpace(refund.RefundThrough))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.refundthrough")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.RefundThrough</dd>
                }

                @if (!string.IsNullOrWhiteSpace(refund.IBANNumber))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.ibannumber")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.IBANNumber</dd>
                }

                @if (!string.IsNullOrWhiteSpace(refund.AccountNumber))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("MoveOut.Account number")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.AccountNumber</dd>
                }

                @if (!string.IsNullOrWhiteSpace(refund.ReceivingCountry))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.country")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.ReceivingCountry</dd>
                }

                @if (!string.IsNullOrWhiteSpace(refund.ReceivingState))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.state")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.ReceivingState</dd>
                }

                @if (!string.IsNullOrWhiteSpace(refund.ReceivingCity))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.city")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.ReceivingCity</dd>
                }
                @if (!string.IsNullOrWhiteSpace(refund.ReceivingCurrency))
                {
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("updateiban.currency")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@refund.ReceivingCurrency</dd>
                }
                @if (!string.IsNullOrWhiteSpace(refund.DisconnectionDate))
                {
                    var DisconnectionDateReview = refund.DisconnectionDate.Replace("يناير", "January").Replace("فبراير", "February").Replace("مارس", "March").Replace("أبريل", "April").Replace("مايو", "May").Replace("يونيو", "June").Replace("يوليو", "July").Replace("أغسطس", "August").Replace("سبتمبر", "September").Replace("أكتوبر", "October").Replace("نوفمبر", "November").Replace("ديسمبر", "December").Replace("يناير", "Jan").Replace("فبراير", "Feb").Replace("مارس", "Mar").Replace("أبريل", "Apr").Replace("مايو", "May").Replace("يونيو", "June").Replace("يوليو", "July").Replace("أغسطس", "Aug").Replace("سبتمبر", "Sept").Replace("أكتوبر", "Oct").Replace("نوفمبر", "Nov").Replace("ديسمبر", "Dec");
                    DateTime dateResult;
                    DateTime? DiconnectionDateTime = DateTime.MinValue;
                    if (DateTime.TryParse(DisconnectionDateReview, Sitecore.Context.Culture, System.Globalization.DateTimeStyles.None, out dateResult))
                    {
                        DiconnectionDateTime = dateResult;
                    }
                    <dt class="m42-keyvalue__key m42-keyvalue__key--secondary">@Translate.Text("evdeactivate.Disconnection Date")<span class="floatRight mobile-hide">:</span></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--secondary">@DiconnectionDateTime.Value.ToString("dd MMM yyyy", Sitecore.Context.Culture)</dd>
                }
            </dl>
            <hr />
            }
        </div>
        <div class="form-field__button">
            <button type="submit" class="button--submit button button--primary button--next" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Confirm")</button>
        </div>
        @if (Model.Where(x => !string.IsNullOrWhiteSpace(x.RefundThrough)).Any() && i != Model.Count)
        {
         <p class="centered"><span class="red">*</span>@Translate.Text("Moveoutreview.westernuniontext")</p>
        }
    </div>
</div>
}
<script src="~/scripts/External/nml/form-submit-validate.js"></script>
