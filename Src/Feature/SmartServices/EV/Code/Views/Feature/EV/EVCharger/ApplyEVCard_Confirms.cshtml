@using Sitecore.Globalization
@using Sitecore.Mvc

@model DEWAXP.Foundation.Content.Models.Payment.EVLoginPaymentCompletionModel

@{
    string timeFix = "";
    if (@Language.Current.Name.ToLowerInvariant() == "ar-ae")
    {
        timeFix = "\u200F";
    }
}
@{
    var dir = Sitecore.Context.Culture.TextInfo.IsRightToLeft ? "rtl" : "ltr";
}
@if (Model.Succeeded)
{

    <div class="j109-ev-charger">
        <div class="grid__row mt48">
            <div class="grid__column grid__column--12 grid__column--form">
                <div class="m40-status-message m40-status-message--success icon icon-new-success-message" data-component="m40-status-message">
                    <div class="m40-status-message__title">@Translate.Text("EV Payment completed")</div>
                    <div class="m40-status-message__text">
                        @string.Format(Translate.Text("EV.Payment Print Button"), Model.RequestNumber)
                    </div>
                    @*<p>
                            <button class="button button--text button--printer noprint" data-print="page"> @Translate.Text("Print this page")</button>
                        </p>*@
                </div>
            </div>
        </div>
    </div>
    @Html.Sitecore().Placeholder("ev-mid-placeholder")
    <div class="grid__row">
        <div class="grid__column grid__column--12 grid__column--form">
            <div class="m14-richtext" data-component="m40-status-message">
                <div class="m14-richtext-success_section">
                    <div class="success_section-title">
                        <h4 class="success_section-title-text">@Translate.Text("Transaction_Details")</h4>
                        <button class="button button--outline button--very_small icon-download success_download noprint" data-print="page"> @Translate.Text("Save") </button>
                    </div>
                </div>
            </div>
            <div class="m42-keyvalue success-page">
                <dl>
                    <dt class="m42-keyvalue__key--stacked">@Translate.Text("payment date and time label")</dt>

                    @if (Language.Current.Name.ToLowerInvariant() == "ar-ae")
                    {
                        <dd class="m42-keyvalue__value--stacked tran-details">@Model.PaymentDate.ToString("dd MMM yyyy | " + timeFix + "ss:" + timeFix + "mm:" + timeFix + "HH", Sitecore.Context.Culture)</dd>
                    }
                    else
                    {
                        <dd class="m42-keyvalue__value--stacked tran-details">@Model.PaymentDate.ToString("dd MMM yyyy | " + timeFix + "HH:" + timeFix + "mm:" + timeFix + "ss", Sitecore.Context.Culture)</dd>
                    }

                    @*<dt class="m42-keyvalue__key--stacked">@Translate.Text("receipt id label")</dt>
                        <dd class="m42-keyvalue__value--stacked tran-details">@Model.ReceiptIdentifiers</dd>*@

                    <dt class="m42-keyvalue__key--stacked">@Translate.Text("EV.Smart dubai transaction ID")</dt>
                    <dd class="m42-keyvalue__value--stacked tran-details">@Model.DegTransactionId</dd>

                    <dt class="m42-keyvalue__key--stacked">@Translate.Text("dewa transaction id label")</dt>
                    <dd class="m42-keyvalue__value--stacked tran-details">@Model.DewaTransactionId</dd>
                </dl>
            </div>
            @if (Model.AccountDetailsList != null && Model.AccountDetailsList.Count > 0)
            {
                <div class="m14-richtext mt24">
                    <h4>@Translate.Text("Account Details")</h4>
                </div>
                foreach (var receipt in Model.AccountDetailsList)
                {
                    <div class="m42-keyvalue success-page">
                        <dl>
                            <dt class="m42-keyvalue__key m42-keyvalue__key--stacked m42-keyvalue--justified-dt"><strong>@Translate.Text("Contract Account Number")</strong></dt>
                            <dd class="m42-keyvalue__value m42-keyvalue__value--stacked tran-details m42-keyvalue--justified-dd">@Convert.ToDecimal(receipt.totalAmount).ToString("0,0.00") @Translate.Text("AED")</dd>
                            <dd class="m42-keyvalue__value--stacked tran-details clear_both mt0">@receipt.accountNumber</dd>
                            <dt class="m42-keyvalue__key--stacked mt0 mb12">(@Translate.Text("EV_CardNumber") - @receipt.evCardNumber)</dt>
                            <dt class="m42-keyvalue__key--stacked mt0 mb12">(@Translate.Text("EV Car Plate Number") - @receipt.plateNumber)</dt>
                        </dl>
                    </div>
                }

                <div class="m42-keyvalue--total_green">
                    <dt class="m42-keyvalue__key m42-keyvalue__key--stacked m42-keyvalue--justified-dt"><strong>@Translate.Text("Total Amount")</strong></dt>
                    <dd class="m42-keyvalue__value m42-keyvalue__value--stacked tran-details m42-keyvalue--justified-dd">@((Model.Total+ Model.SuqiaAmount).ToString("N2")) @Translate.Text("AED")</dd>
                    <dt class="m42-keyvalue__key--stacked clear_both mt0">(@Model.AccountDetailsList.Count @(Model.AccountDetailsList.Count > 1 ? @Translate.Text("EV.Contract Accounts") : @Translate.Text("EV.Contract Account")) )</dt>
                </div>
            }
            else
            {
                @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
            }
        </div>
    </div>
    <div class="grid__row">
        <div class="grid__column grid__column--12 grid__column--form">
            @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SuqiaSuccessPayment.cshtml", Model.SuqiaAmount)
        </div>
    </div>
    @Html.Sitecore().Placeholder("ev-below-placeholder")
}
else
{
    <div class="grid j109-ev-charger">
        <div class="grid__row mt48">
            <div class="grid__column grid__column--12 grid__column--form">
                @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
            </div>
        </div>
    </div>

}


