@using Sitecore.Globalization
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using Glass.Mapper
@using DEWAXP.Foundation.Content
@using DEWAXP.Foundation.Helpers
@using CNST = DEWAXP.Feature.HR.Models.Scholarship.Constants;
@model DEWAXP.Feature.HR.Models.Scholarship.ContactDetail
@{ 
    int numericvalue;
}
@using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new
{
    @class = "form",
    @data_form = "true",
    @data_parsley_focus = "none",
    @data_submit_validate = "enabled",
    @id = "contactdetailsscholarship"
}))
{
    @Html.Sitecore().FormHandler()
    @Html.AntiForgeryToken()
    @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")


    <div class="form-field form-field--text">

        <label for="form-field-wsd63jl9i" class="form-field__label">
            @Translate.Text("Scholarship Email Label")

        </label>
        <span class="form-field__input-wrapper">
            <input class="form-field__input form-field__input--text" id="form-field-wsd63jl9i"
                   name="EmailAddress" type="email" value="@Model.EmailAddress" readonly="readonly">
        </span>
    </div>
    <div class="form-field form-field--text">
        <label for="form-field-mobilenumber" class="form-field__label">
            @Translate.Text("Scholarship Mobile Number")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper form-field__input-wrapper--prefixed form-field__input-wrapper--mobile-number">
            <input id="form-field-mobilenumber"
                   type="tel"
                   name="CandidateMobileNo"
                   aria-required="true"
                   aria-describedby="description-for-vyze3b1uf"
                   required="required" value="@Model.CandidateMobileNo"
                   data-parsley-error-message="@Translate.Text("Scholarship Please Enter Valid UAE Mobile")"
                   data-parsley-required-message="@Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED)"
                   data-parsley-type="digits"
                   data-parsley-trigger="focusout"
                   data-parsley-mobile_number
                   data-parsley-errors-container="#description-for-vyze3b1uf"
                   class="form-field__input form-field__input--text form-field__input--prefixed" />
        </span>

        <div id="description-for-vyze3b1uf" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.CandidateMobileNo, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text">
        <label for="form-field-urqpiu68p" class="form-field__label">
            @Translate.Text("Scholarship Father Mobile Number")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper form-field__input-wrapper--prefixed form-field__input-wrapper--mobile-number">
            <input id="form-field-urqpiu68p"
                   type="tel"
                   name="FatherMobileNo"
                   @*aria-required="true"*@
                   aria-describedby="description-for-urqpiu68p"
                   required="required"
                   value="@Model.FatherMobileNo"
                   data-parsley-error-message="@Translate.Text("Scholarship Please Enter Valid UAE Mobile")"
                   data-parsley-required-message="@Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED)"
                   data-parsley-type="digits"
                   data-parsley-trigger="focusout"
                   data-parsley-mobile_number
                   data-parsley-errors-container="#description-for-urqpiu68p"
                   class="form-field__input form-field__input--text form-field__input--prefixed" />
        </span>
        <div id="description-for-urqpiu68p" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.FatherMobileNo, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text    ">
        <label for="form-field-qjotooyot" class="form-field__label">
            @Translate.Text("Scholarship Mother Mobile Number")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper form-field__input-wrapper--prefixed form-field__input-wrapper--mobile-number">
            <input class="form-field__input form-field__input--text form-field__input--prefixed"
                   id="form-field-qjotooyot"
                   name="MotherMobileNo"
                   required
                   type="tel" value="@Model.MotherMobileNo"
                   aria-describedby="description-for-qjotooyot"
                   data-parsley-errors-container="#description-for-qjotooyot"
                   data-parsley-type="digits"
                   data-parsley-trigger="focusout"
                   data-parsley-mobile_number
                   data-parsley-error-message="@Translate.Text("Scholarship Please Enter Valid UAE Mobile")"
                   data-parsley-required-message="@Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED)">
        </span>
        <div id="description-for-qjotooyot" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.MotherMobileNo, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text    ">
        <label for="form-field-7cbe7d8lt" class="form-field__label">
            @Translate.Text("Scholarship Father Email Address")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper">
            <input class="form-field__input form-field__input--text" id="form-field-7cbe7d8lt" name="FatherEamilAddress" type="email"
                   placeholder="@Translate.Text("J106.EnterEmailAddress")" aria-describedby="description-for-7cbe7d8lt"
                   data-parsley-errors-container="#description-for-7cbe7d8lt" required="required" value="@Model.FatherEamilAddress"
                   data-parsley-required-message="@Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED)"
                   data-parsley-error-message="@Translate.Text("Scholarship Please Enter Valid Email Address")"
                   data-parsley-trigger="focusout"
                   data-parsley-id="16">
        </span>
        <div id="description-for-7cbe7d8lt" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.FatherEamilAddress, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text    ">
        <label for="form-field-h6k2pldaz" class="form-field__label">
            @Translate.Text("Scholarship Mother Email Address")
        </label>
        <span class="form-field__input-wrapper">
            <input class="form-field__input form-field__input--text" id="form-field-h6k2pldaz" name="MotherEmailAddress"
                   type="email" aria-describedby="description-for-h6k2pldaz"
                   data-parsley-error-message="@Translate.Text("Scholarship Please Enter Valid Email Address")"
                   data-parsley-errors-container="#description-for-h6k2pldaz" data-parsley-trigger="focusout"
                   data-parsley-id="18" value="@Model.MotherEmailAddress">
        </span>
        <div id="description-for-h6k2pldaz" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.MotherEmailAddress, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text">
        <label for="form-field-sfeyvp6v7" class="form-field__label">
            @Translate.Text("Scholarship Permanent Address")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper">
            <input class="form-field__input form-field__input--text" id="form-field-sfeyvp6v7" name="StreetAddress"
                   type="text" aria-describedby="description-for-sfeyvp6v7"
                   data-parsley-errors-container="#description-for-sfeyvp6v7"
                   required="required" maxlength="50" data-parsley-maxlength="50"
                   data-parsley-required-message="@Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED)"
                   data-parsley-trigger="focusout"
                   data-parsley-id="20" value="@Model.StreetAddress">
        </span>
        <div id="description-for-sfeyvp6v7" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.StreetAddress, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--select form-field--select-single">
        <label for="form-field-w1mfbetd3" class="form-field__label">
            @Translate.Text("Scholarship Emirate")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper form-field__input-wrapper--select">
            @Html.DropDownListFor(model => model.Emirate, Model.Emirates, Translate.Text("Scholarship Select Emirate"), new
       {
           @class = "form-field__input form-field__input--select form-field__input--select-full",
           @id = "form-field-w1mfbetd3",
           @required = "required",
           @data_parsley_required_message = Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED),
           @data_parsley_error_message = Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED),
           @data_parsley_errors_container = "#description-for-w1mfbetd3",
           @aria_describedby = "description-for-w1mfbetd3",
       })

        </span>
        <div id="description-for-w1mfbetd3" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.Emirate, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--select form-field--select-single">
        <label for="form-field-tmt1e76sx" class="form-field__label">
            @Translate.Text("Scholarship Area of the Emirate")
            <span class="form-field__label-required aria-only">(required)</span>
        </label>
        <span class="form-field__input-wrapper form-field__input-wrapper--select">

            @Html.DropDownListFor(model => model.AreaOfEmirate,Model.Areas, Translate.Text("Scholarship Select Area"), new
        {
            @class = "form-field__input form-field__input--select form-field__input--select-full",
            @id = "form-field-tmt1e76sx",
            @required = "required",
            @data_parsley_required_message = Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED),
            @data_parsley_errors_container = "#description-for-tmt1e76sx",
            @aria_describedby = "description-for-tmt1e76sx",
        })
        </span>
        <div id="description-for-tmt1e76sx" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.AreaOfEmirate, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text">
        <label for="form-field-avwiev4z8" class="form-field__label">
            @Translate.Text("Scholarship PO Box")

        </label>
        <span class="form-field__input-wrapper">
            <input class="form-field__input form-field__input--text" id="form-field-avwiev4z8" name="POBox" maxlength="6" data-parsley-maxlength="6"
                   type="number" aria-describedby="description-for-avwiev4z8" required="required" max="999999" data-parsley-max="999999"
                   data-parsley-errors-container="#description-for-avwiev4z8" data-parsley-trigger="focusout"
                   data-parsley-required-message="@Translate.Text(CNST.DictionaryKeys.FIELD_REQUIRED)"
                   data-parsley-id="26" value="@(Int32.TryParse(Model.POBox,out numericvalue)?Model.POBox:string.Empty)">
        </span>
        <div id="description-for-avwiev4z8" class="form-field__messages">
            @Html.ValidationMessageFor(x => x.POBox, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field form-field--text    ">
        <label for="form-field-0hn26m66u" class="form-field__label">
            @Translate.Text("Scholarship Postal Code")
        </label>
        <span class="form-field__input-wrapper">
            <input class="form-field__input form-field__input--text" id="form-field-0hn26m66u" name="PostalCode" max="999999"
                   type="number" aria-describedby="description-for-0hn26m66u" data-parsley-max="9999999" maxlength="6" data-parsley-maxlength="6"
                   data-parsley-errors-container="#description-for-0hn26m66u" data-parsley-trigger="focusout"
                   data-parsley-id="28" value="@Model.PostalCode">
        </span>
        <div id="description-for-0hn26m66u" class="form-field__messages">
            <p class="form-field__description"><a class='link' href='https://www.epg.gov.ae/portal/_en/locations.xhtml' target="_blank">@Translate.Text("Scholarship Search Postal Code")</a></p>
            @Html.ValidationMessageFor(x => x.PostalCode, "", new { @class = "parsley-errors-list" })
        </div>
    </div>
    <div class="form-field__button">
        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.SCHOLARSHIP_PERSONAL_INFORMATION_PAGE)" role="button" class="button button--primary">@Translate.Text("Scholarship Back")</a>

        <button type="submit" class="button button--primary" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Scholarship Save Continue")</button>
    </div>

}

<script type="text/javascript">
    jQuery(function ($) {
        $('#form-field-w1mfbetd3').change(function () {
            var selectedEmirate = $(this).val();
            var areasSelect = $('#form-field-tmt1e76sx');
            areasSelect.empty();
            var url ='@Url.Action("GetAreas")';
            if (selectedEmirate != null && selectedEmirate != '') {
                jQuery.ajax({
                    url: url,
                    type: 'POST',
                    dataType: 'json',
                    cache: false,
                    data: AddForgeryToken({
                        emid: selectedEmirate
                    }, "contactdetailsscholarship"),
                    success: function (areas) {
                        if (areas != null && !jQuery.isEmptyObject(areas)) {
                            areasSelect.append($('<option/>', {
                                value: null,
                                text: ""
                            }));
                            $.each(areas, function (index, area) {
                                areasSelect.append($('<option/>', {
                                    value: area.Value,
                                    text: area.Text
                                }));
                            });
                        };
                    }, error: function (jqXHR, exception) {
                        var msg = '';
                        if (jqXHR.status === 0) {
                            msg = 'Not connect.\n Verify Network.';
                        } else if (jqXHR.status == 404) {
                            msg = 'Requested page not found. [404]';
                        } else if (jqXHR.status == 500) {
                            msg = 'Internal Server Error [500].';
                        } else if (exception === 'parsererror') {
                            msg = 'Requested JSON parse failed.';
                        } else if (exception === 'timeout') {
                            msg = 'Time out error.';
                        } else if (exception === 'abort') {
                            msg = 'Ajax request aborted.';
                        } else {
                            msg = 'Uncaught Error.\n' + jqXHR.responseText;
                        }
                    }
                });
                @*$.getJSON('@Url.Action("GetAreas")', { emid: selectedEmirate }, function (areas) {
                    if (areas != null && !jQuery.isEmptyObject(areas)) {
                        areasSelect.append($('<option/>', {
                            value: null,
                            text: ""
                        }));
                        $.each(areas, function (index, area) {
                            areasSelect.append($('<option/>', {
                                value: area.Value,
                                text: area.Text
                            }));
                        });
                    };
                });*@
            }
        });
    });
</script>
