@using Sitecore.Globalization
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using DEWAXP.Foundation.Content
@using DEWAXP.Foundation.Helpers
@model DEWAXP.Foundation.Content.Models.AccountModel.SetNewPasswordV1Model

<div class="grid">
    <div class="grid__row">
        <div class="grid__column grid__column--12">
            <div class="m26-page-title title_message">
                <div class="m26-page-title__links">
                    <p class="m26-page-title__backlink">
                        <a class="button button--text button--back"
                           href="@ViewBag.BackLink">@Translate.Text("Back")</a>
                    </p>
                </div>
                <h2 class="text__page-title">@ViewBag.Title</h2>
            </div>
        </div>
    </div>
    <div class="grid__row">
        <div class="grid__column grid__column--12 grid__column--form">
            @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form", @data_form = "true", @data_parsley_focus = "none", @data_submit_validate = "enabled", @novalidate = "true" }))
            {
                @Html.Sitecore().FormHandler("AccountRecovery", "SetnewPasswordSubmit")
                @Html.AntiForgeryToken()
                @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
                @Html.HiddenFor(x => x.Username)
            <div class="form-field form-field--text form-field--password">
                <label for="form-field-new_password" class="form-field__label">
                    @Translate.Text("New password")
                    <span class="form-field__label-required aria-only">(@Translate.Text("required"))</span>
                    <span role="link" class="button button--text form-field__label-password-visibility button--show">
                        <span class="show icon-b-show">@Translate.Text("Show")</span>
                        <span class="hide icon-b-hide">@Translate.Text("Hide")</span>
                    </span>
                </label>
                <span class="form-field__input-wrapper">
                    <input class="form-field__input form-field__input--text form-field__input--password"
                           id="form-field-new_password"
                           name="Password"
                           type="password"
                           autocomplete="off"
                           placeholder="@Translate.Text("New password")"
                           data-parsley-dewapassword=""
                           data-parsley-dewapassword-message=""
                           aria-describedby="description-for-new_password"
                           data-parsley-errors-container="#description-for-new_password"
                           required=""
                           data-parsley-required-message="@Translate.Text("Password Error Message")"
                           data-parsley-id="6">
                </span>
                <div class="form-field__messages-password">
                    <ul class="form-field__messages-password-list">
                        <li class="form-field__messages-password-list-item message-lowercase"><span>@Translate.Text("Pwd.lowercase")</span></li>
                        <li class="form-field__messages-password-list-item message-special"><span>@Translate.Text("Pwd.special")</span></li>
                        <li class="form-field__messages-password-list-item message-uppercase"><span>@Translate.Text("Pwd.uppercase")</span></li>
                        <li class="form-field__messages-password-list-item message-number"><span>@Translate.Text("Pwd.number")</span></li>
                        <li class="form-field__messages-password-list-item message-minimum"><span>@Translate.Text("Pwd.minimum")</span></li>
                    </ul>
                </div>
            </div>
            <div class="form-field form-field--text form-field--password">
                <label for="form-field-confirmpassword" class="form-field__label">
                    @Translate.Text("confirm password label")
                    <span class="form-field__label-required aria-only">(@Translate.Text("required"))</span>
                    <span role="link" class="button button--text form-field__label-password-visibility button--show">
                        <span class="show icon-b-show">@Translate.Text("Show")</span>
                        <span class="hide icon-b-hide">@Translate.Text("Hide")</span>
                    </span>
                </label>
                <span class="form-field__input-wrapper">
                    <input class="form-field__input form-field__input--text form-field__input--password"
                           id="form-field-confirmpassword"
                           name="ConfirmPassword"
                           type="password"
                           autocomplete="off"
                           placeholder="@Translate.Text("confirm password label")"
                           aria-describedby="description-for-confirmpassword"
                           data-parsley-errors-container="#description-for-confirmpassword"
                           required=""
                           data-parsley-error-message="@Translate.Text("Password mismatch error")"
                           data-parsley-equalto="#form-field-new_password"
                           data-parsley-id="8"
                           data-parsley-trigger="focusout">
                </span>
                <div id="description-for-confirmpassword" class="form-field__messages">
                </div>
            </div>
                <div class="form-field__button">
                    <a class="button button--quaternary button-2-fit" href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.J7_LOGIN_PAGE)">@Translate.Text("Cancel")</a>
                    <button class="button button--primary button-2-fit" id="fgpwdbtn" type="submit" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Confirm")</button>
                </div>
            }
        </div>
    </div>
    <script src="~/scripts/External/nml/form-submit-validate.js"></script>
    </div>
