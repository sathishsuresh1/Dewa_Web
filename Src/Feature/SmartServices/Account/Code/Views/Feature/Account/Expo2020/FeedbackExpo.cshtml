@using Sitecore.Mvc
@using Sitecore.Globalization
@using DEWAXP.Feature.Account.Models.Expo2020
@model Expo2020Model

<div class="j105-drrg">
    <div class="m66-preloader j105-drrg--loader hidden">
        <div class="grid">
            <div class="grid__row">
                <div class="grid__column grid__column--12">
                    <h2 class="text__section-subtitle">@Translate.Text("J100.Pleasewait")</h2>
                    <div class="loader"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="grid">
    <div class="grid__row">
        <div class="grid__column grid__column--12">
            <!-- m26-page-title-start -->
            <div class="m26-page-title title_message">
                <h2 class="text__page-title">
                    @Translate.Text("Expo_Title")
                </h2>
            </div>
            <!-- m26-page-title-end -->
        </div>
    </div>

    <div class="grid__row">
        <div class="grid__column grid__column--12 grid__column--form">
            @using (Html.BeginRouteForm(Sitecore.Mvc.Configuration.MvcSettings.SitecoreRouteName,
        FormMethod.Post, new
        {
            @class = "form ",
            @id = "IdFeedbackexpo",
            data_form = "true",
            data_parsley_focus = "none",
            @data_submit_validate = "enabled",
            enctype = "multipart/form-data",
            @autocomplete = "off"
        }))
            {
                @Html.AntiForgeryToken()
                @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")

                <div class="form-field form-field--text ">
                    <label for="form-field-expoparticipant" class="form-field__label">
                        @Translate.Text("Expo_Participant")
                    </label>
                    <span class="form-field__input-wrapper">
                        @Html.TextBoxFor(x => x.EXPOParticipant,
                    new
                    {
                        @class = "form-field__input form-field__input--text",
                        @name = "EXPOParticipant",
                        @id = "form-field-expoparticipant",
                        @placeholder = @Translate.Text("Expo_ParticipantPlaceholder"),
                        @required = "",
                        @maxlength = "70",
                        @data_parsley_pattern = "/^[أ-يa-zA-Z ]*$/",
                        @data_parsley_pattern_message = Translate.Text("Expo_SpecialCharacters"),
                        @data_parsley_trigger = "focusout",
                        @data_parsley_required_message = Translate.Text("Expo_ParticipantPlaceholder"),
                        @data_parsley_errors_container = "#description-for-expoparticipant",
                        @aria_describedby = "description-for-expoparticipant",
                    })

                    </span>
                    <div id="description-for-expoparticipant" class="form-field__messages">
                        @Html.ValidationMessageFor(x => x.EXPOParticipant, "", new { @class = "parsley-errors-list" })
                    </div>
                </div>
                <div class="form-field form-field--text ">
                    <label for="form-field-expoparticipantname" class="form-field__label">
                        @Translate.Text("Expo_ParticipantName")
                    </label>
                    <span class="form-field__input-wrapper">
                        @Html.TextBoxFor(x => x.EXPOParticipantName,
                    new
                    {
                        @class = "form-field__input form-field__input--text",
                        @name = "EXPOParticipantName",
                        @id = "form-field-expoparticipantname",
                        @placeholder = @Translate.Text("Expo_ParticipantNamePlaceholder"),
                        @required = "",
						@data_parsley_pattern = "/^[أ-يa-zA-Z ]*$/",
                        @data_parsley_trigger = "focusout",
                        @data_parsley_pattern_message = Translate.Text("Expo_SpecialCharacters"),
                        @data_parsley_required_message = Translate.Text("Expo_ParticipantNamePlaceholder"),
                        @data_parsley_errors_container = "#description-for-expoparticipantname",
                        @aria_describedby = "description-for-expoparticipantname",
                        @maxlength = "70",
                    })

                    </span>
                    <div id="description-for-expoparticipantname" class="form-field__messages">
                        @Html.ValidationMessageFor(x => x.EXPOParticipantName, "", new { @class = "parsley-errors-list" })
                    </div>
                </div>

                <div class="form-field form-field--text ">
                    <label for="form-field-expoemailid" class="form-field__label">
                        @Translate.Text("Expo_EmailID")
                    </label>
                    <span class="form-field__input-wrapper">
                        <input class="form-field__input form-field__input--text"
                               id="form-field-expoemailid"
                               name="EXPOEmailID"
                               type="email"
                               placeholder="@Translate.Text("Expo_EmailIDPlaceholder")"
                               aria-describedby="description-for-expoemailid"
                               data-parsley-errors-container="#description-for-expoemailid"
                               required=""
                               maxlength="40"
                               data-parsley-error-message="@Translate.Text("Expo_EmailID_ErrorMsg")"
                               @*data-parsley-required-message="@Translate.Text(" Expo_EmailID_ErrorMsg")"*@
                               data-parsley-trigger="focusout">
                    </span>
                    <div id="description-for-expoemailid" class="form-field__messages">
                        @Html.ValidationMessageFor(x => x.EXPOEmailID, "", new { @class = "parsley-errors-list" })
                    </div>
                </div>
                <div class="form-field form-field--text ">
                    <label for="form-field-expomobile" class="form-field__label">
                        @Translate.Text("Expo_EXPOMobile")
                        <span class="form-field__label-required aria-only">(@Translate.Text("required"))</span>
                    </label>
                    <span class="form-field__input-wrapper form-field__input-wrapper--prefixed form-field__input-wrapper--mobile-number">
                        <input type="tel"
                               id="form-field-expomobile"
                               name="EXPOMobile"
                               value="@(!string.IsNullOrWhiteSpace(Model.EXPOMobile) ? Model.EXPOMobile :"")"
                               aria-describedby="description-for-expomobile"
                               required="required"
                               placeholder="@Translate.Text("Expo_Mobilenumberplaceholder")"
                               data-parsley-error-message="@Translate.Text("Please enter a valid UAE mobile number")"
                               data-parsley-type="digits"
                               data-parsley-trigger="focusout"
                               data-parsley-mobile_number
                               data-parsley-errors-container="#description-for-expomobile"
                               class="form-field__input form-field__input--text form-field__input--prefixed" />
                    </span>
                    <div id="description-for-expomobile" class="form-field__messages">
                        @Html.ValidationMessageFor(x => x.EXPOMobile)
                    </div>
                </div>
                <div class="form-field form-field--select form-field--select-single">
                    <label for="form-field-expodiscussionarea" class="form-field__label">
                        @Translate.Text("Expo_DiscussionArea")
                        <span class="form-field__label-required aria-only">(required)</span>
                    </label>
                    <span class="form-field__input-wrapper form-field__input-wrapper--select">
                        @Html.DropDownListFor(model => model.EXPODiscussionArea, Model.EXPODiscussionAreaList, Translate.Text("Expo_DefaultSelect"), new
                   {
                       @class = "form-field__input form-field__input--select form-field__input--select-full",
                       @id = "form-field-expodiscussionarea",
                       @required = "required",
                       @data_parsley_required_message = Translate.Text("Expo_DiscussionAreaRequired"),
                       @data_parsley_errors_container = "#description-for-expodiscussionarea",
                       @aria_describedby = "description-for-expodiscussionarea",

                   })
                    </span>
                    <div id="description-for-expodiscussionarea" class="form-field__messages">
                    </div>
                </div>
                <div class="form-field form-field--text form-field--textarea">
                    <label class="form-field__label" for="form-field-expodiscussionsubject">
                        @Translate.Text("Expo_Discussionsubject")
                    </label>
                    <span class="form-field__input-wrapper">
                        <textarea class="form-field__input form-field__input--text form-field__input--textarea"
                                  maxlength="250"
                                  data-textarea="expodiscussionsubject"
                                  id="form-field-expodiscussionsubject"
                                  name="EXPODiscussionSubject"
                                  type="textarea"
                                  placeholder="@Translate.Text("Expo_DiscussionsubjectPlaceholder")"
                                  aria-describedby="description-for-expodiscussionsubject"
                                  required=""
								  onkeyup="valid(this)"
                                  data-parsley-error-message="@Translate.Text("Expo_Discussionsubject_ErroMsg")"
                                  data-parsley-errors-container="#description-for-expodiscussionsubject"
                                  data-parsley-id="15">@Model.EXPODiscussionSubject</textarea>
                    </span>
                    <div class="form-field__messages" id="description-for-expodiscussionsubject">
                        <p class="form-field__charcount">@Translate.Text("Max") <span data-charcount="expodiscussionsubject">0</span>/250 @Translate.Text("Characters")</p>
                    </div>
                </div>
				
				if (Model.IsLoggedIn != true)
                {
                if ((bool)ViewBag.Recaptcha)
                {
					<br/>
                    <div class="g-recaptcha" id="captcha" data-callback="recaptchaCallback" data-sitekey="@(ViewBag.SiteKey)"></div>
                    <span id='errorContainer' class="parsley-errors-list"></span>
					<br/>
                }
				}
                <div class="form-field__button">
                    <button id="btnSubmit" type="submit" class="button button--primary button--next" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Submit")</button>
                </div>
                <div class="form-field__footer align-center">
                    @Html.Sitecore().Placeholder("expo-contact-us")
                </div>
            }
        </div>
    </div>
</div>
<script type="text/javascript">
docReady(function () {
        jQuery('#btnSubmit').off('click.submit').on('click.submit', function (e) {
            require(['parsley'], function () {
                if (!jQuery('#IdFeedbackexpo').parsley().validate() || !recaptchaCallback()) {
                    e.preventDefault();
                    return false;
                }
            });
        });

        // Validate google captcha
        function recaptchaCallback() {
            var v = grecaptcha.getResponse();
            if (v.length == 0) {
                jQuery('#errorContainer').show();
                jQuery('#errorContainer').html('@Translate.Text("FG_Capatcha_Valid")');
                return false;
            }
            else {
                jQuery('#errorContainer').hide();
                jQuery('#errorContainer').html('');
                return true;
            }
        }
    });
	 function valid(f) {
        !(/^[أ-يA-z&#209;&#241;0-9 ]*$/i).test(f.value)?f.value = f.value.replace(/[^أ-يA-z&#209;&#241;0-9 ]/ig,''):null;
        } 
</script>
<script src="~/scripts/External/nml/form-submit-validate.js"></script>
