@using Sitecore.Globalization;
@using DEWAXP.Foundation.Integration.CustomerSmartSalesSvc
@using DEWAXP.Foundation.Helpers
@using DEWAXP.Foundation.Content
@model DEWAXP.Feature.ScrapSale.Models.ScrapSale.ProfileUpdateModel

@{
    var eidaExpDate = !string.IsNullOrEmpty(Model.ExpiryDate) ? DateTime.ParseExact(Model.ExpiryDate, "dd MMMM yyyy",
                                  System.Globalization.CultureInfo.InvariantCulture).ToString("dd MMMM yyyy") : string.Empty;

    var isArabicculture = Sitecore.Context.Language.CultureInfo.TextInfo.IsRightToLeft;

    if (isArabicculture && eidaExpDate != string.Empty)
    {
        eidaExpDate = eidaExpDate.Replace("January", "يناير").Replace("February", "فبراير").Replace("March", "مارس").Replace("April", "أبريل").Replace("May", "مايو").Replace("June", "يونيو").Replace("July", "يوليو").Replace("August", "أغسطس").Replace("September", "سبتمبر").Replace("October", "أكتوبر").Replace("November", "نوفمبر").Replace("December", "ديسمبر");
    }

    var tIssueDate = !string.IsNullOrEmpty(Model.TradeLicenseIssueDate) ? DateTime.ParseExact(Model.TradeLicenseIssueDate, "dd MMMM yyyy",
                                       System.Globalization.CultureInfo.InvariantCulture).ToString("dd MMMM yyyy") : string.Empty;

    if (isArabicculture && tIssueDate != string.Empty)
    {
        tIssueDate = tIssueDate.Replace("January", "يناير").Replace("February", "فبراير").Replace("March", "مارس").Replace("April", "أبريل").Replace("May", "مايو").Replace("June", "يونيو").Replace("July", "يوليو").Replace("August", "أغسطس").Replace("September", "سبتمبر").Replace("October", "أكتوبر").Replace("November", "نوفمبر").Replace("December", "ديسمبر");
    }

    var tExpDate = !string.IsNullOrEmpty(Model.TradeLicenseExpiryDate) ? DateTime.ParseExact(Model.TradeLicenseExpiryDate, "dd MMMM yyyy",
                                   System.Globalization.CultureInfo.InvariantCulture).ToString("dd MMMM yyyy") : string.Empty;

    if (isArabicculture && tExpDate != string.Empty)
    {
        tExpDate = tExpDate.Replace("January", "يناير").Replace("February", "فبراير").Replace("March", "مارس").Replace("April", "أبريل").Replace("May", "مايو").Replace("June", "يونيو").Replace("July", "يوليو").Replace("August", "أغسطس").Replace("September", "سبتمبر").Replace("October", "أكتوبر").Replace("November", "نوفمبر").Replace("December", "ديسمبر");
    }

}

<div class="grid">
    <div class="grid__row">
        <div class="grid__column grid__column--12">
            <!-- m26-page-title-start -->
            <div class="m26-page-title title_message">
                <h2 class="text__page-title">
                    @Translate.Text("SS_UP_UpdateProfile")
                </h2>
            </div>
            <!-- m26-page-title-end -->
        </div>
    </div>
    <div class="grid__row">
        <div class="grid__column grid__column--12 grid__column--form">
            @using (Html.BeginRouteForm(Sitecore.Mvc.Configuration.MvcSettings.SitecoreRouteName,
         FormMethod.Post, new
         {
             @class = "form",
             @id = "ScrapSaleRegistrationFrom",
             data_form = "true",
             data_parsley_focus = "none",
             @data_submit_validate = "enabled",
             enctype = "multipart/form-data",
             @autocomplete = "off"
         }))
            {
            @Html.AntiForgeryToken()
            @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
            @Html.HiddenFor(m => m.OtpRequestId)
            @Html.HiddenFor(m => m.TradenumberFlag)
            @Html.HiddenFor(m => m.IssuedateFlag)
            @Html.HiddenFor(m => m.ExpirydateFlag)
            @Html.HiddenFor(m => m.AttachmentFlag)
            @Html.HiddenFor(m => m.IssueauthorityFlag)
            <div class="grid__row">
                <div class="grid__column grid__column--12 grid__column--form">
                    <div class="j171-masar" data-journey="j171-masar">
                        <form method="get" class="form" data-form="true" action="#" novalidate="">
                            <div class="form-field">
                                <fieldset class="fieldset">
                                    <legend class="fieldset_legend-title">@Translate.Text("SS_UR_CompanyDetails")</legend>
                                    <div class="form-field form-field__radio-fieldset">
                                        <label class="form-field__label">@Translate.Text("SS_UR_CompanyType")</label>
                                        <div class="form-field__radio-row">
                                            <p class="form-field__radio">
                                                <label>
                                                    @Html.RadioButtonFor(m => m.UserType, "O", new
                                               {
                                                   @id = "form-field-radio_1_1",
                                                   @aria_describedby = "description-for-v2xhvhp5r",
                                                   @data_parsley_errors_container = "#description-for-v2xhvhp5r",
                                                   @data_parsley_multiple = "radios_group1",
                                                   @class = "form-field__input form-field__input--radio rButton",
                                                   @checked = true,

                                               })

                                                    <span class="form-field__fakeradio focus-enabled">
                                                        @Translate.Text("SS_UR_Organization")
                                                    </span>
                                                </label>
                                            </p>
                                            <p class="form-field__radio">
                                                <label>
                                                    @Html.RadioButtonFor(m => m.UserType, "I", new
                                               {
                                                   @id = "form-field-radio_1_2",
                                                   @aria_describedby = "description-for-v2xhvhp5r",
                                                   @data_parsley_errors_container = "#description-for-v2xhvhp5r",
                                                   @data_parsley_multiple = "radios_group1",
                                                   @class = "form-field__input form-field__input--radio rButton",

                                               })
                                                    <span class="form-field__fakeradio focus-enabled">
                                                        @Translate.Text("SS_UR_Individual")
                                                    </span>
                                                </label>
                                            </p>
                                        </div>
                                        <div id="description-for-v2xhvhp5r" class="form-field__messages">
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset class="fieldset onlyOrg" style="margin-top:24px">
                                    <div class="form-field form-field--select form-field--select-single">
                                        <label for="form-field-z198vv0ad" class="form-field__label">
                                            @Translate.Text("SS_UR_TradeLicenseIssuedBy")
                                        </label>
                                        <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                            @Html.DropDownListFor(model => model.TradeLicenseIssuingAuthorityKey, Model.TradeLicenseIssuingAuthority, new
                                       {
                                           @class = "form-field__input form-field__input--select form-field__input--select-full",
                                           @id = "form-field-TradeLicenseIssuedBy",
                                           @required = "",
                                           @data_parsley_required_message = Translate.Text("SS_UR_TradeLicenseIssuePlaceRequired"),
                                           @data_parsley_errors_container = "#description-for-z198vv0ad",
                                           @aria_describedby = "description-for-z198vv0ad",

                                       })
                                        </span>
                                        <div id="description-for-z198vv0ad" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field form-field--text authDescription">
                                        <label for="form-field-IssuingAuthorityDescription" class="form-field__label">
                                            @Translate.Text("SS_UR_IssuingAuthorityDescription")
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            <input class="form-field__input form-field__input--text _attachedTextChange"
                                                   id="form-field-IssuingAuthorityDescription"
                                                   name="IssuingAuthorityDescription"
                                                   required=""
                                                   value="@Model.IssuingAuthorityDescription"
                                                   type="text"
                                                   placeholder="@Translate.Text("SS_UR_IssuingAuthorityDescription")"
                                                   aria-describedby="description-for-IssuingAuthorityDescription"
                                                   data-parsley-errors-container="#description-for-IssuingAuthorityDescription"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_IssuingAuthorityRequired")"
                                                   data-attid="form-field-IssuingAuthorityDescription"
                                                   maxlength="40">
                                        </span>
                                        <div id="description-for-IssuingAuthorityDescription" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field form-field--text form-field--6 mb0">
                                        <label for="form-field-uj0dpkni5" class="form-field__label">
                                            @Translate.Text("SS_UR_TradelicenseNumber")
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            <input class="form-field__input form-field__input--text _attachedTextChange"
                                                   id="TradelicenseNumber"
                                                   name="TradelicenseNumber"
                                                   required=""
                                                   value="@Model.TradelicenseNumber"
                                                   type="text"
                                                   placeholder="@Translate.Text("SS_UR_TradelicenseNumberPlaceholder")"
                                                   aria-describedby="description-for-TradelicenseNumber"
                                                   data-parsley-errors-container="#description-for-TradelicenseNumber"
                                                   data-parsley-type="alphanum"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_TradelicenseNumberRequired")"
                                                   data-parsley-alphanum-message="@Translate.Text("SS_UR_TradelicenseNumberInValid")"
                                                   data-attid="form-field-TradelicenseNumber"
                                                   maxlength="30">
                                        </span>
                                        <div id="description-for-TradelicenseNumber" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div id="datepicker-container-mzb2dv01m" class="form-field form-field--text mb0 picker--6 form-field--6">
                                        <label for="form-field-mzb2dv01m" class="form-field__label">
                                            @Translate.Text("SS_TradeLicense-DateofExpiry")
                                        </label>
                                        <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                            <input class="form-field__input form-field__input--text form-field__input--datepicker picker__input"
                                                   id="form-field-mzb2dv01m" name="TradeLicenseExpiryDate" type="text"
                                                   placeholder="@Translate.Text("SS_TradeLicense-DateofExpiry")" aria-describedby="description-for-mzb2dv01m"
                                                   data-parsley-errors-container="#description-for-mzb2dv01m" data-el="datepicker-future"
                                                   data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 36 }' data-parsley-id="14" readonly="" aria-haspopup="true"
                                                   aria-expanded="false" aria-readonly="false"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_TradelicenseExpiryDateRequired")"
                                                   value="@tExpDate"
                                                   aria-owns="form-field-mzb2dv01m_root" aria-invalid="false"><span data-clicker="#datepicker-container-mzb2dv01m"
                                                                                                                    class="form-field__datepicker-icon-clicker"></span>
                                            <input type="hidden" name="text-date_submit">
                                        </span>
                                        <div id="description-for-mzb2dv01m" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field form--single_line _tlverifydiv form--single_line_scrapsale-button hidden">
                                        <div class="form-field__button">
                                            <div class="red hidden _err" style="margin-bottom: 10px;padding:0px 10px;">@Translate.Text("SS_UR_FetchTradeLicenseExpiryError")</div>
                                            <a class="button button--primary button--fullwidth-mobile _btnVerifyTL">@Translate.Text("SS_UR_VerifyTradeLicense")</a>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset class="fieldset onlyOrg-2" style="margin-top:24px">
                                    <div id="datepicker-container-mzb2dv01mi" class="form-field form-field--text">
                                        <label for="form-field-mzb2dv01mi" class="form-field__label">
                                            @Translate.Text("SS_TradeLicense-DateofIssue")
                                        </label>
                                        <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                            <input class="form-field__input form-field__input--text form-field__input--datepicker picker__input"
                                                   id="form-field-mzb2dv01mi" name="TradeLicenseIssueDate" type="text"
                                                   placeholder="@Translate.Text("SS_TradeLicense-DateofIssue")" aria-describedby="description-for-mzb2dv01mi"
                                                   data-parsley-errors-container="#description-for-mzb2dv01mi" data-el="datepicker-past"
                                                   data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 36 }' data-parsley-id="14" readonly="" aria-haspopup="true"
                                                   aria-expanded="false" aria-readonly="false"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_TradelicenseIssueDateRequired")"
                                                   value="@tIssueDate"
                                                   aria-owns="form-field-mzb2dv01mi_root" aria-invalid="false"><span data-clicker="#datepicker-container-mzb2dv01mi"
                                                                                                                     class="form-field__datepicker-icon-clicker"></span>
                                            <input type="hidden" name="text-date_submit">
                                        </span>
                                        <div id="description-for-mzb2dv01mi" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field form-field--text">
                                        <label for="form-field-uj0dpkni52" class="form-field__label">
                                            @Translate.Text("SS_UR_CompanyName")
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            @Html.TextBoxFor(m => m.CompanyName, new
                                       {
                                           @placeholder = @Translate.Text("SS_UR_CompanyNamePlaceholder"),
                                           @aria_describedby = "description-for-CompanyName",
                                           @data_parsley_errors_container = "#description-for-CompanyName",
                                           @required = "",
                                           @disabled = "true",
                                           @maxlength = "80",
                                           @data_parsley_required_message = Translate.Text("SS_UR_CompanyNameRequired"),
                                           @class = "form-field__input form-field__input--text",
                                       })
                                        </span>
                                        <div id="description-for-CompanyName" class="form-field__messages">

                                        </div>
                                    </div>
                                    <div class="form-field form-field--text">
                                        <label for="form-field-uj0dpkni53" class="form-field__label">
                                            @Translate.Text("SS_UR_VATRegistrationNumber")&nbsp;(@Translate.Text("optional"))
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            @Html.TextBoxFor(m => m.VatRegistrationNo, new
                                       {
                                           @placeholder = @Translate.Text("SS_UR_VATRegistrationNumber"),
                                           @aria_describedby = "description-for-VatRegistrationNo",
                                           @maxlength = "15",
                                           @data_parsley_errors_container = "#description-for-VatRegistrationNo",
                                           @data_parsley_required_message = Translate.Text("SS_UR_VatRegistrationNoRequired"),
                                           @class = "form-field__input form-field__input--text",
                                       })
                                        </span>
                                        <div id="description-for-VatRegistrationNo" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field">
                                        <div class="form-field_contact-ext-fieldset contact-country-code">
                                            <div class="form-field form-field--select form-field--select-single form-field_select-code-col3">
                                                <label for="form-field-xd3qt0c4q" class="form-field__label">
                                                    @Translate.Text("SS_UR_Code")
                                                </label>
                                                <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                                    @Html.DropDownListFor(model => model.CompanyTelephoneCode, Model.CompanyTelephoneCodeList, new
                                                      {
                                                      @class = "form-field__input form-field__input--select form-field__input--select-full",
                                                      @id = "form-field-CompanyTelCode",
                                                      @data_parsley_errors_container = "#description-for-CompanyTelCode",
                                                      @aria_describedby = "description-for-CompanyTelCode",

                                                      })
                                                </span>

                                            </div>
                                            <div class="form-field form-field--text form-field--text form-field_contact-number-col3">
                                                <label for="form-field-xd3qt0c4q" class="form-field__label">
                                                    @Translate.Text("SS_UR_CompanyTelephoneNumber")&nbsp;(@Translate.Text("optional"))
                                                </label>
                                                <span class="form-field__input-wrapper">
                                                    <input class="form-field__input form-field__input--text"
                                                           id="form-field-xd3qt0c4q"
                                                           type="tel"
                                                           data-input-numbers
                                                           name="CompanyTelephone"
                                                           value="@Model.CompanyTelephone"
                                                           placeholder="@Translate.Text("SS_UR_CompanyTelephoneNumber")"
                                                           aria-describedby="description-for-CompanyTelephoneNumber"
                                                           data-parsley-errors-container="#description-for-CompanyTelephoneNumber"
                                                           data-parsley-required-message="@Translate.Text("SS_UR_TelephoneNumberRequired")"
                                                           data-parsley-type="number"
                                                           maxlength="8"
                                                           data-parsley-mobile_number-message="@Translate.Text("SS_UR_CompanyTelephoneNumberRequired")"
                                                           data-parsley-trigger="focusout" data-parsley-id="8" aria-invalid="false"
                                                           data-parsley-pattern-message="@Translate.Text("SS_UR_TelephoneNumberInvalid")"
                                                           data-parsley-telephonenumber="true"
                                                           data-parsley-pattern="/^(?:2|3|4|6|7|9)\d{7}$/">

                                                </span>


                                            </div>
                                            <div class="form-field form-field--text form-field_ext-col3">
                                                <label for="form-field-uj0dpkni54" class="form-field__label">
                                                    @Translate.Text("SS_UR_Extention")
                                                </label>
                                                <span class="form-field__input-wrapper">
                                                    <input class="form-field__input form-field__input--text"
                                                           id="form-field-Extention"
                                                           name="CompanyTelephoneExtension"
                                                           type="tel"
                                                           data-input-numbers
                                                           maxlength="10"
                                                           value="@Model.CompanyTelephoneExtension"
                                                           placeholder="@Translate.Text("SS_UR_Extention")"
                                                           aria-describedby="description-for-Extention"
                                                           data-parsley-errors-container="#description-for-Extention"
                                                           data-parsley-id="4">
                                                </span>
                                            </div>
                                        </div>
                                        <div id="description-for-CompanyTelephoneNumber" class="form-field__messages">

                                        </div>
                                    </div>
                                    <div class="form-field">
                                        <div class="form-field_contact-ext-fieldset contact-country-code">
                                            <div class="form-field form-field--select form-field--select-single form-field_select-code-col3">
                                                <label for="form-field-CompanyMobCode"
                                                       class="form-field__label">
                                                    @Translate.Text("SS_UR_Code")
                                                </label>
                                                <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                                    @Html.DropDownListFor(model => model.CompanyMobileCode, Model.CompanyTelephoneCodeList, new
                                                      {
                                                      @class = "form-field__input form-field__input--select form-field__input--select-full",
                                                      @id = "form-field-CompanyMobCode",
                                                      @data_parsley_errors_container = "#description-for-CompanyMobCode",
                                                      @aria_describedby = "description-for-CompanyMobCode",

                                                      })
                                                </span>

                                            </div>
                                            <div class="form-field form-field--text form-field--text form-field_contact-number-col3">
                                                <label for="CompanyMobileNumber" class="form-field__label">
                                                    @Translate.Text("SS_UR_MobileNumber")
                                                    <span class="form-field__label-required aria-only">(required)</span>
                                                </label>
                                                <span class="form-field__input-wrapper">
                                                    <input class="form-field__input form-field__input--text"
                                                           id="CompanyMobileNumber"
                                                           name="CompanyMobileNumber"
                                                           value="@Model.CompanyMobileNumber"
                                                           type="tel"
                                                           data-input-numbers
                                                           placeholder="@Translate.Text("SS_UR_MobileNumberPlaceholder")"
                                                           aria-describedby="description-for-CompanyMobileNumber"
                                                           data-parsley-errors-container="#description-for-CompanyMobileNumber"
                                                           required
                                                           maxlength="9"
                                                           data-parsley-required-message="@Translate.Text("SS_UR_MobileNumberRequired_Outside")"
                                                           data-parsley-type="number"
                                                           data-parsley-pattern="/^(?:50|51|52|53|54|55|56|57|58|59|52|54|55|56)\d{7}$/"
                                                           data-parsley-pattern-message="@Translate.Text("SS_UR_MobileNumberInvalid")"
                                                           aria-invalid="false">
                                                </span>
                                            </div>
                                        </div>
                                        <div id="description-for-CompanyMobileNumber" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field form-field_verification-fieldset">
                                        <div class="form-field form-field--text form-field_verification-input">
                                            <label for="form-field-dxv8jj22n1" class="form-field__label">
                                                @Translate.Text("SS_UR_CompanyEmail")
                                            </label>
                                            <span class="form-field__input-wrapper">
                                                <input class="form-field__input form-field__input--text"
                                                       id="form-field-CompanyEmail"
                                                       name="CompanyEmail"
                                                       value="@Model.CompanyEmail"
                                                       type="email"
                                                       maxlength="241"
                                                       placeholder="@Translate.Text("SS_UR_CompanyEmail")"
                                                       aria-describedby="description-for-CompanyEmail"
                                                       required=""
                                                       data-parsley-errors-container="#description-for-CompanyEmail"
                                                       data-parsley-required-message="@Translate.Text("SS_UR_CompanyEmailRequired")"
                                                       data-parsley-trigger="focusout" data-parsley-id="4">
                                            </span>
                                            <div id="description-for-CompanyEmail" class="form-field__messages">

                                            </div>
                                        </div>
                                        @*<div class="form-field__button form-field_verification-button email-verify">
                                                <span class="button button--primary">@Translate.Text("SS_UR_Verify")</span>
                                            </div>*@
                                    </div>
                                </fieldset>
                                <fieldset class="fieldset mt24 onlyInd">
                                    @*<legend class="fieldset_legend-title">@Translate.Text("SS_UR_PointOfContact")Details of the Contact Person</legend>*@
                                    <div class="form-field form-field_fieldset form-field_fieldset-fullname">
                                        <div class="form-field form-field--text">
                                            <label for="form-field-uj0dpkni55" class="form-field__label">
                                                @Translate.Text("SS_UR_FirstName")
                                            </label>
                                            <span class="form-field__input-wrapper">

                                                @Html.TextBoxFor(m => m.FirstName, new
                                           {
                                               @placeholder = @Translate.Text("SS_UR_FirstNamePlaceholder"),
                                               @aria_describedby = "description-for-first_name",
                                               @data_parsley_errors_container = "#description-for-first_name",
                                               @required = "",
                                               @maxlength = "40",
                                               @disabled = "true",
                                               @data_parsley_required_message = Translate.Text("SS_UR_FirstNameRequired"),
                                               @class = "form-field__input form-field__input--text",
                                           })
                                            </span>
                                            <div id="description-for-first_name" class="form-field__messages">
                                            </div>
                                        </div>
                                        <div class="form-field form-field--text">
                                            <label for="form-field-uj0dpkni56" class="form-field__label">
                                                @Translate.Text("SS_UR_LastName")
                                            </label>
                                            <span class="form-field__input-wrapper">
                                                @Html.TextBoxFor(m => m.LastName, new
                                           {
                                               @placeholder = @Translate.Text("SS_UR_LastNamePlaceholder"),
                                               @aria_describedby = "description-for-LastName",
                                               @data_parsley_errors_container = "#description-for-LastName",
                                               @required = "",
                                               @maxlength = "40",
                                               @disabled = "true",
                                               @data_parsley_required_message = Translate.Text("SS_UR_LastNameRequired"),
                                               @class = "form-field__input form-field__input--text",
                                           })
                                            </span>
                                            <div id="description-for-LastName" class="form-field__messages">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-field form-field_contact-ext-fieldset eid-fieldset">
                                        <div class="form-field form-field--text">
                                            <label for="form-field-qxm453zkl" class="form-field__label">
                                                @Translate.Text("SS_UR_EmiratesID")
                                                <span class="form-field__label-required aria-only">(required)</span>
                                            </label>
                                            <span class="form-field__input-wrapper">
                                                <input class="form-field__input form-field__input--text _attachedTextChange"
                                                       id="EmiratesID"
                                                       name="EmiratesID"
                                                       value="@Model.EmiratesID"
                                                       required=""
                                                       type="number"
                                                       disabled="disabled"
                                                       placeholder="@Translate.Text("SS_UR_EmiratesIDPlaceholder")"
                                                       aria-describedby="description-for-EmiratesID"
                                                       data-parsley-errors-container="#description-for-EmiratesID"
                                                       data-parsley-required-message="@Translate.Text("SS_UR_EmiratesIDRequired")"
                                                       data-parsley-emiratesid=""
                                                       data-parsley-emiratesid-message="@Translate.Text("SS_UR_EmiratesIDInValid")"
                                                       data-attid="form-field-EmiratesID">
                                            </span>
                                            <div id="description-for-EmiratesID" class="form-field__messages">
                                            </div>
                                        </div>
                                        <div id="datepicker-container-IdExpiry" class="form-field form-field--text">
                                            <label for="form-field-IdExpiry" class="form-field__label">
                                                @Translate.Text("MI_ExpiryDate")
                                            </label>
                                            <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                                <input class="form-field__input form-field__input--text form-field__input--datepicker picker__input"
                                                       id="form-field-IdExpiry" name="ExpiryDate" type="text"
                                                       required=""
                                                       placeholder="@Translate.Text("MI_ExpiryDate")"
                                                       aria-describedby="description-for-IdExpiry"
                                                       data-parsley-errors-container="#description-for-IdExpiry" data-el="datepicker-future"
                                                       data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 36 }' data-parsley-id="14" readonly="" aria-haspopup="true"
                                                       aria-expanded="false" aria-readonly="false"
                                                       data-parsley-required-message="@Translate.Text("required")"
                                                       asp-for="@Model.ExpiryDate"
                                                       value="@eidaExpDate"
                                                       aria-owns="form-field-IdExpiry_root" aria-invalid="false"><span data-clicker="#datepicker-container-IdExpiry"
                                                                                                                       class="form-field__datepicker-icon-clicker"></span>
                                                <input type="hidden" name="text-date_submit">
                                            </span>
                                            <div id="description-for-IdExpiry" class="form-field__messages">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-field form--single_line hidden showVerify">
                                        <div class="form-field__button">
                                            <div class="red hidden _err" style="margin-bottom: 10px;padding:0px 10px;">@Translate.Text("SS_UR_ICAFailed_Msg")</div>
                                            <a class="button button--primary button--fullwidth-mobile _btnVerify">@Translate.Text("SS_UR_SearchAutoFill")</a>
                                        </div>
                                    </div>
                                    <div class="form-field">
                                        <div class="form-field_contact-ext-fieldset contact-country-code">
                                            <div class="form-field form-field--select form-field--select-single form-field_select-code-col3">
                                                <label for="form-field-IndividualMobCode" class="form-field__label">
                                                    @Translate.Text("SS_UR_Code")
                                                </label>
                                                <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                                    @Html.DropDownListFor(model => model.MobileCode, Model.CompanyTelephoneCodeList, new
                                                      {
                                                      @class = "form-field__input form-field__input--select form-field__input--select-full",
                                                      @id = "form-field-IndividualMobCode",
                                                      @data_parsley_errors_container = "#description-for-IndividualMobCode",
                                                      @aria_describedby = "description-for-IndividualMobCode",

                                                      })
                                                </span>

                                            </div>
                                            <div class="form-field form-field--text form-field--text form-field_contact-number-col3">
                                                <label for="MobileNumber" class="form-field__label">
                                                    @Translate.Text("SS_UR_MobileNumber")
                                                    <span class="form-field__label-required aria-only">(required)</span>
                                                </label>
                                                <span class="form-field__input-wrapper">
                                                    <input class="form-field__input form-field__input--text"
                                                           id="MobileNumber"
                                                           name="MobileNumber"
                                                           value="@Model.MobileNumber"
                                                           type="tel"
                                                           data-input-numbers
                                                           data-parsley-mobile_number
                                                           placeholder="@Translate.Text("SS_UR_MobileNumberPlaceholder")"
                                                           aria-describedby="description-for-MobileNumber"
                                                           data-parsley-errors-container="#description-for-MobileNumber"
                                                           required
                                                           maxlength="9"
                                                           data-parsley-required-message="@Translate.Text("SS_UR_MobileNumberRequired_Outside")"
                                                           data-parsley-type="number"
                                                           data-parsley-pattern="/^(?:50|51|52|53|54|55|56|57|58|59|52|54|55|56)\d{7}$/"
                                                           data-parsley-pattern-message="@Translate.Text("SS_UR_MobileNumberInvalid")"
                                                           aria-invalid="false">
                                                </span>

                                            </div>
                                        </div>
                                        <div id="description-for-MobileNumber" class="form-field__messages">
                                        </div>
                                    </div>
                                    <div class="form-field">
                                        <div class="form-field_contact-ext-fieldset contact-country-code">
                                            <div class="form-field form-field--select form-field--select-single form-field_select-code-col3">
                                                <label for="form-field-xd3qt0c4q" class="form-field__label">
                                                    @Translate.Text("SS_UR_Code")
                                                </label>
                                                <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                                    @Html.DropDownListFor(model => model.TelephoneCode, Model.CompanyTelephoneCodeList, new
                                                           {
                                                           @class = "form-field__input form-field__input--select form-field__input--select-full",
                                                           @id = "form-field-IndividualTelCode",
                                                           @data_parsley_errors_container = "#description-for-IndividualTelCode",
                                                           @aria_describedby = "description-for-IndividualTelCode",

                                                           })
                                                </span>

                                            </div>
                                            <div class="form-field form-field--text form-field--text form-field_contact-number-col3">
                                                <label for="form-field-xd4qt0c4q" class="form-field__label">
                                                    @Translate.Text("SS_UR_CompanyTelephoneNumber")&nbsp;(@Translate.Text("optional"))
                                                </label>
                                                <span class="form-field__input-wrapper">
                                                    <input class="form-field__input form-field__input--text"
                                                           id="form-field-xd4qt0c4q"
                                                           asp-for="@Model.IndividualCompanyTelephone"
                                                           type="tel"
                                                           data-input-numbers
                                                           name="IndividualCompanyTelephone"
                                                           placeholder="@Translate.Text("SS_UR_CompanyTelephoneNumber")"
                                                           aria-describedby="description-for-IndiCompanyTelephoneNumber"
                                                           data-parsley-errors-container="#description-for-form-field-xd4qt0c4q"
                                                           data-parsley-required-message="@Translate.Text("SS_UR_TelephoneNumberRequired")"
                                                           data-parsley-type="number"
                                                           maxlength="8"
                                                           value="@Model.IndividualCompanyTelephone"
                                                           data-parsley-mobile_number-message="@Translate.Text("SS_UR_CompanyTelephoneNumberRequired")"
                                                           data-parsley-trigger="focusout" data-parsley-id="8"
                                                           aria-invalid="false"
                                                           data-parsley-pattern-message="@Translate.Text("SS_UR_TelephoneNumberInvalid")"
                                                           data-parsley-telephonenumber="true"
                                                           data-parsley-pattern="/^(?:2|3|4|6|7|9)\d{7}$/">

                                                </span>


                                            </div>
                                            <div class="form-field form-field--text form-field_ext-col3">
                                                <label for="form-field-uj0dpkni543" class="form-field__label">
                                                    @Translate.Text("SS_UR_Extention")
                                                </label>
                                                <span class="form-field__input-wrapper">
                                                    <input class="form-field__input form-field__input--text"
                                                           id="form-field-uj0dpkni543" asp-for="@Model.IndividualCompanyTelephoneExtension"
                                                           name="IndividualCompanyTelephoneExtension"
                                                           value="@Model.IndividualCompanyTelephoneExtension"
                                                           type="tel"
                                                           data-input-numbers
                                                           maxlength="10"
                                                           placeholder="@Translate.Text("SS_UR_Extention")"
                                                           aria-describedby="description-for-uj0dpkni543"
                                                           data-parsley-errors-container="#description-for-uj0dpkni543"
                                                           data-parsley-id="4">
                                                </span>

                                            </div>
                                        </div>
                                        <div id="description-for-form-field-xd4qt0c4q" class="form-field__messages">

                                        </div>
                                    </div>
                                    <div class="form-field form-field_verification-fieldset">
                                        <div class="form-field form-field--text form-field_verification-input">
                                            <label for="EmailAddress" class="form-field__label">
                                                @Translate.Text("SS_UR_EmailAddress")
                                                <span class="form-field__label-required aria-only">(required)</span>
                                            </label>
                                            <span class="form-field__input-wrapper">
                                                @Html.TextBoxFor(m => m.EmailAddress, new
                                           {
                                               @placeholder = Translate.Text("SS_UR_EmailAddressPlaceholder"),
                                               @aria_describedby = "description-for-EmailAddress",
                                               @data_parsley_errors_container = "#description-for-EmailAddress",
                                               @required = "",
                                               @maxlength = "241",
                                               @type = "email",
                                               @data_parsley_required_message = Translate.Text("SS_UR_EmailAddressRequired"),
                                               @class = "form-field__input form-field__input--text",
                                           })
                                            </span>
                                            <div id="description-for-EmailAddress" class="form-field__messages">
                                            </div>
                                        </div>
                                        @*<div class="form-field__button form-field_verification-button email-verify">
                                                <span class="button button--primary">@Translate.Text("SS_UR_Verify")</span>
                                            </div>*@
                                    </div>
                                </fieldset>
                                <fieldset class="fieldset mt24 onlyAddress">
                                    <legend class="fieldset_legend-title">@Translate.Text("SS_UR_AddressDetailsCompany")</legend>


                                    <div class="form-field form-field--text">
                                        <label for="Street" class="form-field__label">
                                            @Translate.Text("SS_UR_Street")&nbsp;(@Translate.Text("optional"))
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            @Html.TextBoxFor(m => m.Street, new
                                       {
                                           @placeholder = @Translate.Text("SS_UR_StreetPlaceholder"),
                                           @aria_describedby = "description-for-Street",
                                           @maxlength = "60",
                                           @data_parsley_errors_container = "#description-for-Street",
                                           @data_parsley_required_message = @Translate.Text("SS_UR_StreetRequired"),
                                           @class = "form-field__input form-field__input--text",
                                       })
                                        </span>
                                        <div id="description-for-Street" class="form-field__messages"></div>
                                    </div>
                                    <div class="form-field form-field--select form-field--select-single">
                                        <label for="form-field-Countrykey" class="form-field__label">
                                            @Translate.Text("SS_UR_Country")
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                            @Html.DropDownListFor(model => model.Countrykey, Model.CountryList, Translate.Text("defaultSelect"), new
                                       {
                                           @class = "form-field__input form-field__input--select form-field__input--select-full",
                                           @id = "form-field-Countrykey",
                                           @required = "required",
                                           @disabled = "true",
                                           @data_parsley_required_message = Translate.Text("SS_UR_CountryRequired"),
                                           @data_parsley_errors_container = "#description-for-Countrykey",
                                           @aria_describedby = "description-for-Countrykey",

                                       })
                                        </span>
                                        <div id="description-for-Countrykey" class="form-field__messages">

                                        </div>

                                    </div>
                                    @if (Model.Countrykey == "AE")
                                        {
                                    <div class="form-field form-field--select form-field--select-single  form-field--6 uae">
                                        <label for="form-field-Region" class="form-field__label">
                                            @Translate.Text("SS_UR_Emirate")&nbsp;(@Translate.Text("optional"))
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--validated">
                                            @Html.DropDownListFor(model => model.City, Model.RegionList, new
                                       {
                                           @class = "form-field__input form-field__input--select form-field__input--select-full",
                                           @id = "form-field-Region",
                                           @data_parsley_required_message = Translate.Text("SS_UR_RegionRequired"),
                                           @data_parsley_errors_container = "#description-for-Region",
                                           @aria_describedby = "description-for-Region",

                                       })
                                        </span>
                                        <div id="description-for-Region" class="form-field__messages">

                                        </div>
                                    </div>
                                    <div class="form-field form-field--text form-field--6 poboxx">
                                        <label for="POBox" class="form-field__label">
                                            @Translate.Text("SS_UR_POBox")&nbsp;(@Translate.Text("optional"))
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            <input class="form-field__input form-field__input--text"
                                                   id="POBox"
                                                   name="POBox"
                                                   maxlength="10"
                                                   value="@Model.POBox"
                                                   type="tel"
                                                   data-input-numbers
                                                   placeholder="@Translate.Text("SS_UR_POBoxPlaceholder")"
                                                   aria-describedby="description-for-POBox"
                                                   data-parsley-errors-container="#description-for-POBox"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_POBoxRequired")">
                                        </span>
                                        <div id="description-for-POBox" class="form-field__messages"></div>
                                    </div>
                                        }
                                        else
                                        {
                                    <div class="form-field form-field--text _city">
                                        <label for="ActualCity" class="form-field__label">
                                            @Translate.Text("SS_UR_City")&nbsp;(@Translate.Text("optional"))
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            <input class="form-field__input form-field__input--text"
                                                   id="ActualCity"
                                                   name="ActualCity"
                                                   type="text"
                                                   maxlength="40"
                                                   placeholder="@Translate.Text("SS_UR_City")"
                                                   aria-describedby="description-for-ActualCity"
                                                   data-parsley-errors-container="#description-for-ActualCity"
                                                   asp-for="@Model.ActualCity"
                                                   value="@Model.City"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_CityRequired")">
                                        </span>
                                        <div id="description-for-ActualCity" class="form-field__messages"></div>
                                    </div>
                                    <div class="form-field form-field--text poboxx">
                                        <label for="POBox" class="form-field__label">
                                            @Translate.Text("SS_UR_POBox")&nbsp;(@Translate.Text("optional"))
                                            <span class="form-field__label-required aria-only">(required)</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            <input class="form-field__input form-field__input--text"
                                                   id="POBox"
                                                   name="POBox"
                                                   maxlength="10"
                                                   value="@Model.POBox"
                                                   type="tel"
                                                   data-input-numbers
                                                   placeholder="@Translate.Text("SS_UR_POBoxPlaceholder")"
                                                   aria-describedby="description-for-POBox"
                                                   data-parsley-errors-container="#description-for-POBox"
                                                   data-parsley-required-message="@Translate.Text("SS_UR_POBoxRequired")">
                                        </span>
                                        <div id="description-for-POBox" class="form-field__messages"></div>
                                    </div>
                                        }
                                </fieldset>
                                <fieldset class="fieldset mt24 onlyAddress">
                                    <legend class="fieldset_legend-title hidden uTradeLicense">@Translate.Text("SS_UR_Attachments")</legend>
                                    <div class="form-field form-field--upload form-field--upload_new form-field--upload_new--variant hidden uTradeLicense">
                                        <div class="form-field__input-wrapper">
                                            <div class="form-field__uploader-details">
                                                <label for="form-field-TradeLicense" class="form-field__label">
                                                    @Translate.Text("SS_UR_TradeLicense")
                                                </label>
                                                <div>
                                                    <label>
                                                        <input class="form-field__input form-field__input--upload" id="form-field-TradeLicense" name="TradeLicenseAttachment"
                                                               type="file" aria-describedby="description-for-TradeLicense"
                                                               data-parsley-errors-container="#description-for-TradeLicense"
                                                               data-parsley-required-message="This field is required" data-uploader-field="TradeLicense"
                                                               accept="application/pdf, image/*"
                                                               data-accepts="&quot;jpg&quot;,&quot;png&quot;,&quot;jpeg&quot;,&quot;pdf&quot;"
                                                               data-size="2048000" data-parsley-trigger="focusout" data-parsley-id="26">
                                                        <span class="button button--upload--variant focus-enabled"
                                                              data-uploader-button="upload-choose"> @Translate.Text("SS_UR_Upload your File")</span>
                                                        </label>
                                                    </div>
                                                    <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">
                                                        Upload format is not correct
                                                    </p>
                                                    <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">
                                                        Upload file size is too high
                                                    </p>
                                                    <div class="form-field--upload_new-details">
                                                        <div class="form-field__input--upload-filetype" data-uploader-filetype="TradeLicense">

                                                        </div>
                                                        <div>
                                                            <p class="form-field__input--upload-filename" data-uploader-filename="TradeLicense"></p>
                                                            <div class="form-field__input--upload-filesize hidden" data-uploader-filesize="TradeLicense">
                                                                <span data-totalsize="TradeLicense"></span>@Translate.Text("SS_KB")
                                                            </div>
                                                        </div>
                                                        <button class="button--upload_remove hidden" data-uploader-remove="TradeLicense">
                                                            <span class="aria-only">@Translate.Text("Remove")</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="description-for-TradeLicense" class="form-field__messages">
                                                <p class="form-field__description">@Translate.Text("SS_FileUploaderNote_New")</p>
                                            </div>
                                        </div>
                                        <div class="form-field form-field--upload form-field--upload_new form-field--upload_new--variant hidden">
                                            <div class="form-field__input-wrapper">
                                                <div class="form-field__uploader-details">
                                                    <label for="form-field-EmiratesIDU" class="form-field__label">
                                                        @Translate.Text("SS_UR_EmiratesID")
                                                    </label>
                                                    <div>
                                                        <label>
                                                            <input class="form-field__input form-field__input--upload" id="form-field-EmiratesIDU" name="EIDAttachment"
                                                                   type="file" aria-describedby="description-for-EmiratesIDU"
                                                                   data-parsley-errors-container="#description-for-EmiratesIDU" required=""
                                                                   data-parsley-required-message="This field is required" data-uploader-field="EmiratesIDU"
                                                                   accept="application/pdf, image/*"
                                                                   data-accepts="&quot;jpg&quot;,&quot;png&quot;,&quot;jpeg&quot;,&quot;pdf&quot;"
                                                                   data-size="2048000" data-parsley-trigger="focusout" data-parsley-id="26">
                                                            <span class="button button--upload--variant focus-enabled"
                                                                  data-uploader-button="upload-choose"> @Translate.Text("SS_UR_Upload your File")</span>
                                                            </label>
                                                        </div>
                                                        <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">
                                                            Upload format is not correct
                                                        </p>
                                                        <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">
                                                            Upload file size is too high
                                                        </p>
                                                        <div class="form-field--upload_new-details">
                                                            <div class="form-field__input--upload-filetype" data-uploader-filetype="EmiratesIDU">

                                                            </div>
                                                            <div>
                                                                <p class="form-field__input--upload-filename" data-uploader-filename="EmiratesIDU"></p>
                                                                <div class="form-field__input--upload-filesize hidden" data-uploader-filesize="EmiratesIDU">
                                                                    <span data-totalsize="EmiratesIDU"></span>@Translate.Text("SS_KB")
                                                                </div>
                                                            </div>
                                                            <button class="button--upload_remove hidden" data-uploader-remove="EmiratesIDU">
                                                                <span class="aria-only">@Translate.Text("Remove")</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="description-for-EmiratesIDU" class="form-field__messages">
                                                    <p class="form-field__description">@Translate.Text("SS_FileUploaderNote_New")</p>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="form-field__button mt24">
                                        @*<button type="submit" class="button button--primary button--fullwidth-mobile">Next</button>*@
                                        <button id="btnConfirm" type="submit" class="button button--primary button--fullwidth-mobile hidden" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Submit")</button>
                                        <div class="button button--primary button--fullwidth-mobile email-verify">@Translate.Text("cust.update.information.button")</div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    }
        </div>
    </div>
</div>
<!--OTP verification Modal Popup-->
<div class="m39-modal m39-modal--profile m39-modal--nofocus" data-component="m39-modal" id="modal_true">
    <button data-trigger="true" class="m39-modal__trigger optpopuptrigger hidden">OTP Trigger</button>
    <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="false">
        <div class="m39-modal__dialog otp">
            <div class="m39-modal__header">
                <button data-close="true" class="m39-modal__button--close">
                    <span class="aria-only">@Translate.Text("Close")</span>
                </button>
            </div>
            <div class="m39-modal__content flex-center">
                <div class="otp--modalcontent">
                    <div class="otp_inputdisplay_screen hidden">
                        <img class="otp_chatcheck hidden" src="/images/chatcheck.png">
                        <img class="otp_mailcheck hidden" src="/images/mailcheck.png">
                        <div class="otp--modalcontent-title">
                            <span class="otp-title"></span>
                        </div>
                        <div class="otp--modalcontent-details">
                            <span class="otp_inputdisplay_screen_error red">
                            </span>
                        </div>
                        <div class="otp--modalcontent-text hidden">
                            @Html.Raw(Translate.Text("cust.care.info.note"))
                        </div>
                    </div>
                    <div class="otpselectionoption hidden">
                        <form class="mt24 " data-form>
                            <div class="form-field">
                                <span>@Translate.Text("refund.VerifyOtpSubtitle")</span>
                                <fieldset class="fieldset">
                                    <legend class="form-field__label">
                                        <span class="form-field__label-required aria-only">.</span>
                                    </legend>
                                    <div class=" grid__column grid__column--12  grid__column--form align_left mt24 mb24">
                                        <p class="form-field__radio hidden displayEmail">
                                            <label>
                                                <input class="form-field__input form-field__input--radio otp_diplay_input" id="otp_diplay_input_1" data-stype="e" name="otp_diplay_input" type="radio" aria-describedby="description-for-maskedvalue" data-parsley-errors-container="#description-for-maskedvalue" data-parsley-multiple="j113_radio" data-parsley-id="26">
                                                <span class="form-field__fakeradio focus-enabled emailSpan">

                                                </span>
                                                <br>
                                            </label>
                                        </p>
                                        <p class="form-field__radio hidden displayMobile">
                                            <label>
                                                <input class="form-field__input form-field__input--radio otp_diplay_input" id="otp_diplay_input_2" data-stype="m" name="otp_diplay_input" type="radio" aria-describedby="description-for-maskedvalue" data-parsley-errors-container="#description-for-maskedvalue" data-parsley-multiple="j113_radio" data-parsley-id="26">
                                                <span dir="ltr" class="form-field__fakeradio focus-enabled mobileSpan">

                                                </span>
                                                <br>
                                            </label>
                                        </p>
                                    </div>
                                    <div id="description-for-radio-maskedvalue" class="form-field__messages">
                                    </div>
                                </fieldset>

                                <div class="form-field">
                                    <a href="javascript:void(0)" class="button button--primary mt0 btn-SendOtp">@Translate.Text("cust.SendOTP")</a>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="otp_input_screen hidden">
                        <img class="otp_chatcheck hidden" src="/images/chatcheck.png">
                        <img class="otp_mailcheck hidden" src="/images/mailcheck.png">
                        <div class="otp--modalcontent-title">
                            <span class="otp-title"></span>
                        </div>
                        <div class="otp--modalcontent-details">
                            <span class="otp-message"></span>
                        </div>

                        <form class="mt24 input-otp-textbox" data-form>
                            <div class="form-field form-field--otp centered">
                                <span class="form-field__input-wrapper_otp">
                                    <input class="form-field__input form-field__input--otp"
                                           id="form-field-otpnumber" name="text" type="number"
                                           aria-describedby="description-for-otpnumber"
                                           data-parsley-maxnumber="1"
                                           data-parsley-errors-container="#description-for-mobiotpnumber"
                                           required="" autofocus=""
                                           data-parsley-required-message="@Translate.Text("cust.required.field")"
                                           data-parsley-trigger="focusout" data-parsley-id="6"
                                           aria-invalid="false">
                                </span>
                                <span class="form-field__input-wrapper_otp">
                                    <input class="form-field__input form-field__input--otp"
                                           id="form-field-otpnumber" name="text" type="number"
                                           aria-describedby="description-for-otpnumber"
                                           data-parsley-maxnumber="1"
                                           data-parsley-errors-container="#description-for-otpnumber"
                                           required="" data-parsley-required-message="@Translate.Text("cust.required.field")"
                                           data-parsley-trigger="focusout" data-parsley-id="8"
                                           aria-invalid="false">
                                </span>
                                <span class="form-field__input-wrapper_otp">
                                    <input class="form-field__input form-field__input--otp"
                                           id="form-field-otpnumber" name="text" type="number"
                                           aria-describedby="description-for-otpnumber"
                                           data-parsley-maxnumber="1"
                                           data-parsley-errors-container="#description-for-otpnumber"
                                           required="" data-parsley-required-message="@Translate.Text("cust.required.field")"
                                           data-parsley-trigger="focusout" data-parsley-id="10"
                                           aria-invalid="false">
                                </span>
                                <span class="form-field__input-wrapper_otp">
                                    <input class="form-field__input form-field__input--otp"
                                           id="form-field-otpnumber" name="text" type="number"
                                           aria-describedby="description-for-otpnumber"
                                           data-parsley-maxnumber="1"
                                           data-parsley-errors-container="#description-for-otpnumber"
                                           required="" data-parsley-required-message="@Translate.Text("cust.required.field")"
                                           data-parsley-trigger="focusout" data-parsley-id="12"
                                           aria-invalid="false">
                                </span>
                                <span class="form-field__input-wrapper_otp">
                                    <input class="form-field__input form-field__input--otp"
                                           id="form-field-otpnumber" name="text" type="number"
                                           aria-describedby="description-for-otpnumber"
                                           data-parsley-maxnumber="1"
                                           data-parsley-errors-container="#description-for-otpnumber"
                                           required="" data-parsley-required-message="@Translate.Text("cust.required.field")"
                                           data-parsley-trigger="focusout" data-parsley-id="14"
                                           aria-invalid="false">
                                </span>
                                <span class="form-field__input-wrapper_otp">
                                    <input class="form-field__input form-field__input--otp"
                                           id="form-field-otpnumber" name="text" type="number"
                                           aria-describedby="description-for-otpnumber"
                                           data-parsley-maxnumber="1"
                                           data-parsley-errors-container="#description-for-otpnumber"
                                           required="" data-parsley-required-message="@Translate.Text("cust.required.field")"
                                           data-parsley-trigger="focusout" data-parsley-id="16"
                                           aria-invalid="false">
                                </span>
                                <input class="form-field__input form-field__input--otp_main"
                                       id="form-field-otpnumbermain" name="text" type="number"
                                       aria-describedby="description-for-otpnumber"
                                       data-parsley-maxnumber="6"
                                       data-parsley-errors-container="#description-for-otpnumber"
                                       data-parsley-required-message="@Translate.Text("cust.required.field")"
                                       data-parsley-trigger="focusout" data-parsley-id="33">
                                <div id="description-for-otpnumber" class="form-field__messages"></div>
                            </div>
                            <div class="form-field mt0 otp_inputdisplay_screen_error red hidden">
                            </div>
                            <div class="form-field">
                                <div class="button button--timer timer-button--outline"
                                     data-component="m78-timer" id="timerbutton"
                                     timer-labels="{&quot;before&quot;:&quot;@Translate.Text("cust.resend.button.text")&quot;, &quot;after&quot;:&quot;@Translate.Text("cust.resend.button.text") (&quot;}"
                                     timer-time="{&quot;seconds&quot;:180}">
                                    <span class="m78-timer--button_text">@Translate.Text("cust.send.button.text")</span>
                                    <span class="m78-timer--button_time"></span>
                                </div>
                            </div>
                            <div class="form-field"><span id="notmytext"></span> @Html.Raw(Translate.Text("Contact Customer Care Center"))</div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="m39-modal__overlay"> </div>
</div>
<!--OTP Modal Popup End-->

<script src="~/Scripts/External/nml/form-submit-validate.js"></script>

<script type="text/javascript">


        ///////////////////OTP Verification Script Start//////////////////////////////

    docReady(function () {



        if (!jQuery(".scrapsalemargin").hasClass("mt56")) {

            jQuery(".scrapsalemargin").addClass("mt56");

        }

        jQuery(".m26-page-title").addClass("align_left");

        var _isTradelicenseDoc = '@Model.IsTradeLicenseDocRequired';

        if (_isTradelicenseDoc == 'True')
            $(".uTradeLicense").show();

        var $confirmBtn = jQuery(".email-verify");
        var verifystep = null;
        var emailAdd = '@Model.CompanyEmail'
        var mobileN = '@Model.CompanyMobileNumber';
        var verifyCell = false;
        var verifyEmail = false;
        var _checkEIDA = true;
        var _useOnchange = false;
        var _timer;
        var _timeCounter = 0;
        var _TLlastDate = '@tExpDate';
        var myInterval = null;
        var _checkTL = false;


        function blurChange(e) {
            clearTimeout(blurChange.timeout);
            blurChange.timeout = setTimeout(function () {

                _timer = setInterval(showTLicenseOrExpiry, 300);




            }, 300);
        }

        $('#form-field-TradeLicenseIssuedBy').change(function () {
            var _selAuthority1 = $('#form-field-TradeLicenseIssuedBy').val();
            $('.email-verify').show();
            if (_selAuthority1 == 'OT') {
                $('.authDescription').show();
                $("#form-field-IssuingAuthorityDescription").attr("required", "");
                $('._tlverifydiv').hide();
            }
            else {
                $('.authDescription').hide();
                $("#form-field-IssuingAuthorityDescription").removeAttr("required");

                if (_selAuthority1 == 'DE') {
                    $('._tlverifydiv').show();
                    $('.onlyOrg-2').hide();
                    $('.onlyAddress').hide();
                    $('.email-verify').hide();

                }
                else {
                    $('._tlverifydiv').hide();
                    $('.onlyOrg-2').show();
                    $('.onlyAddress').show();
                }
            }

        });

        $("#TradelicenseNumber").on("change", function () {
            $('._btnVerifyTL').removeAttr('disabled');
            _checkTL = true;
            if ($('#form-field-TradeLicenseIssuedBy').val() == 'DE') {
                $('._tlverifydiv').show();
                $('.onlyOrg-2').hide();
                $('.onlyAddress').hide();
            }
            else {
                $('._tlverifydiv').hide();
                $('.onlyOrg-2').show();
                $('.onlyAddress').show();
            }

        });



        $("#form-field-mzb2dv01m").on("blur", function () {
            if (!_checkTL)
                myInterval = setInterval(TLTimer, 300);


        });

        function TLTimer() {
            if (_TLlastDate != $('#form-field-mzb2dv01m').val()) {
                $('._btnVerifyTL').removeAttr('disabled');
                _checkTL = true;
               // $("#form-field-mzb2dv01mi").val('');
                if ($('#form-field-TradeLicenseIssuedBy').val() == 'DE') {
                    $('._tlverifydiv').show();
                    $('.email-verify').hide();
                    $('.onlyOrg-2').hide();
                    $('.onlyAddress').hide();
                }
                else {
                    $('._tlverifydiv').hide();
                    $('.email-verify').show();
                    $('.onlyOrg-2').show();
                    $('.onlyAddress').show();
                }

                clearInterval(myInterval);
            }
        }

        $('._btnVerifyTL').click(function () {
            $('.email-verify').show();
            $('.error-html').hide();
            if (_checkTL) {
                var error1 = 0;
                $('.onlyAddress').hide();
                $('.onlyOrg-2').hide();
                $("#ScrapSaleRegistrationFrom").find('.form-field__input').not(':hidden').each(function () {

                    jQuery(this).parsley().validate();

                    if (!jQuery(this).parsley().isValid()) {
                        error1++;
                    }
                });
                if (error1 == 0) {
                    // $('#FirstName').val('');


                    FetchTradeLicense(GetTradeLicenseData(), function (rdata) {
                        $(".m66-preloader-fullpage").fadeOut();
                        $('.onlyAddress').show();
                        $('.onlyOrg-2').show();

                        $('._btnVerifyTL').attr('disabled', 'disabled');
                        _checkTL = false;

                        $('.email-verifyDisabled').addClass('email-verify');
                        $('.email-verify').removeClass('email-verifyDisabled');
                        $('.email-verify').removeAttr('disabled');
                        $('.email-verify').show();
                        $('#form-field-mzb2dv01mi').removeAttr('tabindex');
                        $('#form-field-mzb2dv01mi').css("pointer-events", "auto");
                        $('#form-field-mzb2dv01mi').closest("#datepicker-container-mzb2dv01mi").css("pointer-events", "none");
                        $('#form-field-mzb2dv01mi').val('');

                        if (rdata.status) {
                            if (rdata.data.tradelicensedetails.issuedate != '') {

                                var _issueDate1 = rdata.data.tradelicensedetails.issuedate;


                                   var _isAr = '@isArabicculture';

                                if (_isAr == 'True')
                                    _issueDate1 = _issueDate1.replace("January", "يناير").replace("February", "فبراير").replace("March", "مارس").replace("April", "أبريل").replace("May", "مايو").replace("June", "يونيو").replace("July", "يوليو").replace("August", "أغسطس").replace("September", "سبتمبر").replace("October", "أكتوبر").replace("November", "نوفمبر").replace("December", "ديسمبر");


                                $('#form-field-mzb2dv01mi').val(_issueDate1);

                            }


                            if (rdata.data.tradelicensedetails.issuedateflag == 'N') {
                                $('#form-field-mzb2dv01mi').css("pointer-events", "none");
                                $('#form-field-mzb2dv01mi').closest("#datepicker-container-mzb2dv01mi").css("pointer-events", "none");
                                $('#form-field-mzb2dv01mi').attr('tabindex', '-1');
                            }
                            else if (rdata.data.tradelicensedetails.issuedateflag == 'E') {
                                $('#form-field-mzb2dv01mi').removeAttr('tabindex');
                                $('#form-field-mzb2dv01mi').css("pointer-events", "auto");
                                $('#form-field-mzb2dv01mi').closest("#datepicker-container-mzb2dv01mi").css("pointer-events", "auto");
                            }


                            if (rdata.data.tradelicensedetails.attachmentflag == 'K')
                                $('#form-field-TradeLicense').removeAttr('required');
                            else if (rdata.data.tradelicensedetails.attachmentflag == 'M')
                                $('#form-field-TradeLicense').attr('required', 'true');

                            if (rdata.data.tradelicensedetails.expirydateflag == 'R') {
                                $('._err').show();
                            }
                            else {
                                $('._err').hide();
                            }


                            //jQuery('#ScrapSaleRegistrationFrom').parsley().validate();

                        }
                        else {

                            $('#form-field-TradeLicense').attr('required', 'true');
                            $('#form-field-mzb2dv01mi').removeAttr('readonly');
                            $('#_erDivMsg').html('');
                            $('.icon--error').show();
                            $('#_erDiv').hide();
                        }


                    });


                }

            }

        });


        function GetTradeLicenseData() {
            var tlnumber = $('#TradelicenseNumber').val(); //fetch trade license number
            var expiry = $('#form-field-mzb2dv01m').val(); //fetch expiry
            var issueauthority = $('#form-field-TradeLicenseIssuedBy').val();
            _TLlastDate = expiry;

            var requestData = {
                tradelicensenumber: tlnumber,
                tlexpirydate: expiry,
                issuingauthority: issueauthority,
                type: 'S',
                mode: 'U'
            }

            return requestData;
        }

        function FetchTradeLicense(requestData, onSuccess) {

            var _postUrl = '@Url.Content("~/api/sitecore/ScrapSale/FetchTradeLicense")';
            requestData = AddCustomForgeryToken(requestData, "#ScrapSaleRegistrationFrom");
            $.ajax({
                url: _postUrl,
                type: 'POST',
                data: requestData,
                beforeSend: function () {
                   // $(".m66-preloader-fullpage").show();
                   show_Load();
                    $('.onlyAddress').hide();
                    $('.onlyInd-2').hide();
                },
                success: onSuccess,
                error: function (er) {
                   // console.log(er);
                    $(".m66-preloader-fullpage").fadeOut();
                },
                complete: function (x) {
                    $(".m66-preloader-fullpage").fadeOut();
                    // console.log(x);
                }
            });
        }

        var _tradenumberflag = $('#TradenumberFlag').val();
        var _issuedateflag = $('#IssuedateFlag').val();
        var _expirydateflag = $('#ExpirydateFlag').val();
        var _attachmentflag = $('#AttachmentFlag').val();
        var _issueauthorityflag = $('#IssueauthorityFlag').val();




        if (_tradenumberflag == 'N')
            $('#TradelicenseNumber').attr('readonly', 'readonly');
        else if(_tradenumberflag == 'E')
            $('#TradelicenseNumber').removeAttr('readonly');

        if (_issuedateflag == 'N') {
            $('#form-field-mzb2dv01mi').css("pointer-events", "none");
            $('#form-field-mzb2dv01mi').attr('tabindex', '-1');
            $('#form-field-mzb2dv01mi').closest("#datepicker-container-mzb2dv01mi").css("pointer-events", "none");
        }
        else if (_issuedateflag == 'E') {
            $('#form-field-mzb2dv01mi').removeAttr('tabindex');
            $('#form-field-mzb2dv01mi').css("pointer-events", "auto");
            $('#form-field-mzb2dv01mi').closest("#datepicker-container-mzb2dv01mi").css("pointer-events", "auto");
        }

        if (_expirydateflag == 'N') {
            $('#form-field-mzb2dv01m').css("pointer-events", "none");
            $('#form-field-mzb2dv01m').attr('tabindex', '-1');
        }
        else if (_expirydateflag == 'E') {
            $('#form-field-mzb2dv01m').removeAttr('tabindex');
            $('#form-field-mzb2dv01m').css("pointer-events", "auto");
        }


        if (_attachmentflag == 'K') {
            $('#form-field-TradeLicense').removeAttr('required');
        }
        else if (_attachmentflag == 'M') {
            $('#form-field-TradeLicense').attr('required', 'true');

        }

        if (_issueauthorityflag == 'N') {
            $('#form-field-TradeLicenseIssuedBy').css("pointer-events", "none");
            $('#form-field-TradeLicenseIssuedBy').attr('tabindex', '-1');
            $('#form-field-IssuingAuthorityDescription').attr('readonly', 'readonly');

        }
        else if (_issueauthorityflag == 'E') {
            $('#form-field-TradeLicenseIssuedBy').removeAttr('tabindex');
            $('#form-field-TradeLicenseIssuedBy').css("pointer-events", "auto");
            $('#form-field-IssuingAuthorityDescription').removeAttr('readonly');
        }



        var isCompany = true;
        if ($('#form-field-radio_1_1').is(':checked')) {

            $('#form-field-mzb2dv01m').on('blur change', blurChange);
            isCompany = true;
        }
        else {
            $('#form-field-IdExpiry').on('blur change', blurChange);
            isCompany = false;
        }

        //eidaExpDate  $('#form-field-IdExpiry').val();


      var isValCng = 0;
      function showTLicenseOrExpiry()
      {
          var dateVal1 = '';
          var compareVal = '';

          if (isCompany) {

              dateVal1 = '@tExpDate';
              compareVal = $('#form-field-mzb2dv01m').val();
          }
          else {
              dateVal1 = '@eidaExpDate';
              compareVal = $('#form-field-IdExpiry').val();
          }

          _timeCounter++;
          isValCng++;
          //console.log('comp' + compareVal);
          //console.log('initial' + dateVal1);
          if (compareVal != dateVal1) {
              if (isCompany) {
                  $(".uTradeLicense").show();

                  if ($('#form-field-TradeLicenseIssuedBy').val() != 'DE') {
                      $('#form-field-TradeLicense').attr('required', 'true');
                  }
                  else {
                      $('#form-field-TradeLicense').removeAttr("required");
                  }
              }
              else {
                  $('._btnVerify').removeAttr('disabled');
                  _checkEIDA = true;
                  $(".showVerify").show();
                  $('.email-verify').attr('disabled', 'disabled');
                  $('.email-verify').addClass('email-verifyDisabled');
                  $('.email-verifyDisabled').removeClass('email-verify');
              }
          }
          else {
              if (isCompany)
                  $(".uTradeLicense").hide();
              else
                  $(".showVerify").hide();
          }

          if (isCompany && $('#form-field-TradeLicenseIssuedBy').val() == 'DE')
              $(".uTradeLicense").show();


			if(_timeCounter>100)
            {
                if (isValCng > 3) {
                    clearTimeout(_timer);
                    isValCng = 0;
                }

			}
      }


        $("#MobileNumber").on("change", function () {
            if (_useOnchange) {
                _useOnchange = false;
                $('#MobileNumber').removeAttr("type", "text");
                $('#MobileNumber').attr("type", "tel");
                $('#MobileNumber').attr("data-input-numbers");
                $('#MobileNumber').attr('data-parsley-pattern', '/^(?:50|51|52|53|54|55|56|57|58|59|52|54|55|56)\u005Cd{7}$/');
                $('#MobileNumber').attr("data-parsley-type", "number");
            }
        });


        $("#EmailAddress").on("change", function () {
            $('#MobileNumber').removeAttr("type", "text");
            $('#EmailAddress').attr("type", "email");

        });



        $('._btnVerify').click(function () {
            if (_checkEIDA) {
                clearTimeout(_timer);
                var error1 = 0;
               //$('.onlyAddress').hide();
                //$('.onlyInd-2').hide();
                $("#ScrapSaleRegistrationFrom").find('.form-field__input').each(function () {

                    jQuery(this).parsley().validate();

                    if (!jQuery(this).parsley().isValid()) {
                        if ($(this).attr('id') == 'EmiratesID' || $(this).attr('id') == 'form-field-IdExpiry')
                            error1++;
                    }
                });
                if (error1 == 0) {

                    FetchEIDA(GetEIDAData(), function (rdata) {
                         $(".m66-preloader-fullpage").fadeOut();
                        //  $('.onlyAddress').show();
                        //  $('.onlyInd-2').show();
                        // $('.email-verify').addClass('email-verifyDisabled');
                        // $('.email-verifyDisabled').removeClass('email-verify');
                        $(".m66-preloader-fullpage").fadeOut();

                        if (rdata.status) {


                            $('#FirstName').val(rdata.data.fullnameen);
                            $('#LastName').val(rdata.data.lastname);

                            if (rdata.data.fullnameen != null && rdata.data.fullnameen != '' && rdata.data.fullnameen != '')
                                $('#FirstName').attr('readonly', 'readonly');
                            else
                                $('#FirstName').removeAttr('readonly');

                            if (rdata.data.lastname != null && rdata.data.lastname != '' && rdata.data.lastname != '')
                                $('#LastName').attr('readonly', 'readonly');
                            else
                                $('#LastName').removeAttr('readonly');



                            if (rdata.data.mobile != null && rdata.data.mobile != '' && rdata.data.mobile.indexOf('*') != -1) {
                                $('#MobileNumber').attr("type", "text");
                                $('#MobileNumber').removeAttr("data-parsley-type");
                                $('#MobileNumber').removeAttr("data-input-numbers");
                                $('#MobileNumber').removeAttr('data-parsley-mobile_number');
                                $('#MobileNumber').removeAttr('data-parsley-pattern');
                                $('#MobileNumber').val(rdata.data.mobile);
                                $('#form-field-IndividualMobCode').val('AE');
                                _useOnchange = true;
                            }
                            else {

                                $('#MobileNumber').removeAttr("type", "text");
                                $('#MobileNumber').attr("type", "tel");
                                $('#MobileNumber').attr("data-input-numbers");
                                $('#MobileNumber').attr("data-parsley-type", "number");
                                $('#MobileNumber').attr('data-parsley-pattern', '/^(?:50|51|52|53|54|55|56|57|58|59|52|54|55|56)\u005Cd{7}$/');
                                $('#MobileNumber').val('');
                                _useOnchange = false;


                            }



                            if (rdata.data.email != null && rdata.data.email != '' && rdata.data.email.indexOf('*') != -1) {
                                $('#EmailAddress').removeAttr("type");
                                $('#EmailAddress').attr("type", "text");
                                $('#EmailAddress').val(rdata.data.email);

                            }
                            else {
                                $('#EmailAddress').removeAttr("type");
                                $('#EmailAddress').attr("type", "email");
                                $('#EmailAddress').val('');


                            }





                            // $('#form-field-EmiratesIDU').removeAttr('required');
                            $('._btnVerify').attr('disabled', 'disabled');

                            _checkEIDA = false;
                            $('.email-verifyDisabled').addClass('email-verify');
                            $('.email-verify').removeClass('email-verifyDisabled');
                            $('.email-verify').removeAttr('disabled');

                            $('._err').hide();

                            jQuery('#ScrapSaleRegistrationFrom').parsley().validate();

                        }
                        else {

                            $('._err').show();
                            // $('#form-field-EmiratesIDU').Attr('required', "true");
                            $('.email-verify').attr('disabled', 'disabled');
                            $('.email-verify').addClass('email-verifyDisabled');
                            $('.email-verifyDisabled').removeClass('email-verify');
                        }


                        $("#ScrapSaleRegistrationFrom").find('.form-field__input').each(function () {

                            if ($(this).attr('id') != 'EmiratesID' && $(this).attr('id') != 'form-field-IdExpiry') {

                                jQuery(this).parsley().reset();

                            }
                        });


                    });


                }
            }


        });


        function GetEIDAData() {
            var eida = $('#EmiratesID').val(); //fetch eida
            var expiry = $('#form-field-IdExpiry').val(); //fetch expiry
            _lastDate = expiry;

            var requestData = {
                emiratesid: eida,
                emiratesexpirydate: expiry
            }

            return requestData;
        }

        function FetchEIDA(requestData, onSuccess) {

            var _postUrl = '@Url.Content("~/api/sitecore/ScrapSale/FetchEIDA")';
            requestData = AddCustomForgeryToken(requestData, "#ScrapSaleRegistrationFrom");
            $.ajax({
                url: _postUrl,
                type: 'POST',
                data: requestData,
                beforeSend: function () {
                    //$(".m66-preloader-fullpage").show();
                   show_Load();
                    //$('.onlyAddress').hide();
                    //$('.onlyInd-2').hide();
                },
                success: onSuccess,
                error: function (er) {
                    //console.log(er);
                     $(".m66-preloader-fullpage").fadeOut();
                },
                complete: function (x) {
                    $(".m66-preloader-fullpage").fadeOut();
                    // console.log(x);
                }
            });
        }



        $(".rButton").change(function () {
            switch ($(this).val()) {
                case 'O':
                    emailAdd = '@Model.CompanyEmail';
                    mobileN = '@Model.CompanyMobileNumber';
                    break;
                case 'I':
                    emailAdd = '@Model.EmailAddress';
                    mobileN = '@Model.MobileNumber';
                    break;
            }
        });


        $("#form-field-CompanyTelCode").change(function () {

            $('#form-field-xd3qt0c4q').val('');
            $('#form-field-Extention').val('');

            validateNums('#form-field-CompanyTelCode', '#form-field-xd3qt0c4q');


        });

        $("#form-field-IndividualTelCode").change(function () {

            $('#form-field-xd4qt0c4q').val('');
            $('#form-field-uj0dpkni543').val('');

            validateNums('#form-field-IndividualTelCode', '#form-field-xd4qt0c4q');


        });

        $("#form-field-CompanyMobCode").change(function () {

            $('#CompanyMobileNumber').val('');
            validateNums('#form-field-CompanyMobCode', '#CompanyMobileNumber');

        });

        $("#form-field-IndividualMobCode").change(function () {
            $('#MobileNumber').val('');
            validateNums('#form-field-IndividualMobCode', '#MobileNumber');

        });

        function truncateVal(target, len) {
            if (target.val().length >= len) {
                window.setTimeout(function () {
                    target.val(target.val().substring(0, (len)));
                }, 5);
            }
        }

        function queuePasteEvent(el, type, param) {

            pasteQueue[type] = param || true;

            if (!pasteRunner) {
                pasteRunner = window.setTimeout(function () {
                    var value = el.val();

                    if (typeof pasteQueue.truncate === 'number') {
                        value = truncatePaste(value, param);
                    }

                    el.val(value);

                    resetPasteQueue();
                }, 20);
            }
        }

        function validateNums(_prefix, _finput) {
            var $prefix = jQuery(_prefix);
            var $finput = jQuery(_finput);
            try {
            if ($prefix.val() == 'AE') {

                if ($finput.attr('data-parsley-telephonenumber') == 'true') {

                    $finput.attr('data-parsley-pattern', '/^(?:2|3|4|6|7|9)\u005Cd{7}$/');

                    $finput.attr('maxlength', '8');

                    $finput.off('keypress.int').on('keypress.int', function () {

                        truncateVal($(this), 8)

                    });

                    $finput.off('paste.int').on('paste.int', function () {

                        queuePasteEvent($(this), 'truncate', 8);

                    });

                } else {

                    $finput.attr('data-parsley-pattern', '/^(?:50|51|52|53|54|55|56|57|58|59|52|54|55|56)\u005Cd{7}$/');

                    $finput.attr('maxlength', '9');

                    $finput.off('keypress.int').on('keypress.int', function () {

                        truncateVal($(this), 9)

                    });

                    $finput.off('paste.int').on('paste.int', function () {

                        queuePasteEvent($(this), 'truncate', 9);

                    });

                }

            } else {

                $finput.attr('data-parsley-pattern', '/\u005Cd/');

                $finput.attr('maxlength', '10');

                $finput.off('keypress.int');

                $finput.off('paste.int');

            };


                $finput.parsley().validate();
            }
            catch (e) { }


        }




        var isExternalMobileNumber = false;


        function sendOTPs() {
            isExternalMobileNumber = false;


            if ($('#form-field-radio_1_1').is(':checked')) {

                emailAdd = $('#form-field-CompanyEmail').val();
                mobileN = $('#CompanyMobileNumber').val();

                if ($('#form-field-CompanyMobCode').val() != 'AE')
                    isExternalMobileNumber = true;

            }
            else {
                emailAdd = $('#EmailAddress').val();
                mobileN = $('#MobileNumber').val();

                if ($('#form-field-IndividualMobCode').val() != 'AE')
                    isExternalMobileNumber = true;

            }


            verifystep = null;
            $("#OtpRequestId").val('');
            $(".otp_inputdisplay_screen_error").html('');
            $(".otp_inputdisplay_screen_error").hide();
            $('input[name="otp_diplay_input"]').prop('checked', false);
            $(".otp-title").html('');
            $(".otp-message").html('');
            $(".otp-message").removeClass("red");

            if (verifyEmail) {
                CrudOtp(GetReadRequestData(emailAdd, null), function (rdata) {

                    var title = '@Html.Raw(Translate.Text("cust.email.otp.screen.title"))';
                    var msg = '@Html.Raw(Translate.Text("cust.email.otp.screen.msg"))';
                    $(".m66-preloader-fullpage").fadeOut();
                    $(".otp_inputdisplay_screen").hide();
                    //$(".otp--modalcontent-text").hide();
                    $(".otp-title").html(title);
                    $(".otp_mailcheck").show();
                    $(".otp_chatcheck").hide();
                    $("#notmytext").html('@Translate.Text("cust.not.my.emailaddress")');
                    if (rdata.status) {
                       // console.log(rdata);
                        $(".otp-message").html(msg.replace("{0}", emailAdd));
                        $("#OtpRequestId").val(rdata.data.referencenumber);
                        $(".otp_input_screen").show();
                        $(".otp_inputdisplay_screen_error").hide();

                        resetTimer();
                        $(".optpopuptrigger").trigger('click');
                    }
                    else {
                        $(".optpopuptrigger").trigger('click');
                        $(".otp_input_screen").hide();
                        $(".otp_inputdisplay_screen").show();
                        $(".otp_inputdisplay_screen_error").show();
                        //$(".otp--modalcontent-text").show();
                        $(".otp_inputdisplay_screen_error").html(rdata.desc);
                    }
                });
            }
            else if (verifyCell && !verifyEmail && !isExternalMobileNumber) {
                verifystep = 1;
                CrudOtp(GetReadRequestData(null, mobileN), function (rsdata) {
                    var title = '@Html.Raw(Translate.Text("cust.mobile.otp.screen.title"))';
                    var msg = '@Html.Raw(Translate.Text("cust.mobile.otp.screen.msg"))';
                    $(".m66-preloader-fullpage").fadeOut();
                    $(".otp_inputdisplay_screen").hide();
                    //$(".otp--modalcontent-text").hide();
                    $(".otp-title").html(title);
                    $("#notmytext").html('@Translate.Text("cust.not.my.mobilenumber")');
                    if (rsdata.status) {
                        $(".otp_chatcheck").show();
                        $(".otp_mailcheck").hide();

                        $(".otp-message").html(msg.replace("{0}", mobileN));
                        $("#OtpRequestId").val(rsdata.data.referencenumber);
                        $(".otp_input_screen").show();
                        $(".otp_inputdisplay_screen_error").hide();
                        $(".otp_inputdisplay_screen_success").show();

                        resetTimer();
                        $(".optpopuptrigger").trigger('click');
                    }
                    else {
                        $(".optpopuptrigger").trigger('click');
                        $(".otp_input_screen").hide();
                        $(".otp_inputdisplay_screen").show();
                        $(".otp_inputdisplay_screen_error").show();
                        $(".otp_inputdisplay_screen_success").hide();
                        //$(".otp--modalcontent-text").show();
                        $(".otp_inputdisplay_screen_error").html(rsdata.desc);
                    }
                });

            }
            else {
                jQuery('#ScrapSaleRegistrationFrom').submit();
                $("#btnConfirm").html('@Translate.Text("Submitting")...');
                $("#btnConfirm").attr('disabled', true);
                $('.email-verify').hide();
                $("#btnConfirm").show();
                //$(".m66-preloader-fullpage").show();
               show_Load();
            }
        }

        function GetReadRequestData(pEmail, pMobile) {
            var mobile = pMobile;
            var email = pEmail;
            var otp = '';
            var prtype = "NONB";
            var _eida = '';
            var _bpcat = '';

             if ($('#form-field-radio_1_1').is(':checked')) {
                 _bpcat = 'O';
             }
             else {
                 _bpcat = 'I';
                 _eida = $('#EmiratesID').val();
             }

            if (email != null) {
                $('.displayMobile').hide();
                $('.displayEmail').show();
                $('.emailSpan').html(email);
                $('#otp_diplay_input_1').val(email);
            }

            if (mobile != null) {
                $('.displayEmail').hide();
                $('.displayMobile').show();
                $('.mobileSpan').html(mobile);
                $('#otp_diplay_input_2').val(mobile);
            }


            var requestData = {
                mobile: mobile,
                email: email,
                option: '',
                Otp: otp,
                prtype: prtype,
                emiratesId: _eida,
                bpcategory: _bpcat
            }
            requestData.mode = "S";
            if (verifystep != null)
                requestData.reqId = jQuery("#OtpRequestId").val();
            return requestData;
        }
        function fnVerifyOtpData(otp) {

            var requestData = GetReadRequestData();
            if (verifystep == null) {
                requestData.type = "e";
                requestData.email = emailAdd;
                requestData.mobile = '';
            }
            else if (verifystep == 1) {
                requestData.type = "m";
                requestData.email = '';
                requestData.mobile = mobileN;
            }
            //else {
            //    var selected = $("input[type='radio'][name='otp_diplay_input']:checked");
            //    requestData.type = $(selected).attr("data-stype");
            //}
            requestData.Otp = otp;
            requestData.mode = "V";
            requestData.reqId = jQuery("#OtpRequestId").val()
            return requestData;
        }
        function fnSendOtpRequestData() {
            //var otp = jQuery(".form-field__input--otp_main").val();
            // var requestData = GetReadRequestData();
            var otp = '';
            var prtype = "NONB";
            var mob = null;
            var em = null;
            var _eida = '';
            var _bpcat = '';

              if ($('#form-field-radio_1_1').is(':checked')) {
                  _bpcat = 'O';
              }
              else {
                  _bpcat = 'I';
                  _eida = $('#EmiratesID').val();
              }



            if (verifystep == null)
                em = emailAdd;
            else
                mob = mobileN;

            var requestData = {
                mobile: mob,
                email: em,
                option: '',
                Otp: otp,
                prtype: prtype,
                mode: "S",
                emiratesId: _eida,
                bpcategory: _bpcat

            }

            if (verifystep == null) { requestData.type = "e"; requestData.reqId = ""; }
            else {
                requestData.type = "m";
                requestData.reqId = jQuery("#OtpRequestId").val();
            }
            //}
            requestData.mode = "S";
            return requestData;
        }
        AddCustomForgeryToken = function (data, elementId) {
            data.__RequestVerificationToken = $(elementId + ' input[name=__RequestVerificationToken]').val();
            return data;
        };
        function CrudOtp(requestData, onSuccess) {

            var _postUrl = '@Url.Content("~/api/sitecore/ScrapSale/CrudOtp")';
            requestData = AddCustomForgeryToken(requestData, "#ScrapSaleRegistrationFrom");
            $.ajax({
                url: _postUrl,
                type: 'POST',
                data: requestData,
                beforeSend: function () {
                    $(".m39-modal__button--close").trigger('click');
                    //$(".m66-preloader-fullpage").show();
                    show_Load();
                    $(".otp_inputdisplay_screen").hide();
                    $(".otp_input_screen").hide();
                    $(".otp_inputdisplay_screen_error").hide();
                    $(".otp_inputdisplay_screen_success").hide();
                },
                success: onSuccess,
                error: function (er) {
                    //console.log(er);
                },
                complete: function (x) {
                   // $(".m66-preloader-fullpage").fadeOut();
                   // console.log(x);
                }
            });
        }
        //jQuery(".m39-modal__button--close").on("click", function () {
        //    jQuery('#timerbutton').addClass('stopped');
        //});

         function show_Load() {
          if (jQuery('.m66-preloader-fullpage').length > 1)
          {
              jQuery('.m66-preloader-fullpage').eq(1).show();
          }
          else
          {
              jQuery('.m66-preloader-fullpage').show();
          }
      }

        function resetTimer() {
            $("#otpform").find('.form-field__input--otp').attr('disabled', false);
            $("#otpform").find('.form-field--otp').removeClass('form-field-disabled');
            setTimeout(function () {
                jQuery('.form-field--otp').find('.form-field__input--otp')[0].focus()
            }, 500);
            setTimeout(function () {
                jQuery('.button--timer').trigger('start.timer');
            }, 500);
        }


        setTimeout(function () {
            $(".form-field__input--otp").on('keyup blur', function () {
                var otp = jQuery(".form-field__input--otp_main").val();
                if (otp.length >= 6) {
                    $(".form-field__input--otp").val('');

                    CrudOtp(fnVerifyOtpData(otp), function (rdata) {
                       // $(".m66-preloader-fullpage").fadeOut();
                        if (rdata.status) {
                            $(".otp-message").removeClass("red");
                            $(".otp_input_screen").hide();
                            $(".m39-modal__button--close").trigger('click');
                            if (verifystep == null && verifyCell && !isExternalMobileNumber) {
                                verifystep = 1;
                                CrudOtp(GetReadRequestData(null, mobileN), function (rsdata) {
                                    var title = '@Html.Raw(Translate.Text("cust.mobile.otp.screen.title"))';
                                    var msg = '@Html.Raw(Translate.Text("cust.mobile.otp.screen.msg"))';
                                    $(".m66-preloader-fullpage").fadeOut();
                                    $(".otp_inputdisplay_screen").hide();
                                    //$(".otp--modalcontent-text").hide();
                                    $(".otp-title").html(title);
                                    $("#notmytext").html('@Translate.Text("cust.not.my.mobilenumber")');
                                    if (rsdata.status) {
                                        $(".otp_chatcheck").show();
                                        $(".otp_mailcheck").hide();

                                        $(".otp-message").html(msg.replace("{0}", mobileN));
                                        $("#OtpRequestId").val(rsdata.data.referencenumber);
                                        $(".otp_input_screen").show();
                                        $(".otp_inputdisplay_screen_error").hide();
                                        $(".otp_inputdisplay_screen_success").show();

                                        resetTimer();
                                        $(".optpopuptrigger").trigger('click');
                                    }
                                    else {
                                        $(".optpopuptrigger").trigger('click');
                                        $(".otp_input_screen").hide();
                                        $(".otp_inputdisplay_screen").show();
                                        $(".otp_inputdisplay_screen_error").show();
                                        $(".otp_inputdisplay_screen_success").hide();
                                        //$(".otp--modalcontent-text").show();
                                        $(".otp_inputdisplay_screen_error").html(rsdata.desc);
                                    }
                                });
                            }
                            else {
                                jQuery('#ScrapSaleRegistrationFrom').submit();
                                $("#btnConfirm").html('@Translate.Text("Submitting")...');
                                $("#btnConfirm").attr('disabled', true);
                                $('.email-verify').hide();
                                $("#btnConfirm").show();
                                //$(".m66-preloader-fullpage").show();
                               show_Load();

                            }
                        }
                        else {
                            $(".optpopuptrigger").trigger('click');
                            //$(".otp-message").addClass("red");
                            $(".otp_input_screen").show();
                            $(".otp_inputdisplay_screen_error").show();
                            $(".otp_inputdisplay_screen_success").hide();
                            //$(".otp--modalcontent-text").show();
                            $(".otp_inputdisplay_screen_error").html(rdata.desc);
                        }

                        $(".m66-preloader-fullpage").fadeOut();

                    });
                }
            });
        }, 500);




        jQuery("#timerbutton").on("click", function () {
            if (!jQuery("#timerbutton").hasClass("timer-button--outline")) {
                CrudOtp(fnSendOtpRequestData(), function (rdata) {
                    $(".m66-preloader-fullpage").fadeOut();
                    $(".otp_inputdisplay_screen").hide();

                    if (verifystep == null) {
                        var title = '@Html.Raw(Translate.Text("cust.email.otp.screen.title"))';
                        var msg = '@Html.Raw(Translate.Text("cust.email.otp.screen.msg"))';
                        $(".otp_mailcheck").show();
                        $(".otp_chatcheck").hide();
                        $(".otp-message").html(msg.replace("{0}", emailAdd));
                        $(".otp-title").html(title);
                    }
                    else {
                        var title = '@Html.Raw(Translate.Text("cust.mobile.otp.screen.title"))';
                        var msg = '@Html.Raw(Translate.Text("cust.mobile.otp.screen.msg"))';
                        $(".otp-message").html(msg.replace("{0}", mobileN));
                        $(".otp-title").html(title);
                        $(".otp_mailcheck").hide();
                        $(".otp_chatcheck").show();
                    }

                    if (rdata.status) {
                        $("#OtpRequestId").val(rdata.data.referencenumber);
                        $(".otp-message").removeClass("red");
                        $(".input-otp-textbox").show();
                        $(".otp_input_screen").show();

                        resetTimer();
                        $(".optpopuptrigger").trigger('click');
                    } else {
                        $(".optpopuptrigger").trigger('click');
                        $(".otp_input_screen").hide();
                        $(".otp_inputdisplay_screen").show();
                        $(".otp_inputdisplay_screen_error").show();
                        $(".otp_inputdisplay_screen_error").html(rdata.desc);
                    }
                });
            }
        });



        //////////////////////////////////////////////////////////////////////////////////////////////////////////////

        var uType = '@Model.UserType';
        if (uType == "O" || uType == '') {
            $('.onlyInd').hide();
            $('.onlyOrg').show();

            $('#form-field-radio_1_1').attr('checked', 'checked');
        }
        else {
            $('.onlyOrg').hide();
            $('.onlyInd').show();

            $('#form-field-radio_1_2').attr('checked', 'checked');

        }

        $(".rButton").change(function () {
            switch ($(this).val()) {
                case 'O':
                    //$('.onlyOrg').css('display', 'flex');
                    $('.onlyOrg').show();
                    $('.onlyInd').hide(); //css('display', 'none');


                    break;
                case 'I':
                    //$('.onlyOrg').css('display', 'none');
                    $('.onlyOrg').hide();
                    $('.onlyInd').show(); //css('display', 'block');

                    break;
            }
        });




        if ($('#form-field-radio_1_1').is(':checked')) {

            $('#form-field-radio_1_2').closest('.form-field__radio').addClass('form-field--disabled');

            $('.onlyOrg').show();
            $('.onlyAddress').show();
            $('.onlyInd').hide();
            validateNums('#form-field-CompanyTelCode', '#form-field-xd3qt0c4q');
            validateNums('#form-field-CompanyMobCode', '#CompanyMobileNumber');

            var _selAuthority = $('#form-field-TradeLicenseIssuedBy').val();

            if (_selAuthority == 'OT') {
                $('.authDescription').show();
                $("#form-field-IssuingAuthorityDescription").attr("required", "");
                $('._tlverifydiv').hide();
            }
            else {
                $('.authDescription').hide();
                $("#form-field-IssuingAuthorityDescription").removeAttr("required");

                if (_selAuthority == 'DE') {
                    $('._tlverifydiv').show();
                    $('._btnVerifyTL').attr('disabled', 'disabled');
                    _checkTL = false;
                    //$('.onlyOrg-2').hide();
                }
                else {
                    $('._tlverifydiv').hide();
                    $('.onlyOrg-2').show();
                }
            }

        }
        else {

            $('#form-field-radio_1_1').closest('.form-field__radio').addClass('form-field--disabled');

            $('.onlyOrg').hide();
            $('.onlyOrg-2').hide();
            $('.onlyInd').show(); //css('display', 'block');
            validateNums('#form-field-IndividualTelCode', '#form-field-xd4qt0c4q');
            validateNums('#form-field-IndividualMobCode', '#MobileNumber');
        }









        $(document).on('click', '.email-verify', function (e) {
            //code here ....
            //alert($("#ScrapSaleRegistrationFrom").valid());
            var error = 0;

            $("#ScrapSaleRegistrationFrom").find('.form-field__input').not(':hidden').each(function () {

                ////////enable this after popup is fixed////////////
                jQuery(this).parsley().validate();

                if (!jQuery(this).parsley().isValid()) {
                    error++;
                }
            });

            var firstErrorInput = $('#ScrapSaleRegistrationFrom').find('.parsley-error').first();
            $('html, body').animate({
                scrollTop: firstErrorInput.offset().top - 160
            }, 500);


            if (error == 0) {
                // $(".emailDivT .m39-modal__trigger").click();

                var val1 = '';
                var val2 = '';
                var val3 = '';
                var val4 = '';

                val1 = '@Model.CompanyMobileNumber';
                val2 = $('#CompanyMobileNumber').val();
                val3 = '@Model.MobileNumber';
                val4 = $('#MobileNumber').val();

                if (val1 != val2 || val3 != val4) {

                    verifyCell = true;
                }
                else {

                    verifyCell = false;
                }




                val1 = '@Model.CompanyEmail';
                val2 = $('#form-field-CompanyEmail').val();
                val3 = '@Model.EmailAddress';
                val4 = $('#EmailAddress').val();

                if (val1 != val2 || val3 != val4) {

                    verifyEmail = true;
                }
                else {

                    verifyEmail = false;
                }

                //console.log(verifyEmail);
                //console.log(verifyCell);

                sendOTPs();
            }

            // e.preventDefault();

        });




        $('input[name=UserType]').attr("disabled", true);


        setTimeout(function () {
            window.scrollTo(0, 0);
        }, 200);


    });
















</script>
