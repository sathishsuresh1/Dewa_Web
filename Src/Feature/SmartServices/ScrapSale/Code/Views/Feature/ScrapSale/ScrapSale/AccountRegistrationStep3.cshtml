@using Sitecore.Globalization;
@using DEWAXP.Foundation.Content
@model DEWAXP.Feature.ScrapSale.Models.ScrapSale.AccountRegistrationStep2Model

@{


}
<div class="grid__row">
    <div class="grid__column grid__column--12 grid__column--form">

        @using (Html.BeginRouteForm(Sitecore.Mvc.Configuration.MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form", @id = "AccountRegistrationStep2From", data_form = "true", data_parsley_focus = "none", @data_submit_validate = "enabled", enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
            <input id="ConsumerNo" type="hidden" name="ConsumerNo" value="@Model.ConsumerNo" />
            <input id="MaskedEmail" type="hidden" name="MaskedEmail" value="@Model.MaskedEmail" />
            <input id="MaskedMobile" type="hidden" name="MaskedEmail" value="@Model.MaskedMobile" />
            <input id="SendBY" type="hidden" name="SendBY" value="@Model.SendBY" />
            @*<input id="OtpTrigger" type="hidden" name="OtpTrigger" value="@Model.OtpTrigger" />*@

            <div class="form-field form-field--text">
                <label for="form-field-vbqji1vl1" class="form-field__label form-field__label--readonly">
                    @Html.Raw(Model.SendBY == "e" ? Translate.Text("SS_S2_EmailTitle") : Translate.Text("SS_S2_MobileTitle"))
                </label>
                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                    <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-vbqji1vl1" name="email" type="text" value="@(Model.SendBY == "e" ? Model.MaskedEmail : Model.MaskedMobile)" aria-describedby="description-for-vbqji1vl1" data-parsley-errors-container="#description-for-vbqji1vl1" data-parsley-trigger="focusout">
                </div>
                <div id="description-for-vbqji1vl1" class="form-field__messages">
                </div>
            </div>

            <div class="form-field form-field--text">
                <label for="form-field-OtpNumber" class="form-field__label">
                    @Translate.Text("SS_S2_tile")
                </label>
                <span class="form-field__input-wrapper">
                    <input class="form-field__input form-field__input--text" id="form-field-OtpNumber" name="OtpNumber" type="number" placeholder="Verification Code" aria-describedby="description-for-cd6bpzaqu" data-parsley-errors-container="#description-for-cd6bpzaqu" required="" data-parsley-required-message="This field is required" data-parsley-trigger="focusout" data-parsley-id="18">

                </span>

                <div id="description-for-cd6bpzaqu" class="form-field__messages">
                    <p class="form-field__description">@Translate.Text("SS_S2_SubTitle")</p>
                    <p class="form-field__description"><button type="submit" name="ActionType" value="otp" class="link">@Translate.Text("SS_S2_ResendLinktext")</button></p>
                    @Html.ValidationMessage("OtpNumber")
                </div>
            </div>

            <div class="form-field__button">
                <button type="submit" name="ActionType" value="Next" class="button button--primary button--next button--fullwidth-mobile" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Submit")</button>
            </div>
        }

    </div>
</div>

<script type="text/javascript">

    setTimeout(function () {
        $(".link").on("click", function () {

            $("#form-field-OtpNumber").removeAttr("required");
        });

        $(".button--next").on("click", function () {
            $("#form-field-OtpNumber").attr("required");

        });

    }, 100)
</script>
