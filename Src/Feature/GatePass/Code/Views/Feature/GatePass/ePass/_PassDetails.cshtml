@using Sitecore.Globalization
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using DEWAXP.Foundation.Helpers
@using Glass.Mapper.Sc.Fields
@using System.Linq
@using DEWAXP.Feature.GatePass.Models.ePass
@using DEWAXP.Feature.GatePass.Models.ePass.SubPasses
@using DEWAXP.Foundation.Content
@using Roles = DEWAXP.Foundation.Content.Roles
@model List<DEWAXP.Feature.GatePass.Models.ePass.SecurityPassViewModel>

@if (Model != null && Model.Count > 0)
{
    var mainpass = Model.Where(y => !y.Subpass).FirstOrDefault();
    var holidaypass = Model.Where(y => y.Subpass && y.passType.Equals(EpassHelper.GetDisplayName(SubPassType.Holiday)));
    var nightpass = Model.Where(y => y.Subpass && y.passType.Equals(EpassHelper.GetDisplayName(SubPassType.Night)));
    var devicepass = Model.Where(y => y.Subpass && y.passType.Equals(EpassHelper.GetDisplayName(SubPassType.Device)));
    var materialpass = Model.Where(y => y.Subpass && y.passType.Equals(EpassHelper.GetDisplayName(SubPassType.Material)));
    var viewPassport = "";
    var viewEmirateID = "";
    var viewVisa = "";
    var viewPhoto = "";
    <div class="j113-epass">
        <div class="m66-preloader j113-epass--loader hidden">
            <div class="grid">
                <div class="grid__row">
                    <div class="grid__column grid__column--12">
                        <h2 class="text__section-subtitle">@Translate.Text("Epass.Pleasewait")</h2>
                        <div class="loader"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    if (mainpass != null)
    {
        <div class="j113-epass" data-journey="j113-epass">
            <div class="grid">
                @*@Html.Sitecore().Placeholder("pagetitle")*@
                <div class="grid__row">
                    <div class="grid__column grid__column--12" id="main-skip">
                        <div class="m26-page-title title_message">
                            <div class="m26-page-title__links">
                                <p class="m26-page-title__backlink">
                                    <a class="button button--text button--back" href="@(mainpass.wppass && mainpass.grouppass ? LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_SHOWDETAILS)+"?passNumber="+mainpass.grouppassid : LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_MYPASSESS))">@Translate.Text("Back")</a>
                                </p>
                            </div>
                            <h2 class="text__page-title">@Translate.Text("ePass Details")</h2>
                        </div>
                    </div>
                </div>
                <div class="grid__row mb12">
                    <div class="grid__column grid__column--12  grid__column--form">
                        <div class="grid__column grid__column--12 ">
                            <div class="m10-avatar">
                                <div class="m10-avatar__content">
                                    <form class="hidden" action="#" method="POST" form-skipvalidation="true">
                                        @Html.AntiForgeryToken()
                                    </form>
                                    @if (!string.IsNullOrWhiteSpace(mainpass.profilepic))
                                    {
                                        <img class="m10-avatar__image" alt="" src="data:image/png;base64,@mainpass.profilepic">
                                    }
                                    else
                                    {
                                        <img class="m10-avatar__image" alt="" src="~/images/IdealHome/profile-icon.png">
                                    }
                                    <h2 class="m10-avatar__name">@mainpass.name</h2>
                                    <div class="j113-epass--status @mainpass.strclass.ToLower()">@(!string.IsNullOrWhiteSpace(mainpass.strstatus) ? mainpass.strstatus : " N/A")</div>
                                    <div>
                                        @if ((string)ViewBag.role == Roles.DewaSupplier)
                                        {
                                            if (!mainpass.wppass && (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire))
                                            {
                                                <a href="#" class="button button--primary j113-epass-sharelink" id="Share" data-id="@mainpass.passNumber">@Translate.Text("Epass.Share")</a>
                                            }
                                            else if (mainpass.wppass && !mainpass.grouppass && (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire) && mainpass.enablerenewbutton)
                                            {
                                                <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.WP_PASSRENEWAL)?passNumber=@mainpass.grouppassid" class="button button--primary  button--next" id="Renewal">@Translate.Text("Renewal")</a>
                                            }
                                            else if (mainpass.status == SecurityPassStatus.UnderApprovalinWorkPermit || mainpass.status == SecurityPassStatus.PendingApprovalwithCoordinator || mainpass.status == SecurityPassStatus.PendingApprovalwithSecurity)
                                            {
                                                if (!mainpass.grouppass)
                                                {
                                                    <a href="#" class="button button--primary j113-epass--records_remove icon-cancel" id="Cancel" data-type="@(mainpass.wppass ? "workpermit" : "")" data-groupid="@mainpass.grouppassid" data-id="@mainpass.passNumber">@Translate.Text("Epass.Cancel")</a>
                                                }
                                            }
                                            if (mainpass.wppass && mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire)
                                            {
                                                <a href="#" class="button button--primary" id="DownloadPass" data-groupid="@mainpass.grouppassid" data-id="@mainpass.passNumber">@Translate.Text("Epass.Download")</a>
                                                <script type="text/javascript" language="javascript">
                                                    $("#DownloadPass").click(function () {
                                                        var passno = $(this).data('id')
                                                        var grouppassnumber = $(this).data('groupid')
                                                        var win = window.open("/api/sitecore/WorkPermit/WPPassDownload?passnumber=" + passno + "&grouppassnumber=" + grouppassnumber, '_blank');
                                                        win.focus();
                                                    });
                                                </script>
                                            }
                                        }
                                        @if (!mainpass.wppass && mainpass.status == SecurityPassStatus.Rejected)
                                        {
                                            <a class="button button--primary" href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@mainpass.passNumber">@Translate.Text("Epass.Edit")</a>
                                        }
                                    </div>
                                </div>
                            </div>
                            @Html.Partial("~/Views/Feature/GatePass/ePass/Module/_SharePasses.cshtml")
                            @Html.Partial("~/Views/Feature/GatePass/ePass/Module/_CancelPasses.cshtml")
                            @*<div id="my_idmodal">
                                    <div class="m39-modal m39-modal--new" data-component="m39-modal" id="editlocation_modal_true" data-labels='{"approve":"Approve"}'>
                                        <button data-trigger="true" class="m39-modal__trigger" type="button" id="_8gguopjrg_trigger" aria-controls="_8gguopjrg_content"></button>
                                        <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="true" id="_8gguopjrg_content" aria-labelledby="_8gguopjrg_trigger">
                                            <div class="m39-modal__dialog" id="ApproverForm">

                                                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form", @id = "form-pendingrequest", data_form = "true", enctype = "multipart/form-data" }))
                                                {
                                                    @Html.AntiForgeryToken()
                                                    <div class="m39-modal__header">
                                                        <div class="m39-modal__title">
                                                            @Translate.Text("Edit location")
                                                        </div>
                                                        <a data-close="true" id="btnclose" class="m39-modal__button--close">
                                                            @Translate.Text("Epass.Close")
                                                        </a>
                                                    </div>
                                                    <div class="m39-modal__content">
                                                        <div class="grid__row mb0">
                                                            <div class="grid__column grid__column--12 mb24">
                                                                <div id="description-for-success" class="form-field__messages clear_both red">
                                                                </div>
                                                            </div>
                                                            <div class="grid__column grid__column--12 mb24">
                                                                <div class="form-field form-field--select form-field--select-single">
                                                                    <label for="form-field-selectedlocations" class="form-field__label">
                                                                        @Translate.Text("Epass.Location")
                                                                    </label>
                                                                    <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--select2">
                                                                        <select class="form-field__input form-field__input--select form-field__input--select-full form-field__input--select2"
                                                                                id="form-field-selectedlocations"
                                                                                name="SelectedLocation"
                                                                                multiple="multiple"
                                                                                required=""
                                                                                aria-describedby="description-for-ma7826si2"
                                                                                data-parsley-errors-container="#description-for-ma7826si2"
                                                                                data-placeholder="@Translate.Text("Epass.SelectLocation")"
                                                                                data-parsley-required-message="@Translate.Text("Epass.SelectLocation")">
                                                                            @if (ViewBag.LocationList != null)
                                                                            {
                                                                                foreach (var item in (IEnumerable<SelectListItem>)ViewBag.LocationList)
                                                                                {
                                                                                    <option value="@item.Value" @(mainpass.SeletecedLocation != null && mainpass.SeletecedLocation.Contains(item.Value) ? "selected" : string.Empty)>@item.Text</option>

                                                                                }
                                                                            }
                                                                        </select>
                                                                    </span>
                                                                    <div id="description-for-ma7826si2" class="form-field__messages">
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="m39-modal__footer">
                                                        <button class="button button--primary" id="btnConfirmEditLocation" data-accountupdate="true" type="button" data-modal-confirm="true">@Translate.Text("Epass.Confirm")</button>
                                                    </div>
                                                }

                                            </div>
                                        </div>
                                        <div class="m39-modal__overlay"> </div>
                                    </div>
                                </div>*@
                            <div class="m39-modal j113-epass_modal--confirm" data-component="m39-modal" id="editlocationmodal">
                                <button data-trigger="true" class="m39-modal__trigger hidden" type="button" id="editlocationmodal_trigger" aria-controls="editlocationmodal_content"></button>
                                <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="false" id="editlocationmodal_content" aria-labelledby="editlocationmodal_trigger">
                                    <div class="m39-modal__dialog">
                                        @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form", @id = "form-successmessage", data_form = "true", enctype = "multipart/form-data" }))
                                        {
                                            @*@Html.AntiForgeryToken()*@
                                            <div class="m39-modal__header">
                                                <div class="m39-modal__title">
                                                    @Translate.Text("Epass.SuccessMess")
                                                </div>
                                                <a data-close="true" class="m39-modal__button--close" id="success_close" aria-controls="success_content"></a>
                                            </div>
                                            <div class="m39-modal__content">
                                                <div class="grid__row">
                                                    <span id="responseMessage">@Translate.Text("Location has been edited successfully")</span>
                                                </div>
                                            </div>
                                            <div class="m39-modal__footer">
                                                <div id="editsuccessfulbutton" class="button button--primary m39-m12-no">
                                                    @Translate.Text("Epass.Ok")
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                                <div class="m39-modal__overlay"> </div>
                            </div>
                            <script type="text/javascript">
        docReady(function () {
            setTimeout(function () {
                jQuery("#form-field-selectedlocations").closest('.form-field--select').find("ul.select2-selection__rendered").attr("style", "padding:5px 12px 8px;");
            }, 250);
            $('.btneditlocation').off('click.edit').on('click.edit', function () {
                $('#editlocation_modal_true').find('.m39-modal__trigger').click();
            });
            $("#btnConfirmEditLocation").click(function () {
                event.preventDefault();
                event.stopPropagation();
                jQuery("#form-field-selectedlocations").parsley().validate();
                if (jQuery("#form-field-selectedlocations").parsley().isValid()) {
                    var tolistlocations = [];
                    $('#form-field-selectedlocations option:selected').each(function () {
                        tolistlocations.push($(this).val());
                    });
                    //var $tolist = tolistlocations.join("; ");
                    var data = AddForgeryToken({
                        grouppassid: '@mainpass.grouppassid',
                        locations: tolistlocations,
                    }, "form-pendingrequest");
                    Approvebuttonconfirm(data);
                }
            });
            $(".btneditlocation2").off("click.loc").on("click.loc", function () {
                $(".form-loc").show();
            });
            $(".button--locHide").each(function () {
                $(this).off("click.loc").on("click.loc", function () {
                    $(".form-loc").hide();
                });
            });
            function Approvebuttonconfirm(data) {
                var url = "/api/sitecore/WorkPermit/EditLocation";
                jQuery.ajax({
                    url: url,
                    traditional: true,
                    data: data,
                    beforeSend: function () {
                        jQuery('.j113-epass--loader').show();
                        jQuery('.j113-epass--loader').css('top', $(window).scrollTop());
                    },
                    complete: function () {
                        jQuery('.j113-epass--loader').hide();
                    },
                    dataType: 'json',
                    type: 'POST',
                   success: function(response) {
                        if (response.status) {
                            jQuery('#responseMessage').html(response.Message);
                            jQuery("#ApproverForm").find("a[data-close='true']").click();
                            jQuery('#editlocationmodal').find('.m39-modal__trigger').trigger('click');
                        }
                        else {
                            var msg= '@mainpass.passNumber';
                            //jQuery(".m39-modal__title").html(msg);
                            jQuery("#responseMessage").html(response.Message);
                            jQuery("#ApproverForm").find("a[data-close='true']").click();
                            jQuery('#editlocationmodal').find('.m39-modal__trigger').trigger('click');
                       }
                    }
                });
        }
            jQuery("#editsuccessfulbutton").on('click', function (event) {
                window.location.reload();
            });
        });

                            </script>
                        </div>
                    </div>
                </div>
                <div class="box box--3">
                    <div class="grid">
                        <div class="grid__row">
                            <div class="grid__colum grid__column--12">
                                <div class="m25-tabs" data-component="m25-tabs" data-toggle-breakpoint="m" data-helper="toggle-menu" data-selected-tab-id="m25-tab-5">
                                    <div class="grid">
                                        <div class="grid__row">
                                            <div class="grid__column grid__column--4">
                                                <div class="m25-tabs__menu m25-tabs__menu-modified" data-m25-tabs-menu="true">
                                                    <ul aria-role="tablist">
                                                        <li>
                                                            <a class="m25-tabs__tab m25-tabs__tab--active" id="m25-tab-0" aria-selected="true" aria-controls="m25-panel-0" href="#m25-panel-0" data-m25-tabs-tab="true">@Translate.Text("Epass.Profiledetails")</a>
                                                        </li>
                                                        @if (!mainpass.wppass)
                                                        {
                                                            <li>
                                                                <a class="m25-tabs__tab m25-tabs__tab--active" id="m25-tab-1" aria-selected="true" aria-controls="m25-panel-1" href="#m25-panel-1" data-m25-tabs-tab="true">@Translate.Text("Epass.Holiday Passes")</a>
                                                            </li>
                                                            <li>
                                                                <a class="m25-tabs__tab m25-tabs__tab--active" id="m25-tab-2" aria-selected="true" aria-controls="m25-panel-2" href="#m25-panel-2" data-m25-tabs-tab="true">@Translate.Text("Epass.Night Passes")</a>
                                                            </li>
                                                            <li>
                                                                <a class="m25-tabs__tab m25-tabs__tab--active" id="m25-tab-3" aria-selected="true" aria-controls="m25-panel-3" href="#m25-panel-3" data-m25-tabs-tab="true">@Translate.Text("Epass.Electronic Device Passes")</a>
                                                            </li>
                                                            <li>
                                                                <a class="m25-tabs__tab m25-tabs__tab--active" id="m25-tab-4" aria-selected="true" aria-controls="m25-panel-4" href="#m25-panel-4" data-m25-tabs-tab="true">@Translate.Text("Epass.Material Passes")</a>
                                                            </li>
                                                        }
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="m25-tabs__body grid__column grid__column--8">
                                                <div class="m15-tabs--mobile">
                                                    <div class="m25-tabs--title-mobile">
                                                    </div>
                                                    <div class="form-field form-field--select form-field--select-single">
                                                        <label for="form-field-mpassdetails" class="form-field__label"><span class="aria-only">select</span></label>
                                                        <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                                            <select id="form-field-mpassdetails" class="m25-tabs--select-mobile form-field__input form-field__input--select"></select>
                                                        </span>
                                                    </div>
                                                    <div class="m25-tabs--container-mobile">
                                                    </div>
                                                </div>
                                                <div class="toggle-menu__item toggle-menu__itemactive">
                                                    <div class="toggle-menu__trigger" data-toggle-trigger="true">
                                                        <h2 class="m25-tabs__title toggle-menu__title icon-">@Translate.Text("Epass.Profiledetails")</h2>
                                                    </div>
                                                    <div class="m25-tabs__content toggle-menu__content m25-tabs__content--active" id="m25-panel-0" aria-labelledby="m25-tab-0" aria-role="tabpanel" data-toggle-content="true" data-m25-tabs-content="true">
                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.Passdetails")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-passnumber">
                                                                        @Translate.Text("Epass.Passnumber")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-passnumber" aria-describedby="description-for-wsd1kg28f" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.mainpassNumber) ? mainpass.mainpassNumber : " N/A")" data-parsley-errors-container="#description-for-wsd1kg28f" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-passIssueDate">@Translate.Text("Epass.From")</label>
                                                                    @if (mainpass.passIssueDate != null)
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            @Html.TextBoxFor(x => mainpass.passIssueDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-passIssueDate", @name = "segment", @type = "text" })
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-passIssueDate" name="passIssueDate" type="text" value=" N/A">
                                                                        </div>
                                                                    }
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f2">@Translate.Text("Epass.Timing")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-wsd1kg28f2" aria-describedby="description-for-wsd1kg28f2" type="text" readonly="" value="@mainpass.fromTime - @mainpass.toTime" data-parsley-errors-container="#description-for-wsd1kg28f2" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                @if (!string.IsNullOrWhiteSpace(mainpass.Purpose))
                                                                {
                                                                    <div class="form-field form-field--readonly">
                                                                        <label class="form-field__label form-field__label--readonly" for="form-field-purpose">@Translate.Text("wp.Purpose of the visit")</label>
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-purpose" aria-describedby="description-for-purpose"
                                                                                   type="text" readonly="" value="@mainpass.Purpose" data-parsley-errors-container="#description-for-purpose" data-parsley-trigger="focusout">
                                                                        </div>
                                                                    </div>
                                                                }
                                                                @if (!string.IsNullOrWhiteSpace(mainpass.RejectRemarks))
                                                                {
                                                                    <div class="form-field form-field--readonly">
                                                                        <label class="form-field__label form-field__label--readonly" for="form-field-RejectRemarks">@Translate.Text("Reject Remarks")</label>
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-RejectRemarks" aria-describedby="description-for-RejectRemarks"
                                                                                   type="text" readonly="" value="@mainpass.RejectRemarks" data-parsley-errors-container="#description-for-RejectRemarks" data-parsley-trigger="focusout">
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-passtype">
                                                                        @Translate.Text("Epass.PassType")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-passtype" aria-describedby="description-for-passtype" type="text" readonly="" value="@(mainpass.passType != null ? mainpass.passType : " N/A")" data-parsley-errors-container="#description-for-wsd1kg28f4" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-passExpiryDate">@Translate.Text("Epass.TO")</label>
                                                                    @if (mainpass.passExpiryDate != null)
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            @Html.TextBoxFor(m => mainpass.passExpiryDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-passExpiryDate", @name = "segment", @type = "text" })
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-passExpiryDate" name="passExpiryDate" type="text" value=" N/A">
                                                                        </div>
                                                                    }
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-Subcontractor">@Translate.Text("Epass.Subcontractor")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-Subcontractor" aria-describedby="description-for-Subcontractor" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.Subcontractor) ? mainpass.Subcontractor : " N/A")" data-parsley-errors-container="#description-for-Subcontractor" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                @if (!string.IsNullOrWhiteSpace(mainpass.grouppassid))
                                                                {
                                                                    <div class="form-field form-field--readonly">
                                                                        <label class="form-field__label form-field__label--readonly" for="form-field-grouppassnumber">
                                                                            @Translate.Text("Request Number")
                                                                        </label>
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input name="segment" class="form-field__input form-field__input--readonly"
                                                                                   id="form-field-grouppassnumber" aria-describedby="description-for-grouppassnumber"
                                                                                   type="text" readonly=""
                                                                                   value="@(!string.IsNullOrWhiteSpace(mainpass.grouppassid) ? mainpass.grouppassid : " N/A")"
                                                                                   data-parsley-errors-container="#description-for-grouppassnumber"
                                                                                   data-parsley-trigger="focusout">
                                                                        </div>
                                                                    </div>
                                                                }
                                                                @if (!string.IsNullOrWhiteSpace(mainpass.Remarks))
                                                                {
                                                                    <div class="form-field form-field--readonly">
                                                                        <label class="form-field__label form-field__label--readonly" for="form-field-Remarks">@Translate.Text("Remarks")</label>
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-Remarks" aria-describedby="description-for-Remarks"
                                                                                   type="text" readonly="" value="@mainpass.Remarks" data-parsley-errors-container="#description-for-Remarks" data-parsley-trigger="focusout">
                                                                        </div>
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>

                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.Locations")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--12">
                                                                @if (mainpass.wppass && (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire))
                                                                {
                                                                    <button class="button button--primary button--edit button--very_small btneditlocation2" id="btneditlocation2" type="button">@Translate.Text("Add / Remove Location")</button>
                                                                }
                                                                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form mt12", @id = "form-pendingrequest", data_form = "true", enctype = "multipart/form-data" }))
                                                                {
                                                                    @Html.AntiForgeryToken()
                                                                    <div class="form-field form-field--select form-field--select-single hidden form-loc">
                                                                        <label for="form-field-selectedlocations" class="form-field__label">
                                                                            @Translate.Text("Epass.Location")
                                                                        </label>
                                                                        <span class="form-field__input-wrapper form-field__input-wrapper--select form-field__input-wrapper--select2">
                                                                            <select class="form-field__input form-field__input--select form-field__input--select-full form-field__input--select2"
                                                                                    id="form-field-selectedlocations"
                                                                                    name="SelectedLocation"
                                                                                    multiple="multiple"
                                                                                    required=""
                                                                                    aria-describedby="description-for-ma7826si2"
                                                                                    data-parsley-errors-container="#description-for-ma7826si2"
                                                                                    data-placeholder="@Translate.Text("Epass.SelectLocation")"
                                                                                    data-parsley-required-message="@Translate.Text("Epass.SelectLocation")">
                                                                                @if (ViewBag.LocationList != null)
                                                                                {
                                                                                    foreach (var item in (IEnumerable<SelectListItem>)ViewBag.LocationList)
                                                                                    {
                                                                                        <option value="@item.Value" @(mainpass.SeletecedLocation != null && mainpass.SeletecedLocation.Contains(item.Value) ? "selected" : string.Empty)>@item.Text</option>

                                                                                    }
                                                                                }
                                                                            </select>
                                                                        </span>
                                                                        <div id="description-for-ma7826si2" class="form-field__messages">
                                                                        </div>
                                                                        <div>
                                                                            <div class="button button--primary button--locHide button--very_small" id="btnConfirmEditLocation">
                                                                                @Translate.Text("Confirm")
                                                                            </div>
                                                                            <div class="button button--locHide button--very_small">
                                                                                @Translate.Text("Close")
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                }
                                                                <div class="form-field form-field--readonly mt12">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-locations">
                                                                        @*@Translate.Text("Epass.Locations")*@
                                                                        <span>
                                                                            @*@if (mainpass.wppass && !mainpass.grouppass && (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire))
                                                                                {
                                                                                    <button class="button button--primary button--edit button--very_small btneditlocation" id="btneditlocation" type="button">@Translate.Text("Add / Remove Location")</button>

                                                                                }*@
                                                                        </span>
                                                                    </label>

                                                                    @if (mainpass.Location.Count > 0)
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            @if (mainpass.wppass && mainpass.WpLocation != null)
                                                                            {
                                                                                <div class="m23-table m23-table--asymetric-40" data-component="m23-table">
                                                                                    <h3 class="m23-table__title "></h3>
                                                                                    <table class="m23-table__content-table">
                                                                                        <thead class="m23-table__content-table-header">
                                                                                            <tr class="m23-table__content-table-row">
                                                                                                <th class="m23-table__content-table-cell--header no-wrap ">@Translate.Text("Epass.Locations")</th>
                                                                                                <th class="m23-table__content-table-cell--header">@Translate.Text("Epass.Status")</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody class="m23-table__content-table-body">
                                                                                            @foreach (DEWAXP.Foundation.Integration.Responses.SmartVendor.WorkPermit.Grouppasslocationlistres loc in mainpass.WpLocation)
                                                                                            {
                                                                                                <tr class="m23-table__content-table-row">
                                                                                                    <td class="m23-table__content-table-cell">@loc.Location</td>
                                                                                                    <td class="m23-table__content-table-cell">
                                                                                                        @EpassHelper.getWPLocationStatus(loc.Status, mainpass.status)
                                                                                                    </td>
                                                                                                </tr>
                                                                                            }
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>

                                                                            }
                                                                            else
                                                                            {
                                                                                <div class="m23-table m23-table--asymetric-40" data-component="m23-table">
                                                                                    <h3 class="m23-table__title "></h3>
                                                                                    <table class="m23-table__content-table">
                                                                                        <thead class="m23-table__content-table-header">
                                                                                            <tr class="m23-table__content-table-row">
                                                                                                <th class="m23-table__content-table-cell--header no-wrap">@Translate.Text("Epass.Locations")</th>
                                                                                                @*<th class="m23-table__content-table-cell--header">@Translate.Text("Status")</th>*@
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody class="m23-table__content-table-body">
                                                                                            @{
                                                                                                var count = 0;
                                                                                                var totalCount = 0;
                                                                                                var countlimit = 2;
                                                                                                foreach (string loc in mainpass.Location)
                                                                                                {
                                                                                                    count++;
                                                                                                    totalCount++;
                                                                                                    if (count == 1)
                                                                                                    {
                                                                                                        @:<tr class="m23-table__content-table-row">
                                                                                                        }
                                                                                                        <td class="m23-table__content-table-cell">@loc</td>

                                                                                                        if (count == countlimit || (totalCount == mainpass.Location.Count()))
                                                                                                        {
                                                                                                            count = 0;
                                                                                                            //countlimit++;
                                                                                                        @:</tr>
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                                @*<input class="form-field__input form-field__input--readonly"
                                                                                    readonly="" id="form-field-locations"
                                                                                    name="Locations" type="text"
                                                                                    value="@string.Join(",", @mainpass.Location.ToArray()).Trim()"
                                                                                    aria-describedby="description-for-Locations"
                                                                                    data-parsley-errors-container="#description-for-Locations"
                                                                                    data-parsley-trigger="focusout">*@
                                                                            }
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-locations" aria-describedby="description-for-locations" type="text" readonly="" value="N/A" data-parsley-errors-container="#description-for-locations" data-parsley-trigger="focusout">
                                                                        </div>
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.Projectdetails")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-projectname">@Translate.Text("Epass.IndProjectName")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-projectname" aria-describedby="description-for-projectname" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.projectName) ? mainpass.projectName : " N/A")" data-parsley-errors-container="#description-for-name" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    @if (mainpass.wppass)
                                                                    {
                                                                        <label class="form-field__label form-field__label--readonly"
                                                                               for="form-field-projectcordinatorname">@Translate.Text("wp.ProjectCoordinatorName")</label>
                                                                            <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                <input name="segment" class="form-field__input form-field__input--readonly"
                                                                                       id="form-field-projectcordinatorname"
                                                                                       aria-describedby="description-for-projectcordinatorname"
                                                                                       type="text" readonly=""
                                                                                       value="@(!string.IsNullOrWhiteSpace(mainpass.wpprojectcoordinatorname) ? mainpass.wpprojectcoordinatorname : " N/A")"
                                                                                       data-parsley-errors-container="#description-for-projectcordinatorname" data-parsley-trigger="focusout">
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <label class="form-field__label form-field__label--readonly" for="form-field-projectStartDate">@Translate.Text("Epass.Startdate")</label>
                                                                            if (mainpass.projectStartDate != null)
                                                                            {
                                                                                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                    @Html.TextBoxFor(m => mainpass.projectStartDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-projectStartDate", @name = "segment", @type = "text" })
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                    <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-projectStartDate" name="projectStartDate" type="text" value=" N/A">
                                                                                </div>
                                                                            }
                                                                        }
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-companyName">@Translate.Text("Epass.Companyname")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-companyName" aria-describedby="description-for-companyName" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.companyName) ? mainpass.companyName : " N/A")" data-parsley-errors-container="#description-for-companyname" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    @if (mainpass.wppass)
                                                                    {
                                                                        <label class="form-field__label form-field__label--readonly"
                                                                               for="form-field-projectstatus">@Translate.Text("Epass.Project")</label>
                                                                            <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                <input name="segment" class="form-field__input form-field__input--readonly"
                                                                                       id="form-field-projectstatus"
                                                                                       aria-describedby="description-for-projectstatus"
                                                                                       type="text" readonly=""
                                                                                       value="@(!string.IsNullOrWhiteSpace(mainpass.projectId) ? mainpass.projectId : " N/A")"
                                                                                       data-parsley-errors-container="#description-for-projectstatus" data-parsley-trigger="focusout">
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <label class="form-field__label form-field__label--readonly" for="form-field-projectstatus">@Translate.Text("Epass.Status")</label>
                                                                            <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-projectstatus" aria-describedby="description-for-projectstatus" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.projectStatus) ? mainpass.projectStatus : " N/A")" data-parsley-errors-container="#description-for-projectstatus" data-parsley-trigger="focusout">
                                                                            </div>
                                                                        }
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    @if (mainpass.wppass)
                                                                    {
                                                                        <label class="form-field__label form-field__label--readonly"
                                                                               for="form-field-projectcordinatoremail">@Translate.Text("wp.ProjectCoordinatorEmail")</label>
                                                                            <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                <input name="segment" class="form-field__input form-field__input--readonly"
                                                                                       id="form-field-projectcordinatoremail"
                                                                                       aria-describedby="description-for-projectcordinatoremail"
                                                                                       type="text" readonly=""
                                                                                       value="@(!string.IsNullOrWhiteSpace(mainpass.wpprojectcoordinatoremail) ? mainpass.wpprojectcoordinatoremail : " N/A")"
                                                                                       data-parsley-errors-container="#description-for-projectcordinatoremail" data-parsley-trigger="focusout">
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <label class="form-field__label form-field__label--readonly" for="form-field-projectEndDate">@Translate.Text("Epass.Enddate")</label>
                                                                            if (mainpass.projectEndDate != null)
                                                                            {
                                                                                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                    @Html.TextBoxFor(m => mainpass.projectEndDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-projectEndDate", @name = "segment", @type = "text" })
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                    <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-projectEndDate" name="projectEndDate" type="text" value=" N/A">
                                                                                </div>
                                                                            }
                                                                        }
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    @if (mainpass.wppass)
                                                                    {
                                                                        <label class="form-field__label form-field__label--readonly"
                                                                               for="form-field-projectcordinatormobile">@Translate.Text("wp.ProjectCoordinatorMobileNumber")</label>
                                                                            <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                <input name="segment" class="form-field__input form-field__input--readonly"
                                                                                       id="form-field-projectcordinatormobile"
                                                                                       aria-describedby="description-for-projectcordinatormobile"
                                                                                       type="text" readonly=""
                                                                                       value="@(!string.IsNullOrWhiteSpace(mainpass.wpprojectcoordinatormobile) ? mainpass.wpprojectcoordinatormobile : " N/A")"
                                                                                       data-parsley-errors-container="#description-for-projectcordinatormobile" data-parsley-trigger="focusout">
                                                                            </div>
                                                                        }
                                                                        else
                                                                        {
                                                                            <label class="form-field__label form-field__label--readonly" for="form-field-departmentName">@Translate.Text("Epass.Departmentname")</label>
                                                                            <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-departmentName" aria-describedby="description-for-departmentName" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.departmentName) ? mainpass.departmentName : " N/A")" data-parsley-errors-container="#description-for-departmentname" data-parsley-trigger="focusout">
                                                                            </div>
                                                                        }
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.Personaldetails")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-name">
                                                                        @Translate.Text("Epass.IndName")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-name" aria-describedby="description-for-name" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.name) ? mainpass.name : " N/A")" data-parsley-errors-container="#description-for-name" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-mobile">@Translate.Text("Epass.Mobile")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-mobile" aria-describedby="description-for-mobile" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.mobile) ? mainpass.mobile : " N/A")" data-parsley-errors-container="#description-for-mobile" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-nationality">@Translate.Text("Epass.IndNationality")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-nationality" aria-describedby="description-for-nationality" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.nationality) ? mainpass.nationality : " N/A")" data-parsley-errors-container="#description-for-nationality" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-profession">
                                                                        @Translate.Text("Epass.Position")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-profession" aria-describedby="description-for-profession" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.profession) ? mainpass.profession : " N/A")" data-parsley-errors-container="#description-for-profession" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-email">@Translate.Text("Epass.Email")</label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-email" aria-describedby="description-for-email" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.VisitorEmail) ? mainpass.VisitorEmail : " N/A")" data-parsley-errors-container="#description-for-email" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.Passport")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-passportNumber">
                                                                        @Translate.Text("Epass.Passportnumber")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-passportNumber" aria-describedby="description-for-passportNumber" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.passportNumber) ? mainpass.passportNumber : " N/A")" data-parsley-errors-container="#description-for-passportNumber" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-passportExpiryDate">@Translate.Text("Epass.Expiry")</label>
                                                                    @if (mainpass.passportExpiryDate != null)
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            @Html.TextBoxFor(m => mainpass.passportExpiryDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-passportExpiryDate", @name = "segment", @type = "text" })
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-passExpiryDate" name="passExpiryDate" type="text" value=" N/A">
                                                                        </div>
                                                                    }
                                                                </div>
                                                            </div>
                                                            @if (mainpass.wppass)
                                                            {
                                                                if (mainpass.isPassportattachment)
                                                                {
                                                                    <a class="button button--text button--next j113-epass--pass_detail_view wpattachment" data-passnumber="@mainpass.passNumber" data-cat="Passport" data-id="8" title="@Translate.Text("Epass.Viewpassport")">@Translate.Text("Epass.Viewpassport")</a>
                                                                }
                                                            }
                                                            else if (mainpass.isPassportattachment)
                                                            {
                                                                <a class="button button--text button--next j113-epass--pass_detail_view attachment" data-id="@viewPassport" data-passnumber="@mainpass.passNumber" data-cat="Passport" title="@Translate.Text("Epass.Viewpassport")">@Translate.Text("Epass.Viewpassport")</a>
                                                            }
                                                        </div>
                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.Visa")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-visaNumber">
                                                                        @Translate.Text("Epass.Visanumber")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-visaNumber" aria-describedby="description-for-visaNumber" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.visaNumber) ? mainpass.visaNumber : " N/A")" data-parsley-errors-container="#description-for-wsd1kg28f14" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-visaExpiryDate">@Translate.Text("Epass.Expiry")</label>
                                                                    @if (mainpass.visaExpiryDate != null)
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            @Html.TextBoxFor(m => mainpass.visaExpiryDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-visaExpiryDate", @name = "segment", @type = "text" })
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-visaExpiryDate" name="visaExpiryDate" type="text" value=" N/A">
                                                                        </div>
                                                                    }
                                                                </div>
                                                            </div>
                                                            @if (mainpass.wppass)
                                                            {
                                                                if (!string.IsNullOrWhiteSpace(mainpass.visaNumber) && mainpass.isVisaattachment)
                                                                {
                                                                    <a class="button button--text button--next j113-epass--pass_detail_view wpattachment" data-cat="Visa" data-passnumber="@mainpass.passNumber" data-id="10" title="@Translate.Text("Epass.Viewvisa")">@Translate.Text("Epass.Viewvisa")</a>
                                                                }
                                                            }
                                                            else if (!string.IsNullOrWhiteSpace(mainpass.visaNumber) && mainpass.isVisaattachment)
                                                            {
                                                                <a class="button button--text button--next j113-epass--pass_detail_view attachment" data-passnumber="@mainpass.passNumber" data-cat="Visa" data-id="@viewVisa" title="@Translate.Text("Epass.Viewvisa")">@Translate.Text("Epass.Viewvisa")</a>
                                                            }
                                                        </div>
                                                        <div class="j113-epass--pass_detail_title">
                                                            @Translate.Text("Epass.EmiratesID")
                                                        </div>
                                                        <div class="j113-epass--pass_detail_card">
                                                            <div class="grid__column grid__column--6">
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                        @Translate.Text("Epass.EIdnumber")
                                                                    </label>
                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                        <input name="segment" class="form-field__input form-field__input--readonly" id="form-field-wsd1kg28f17" aria-describedby="description-for-wsd1kg28f17" type="text" readonly="" value="@(!string.IsNullOrWhiteSpace(mainpass.emiratesId) ? mainpass.emiratesId : " N/A")" data-parsley-errors-container="#description-for-wsd1kg28f17" data-parsley-trigger="focusout">
                                                                    </div>
                                                                </div>
                                                                <div class="form-field form-field--readonly">
                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-emiratesExpiryDate">@Translate.Text("Epass.Expiry")</label>
                                                                    @if (mainpass.emiratesExpiryDate != null)
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            @Html.TextBoxFor(m => mainpass.emiratesExpiryDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-emiratesExpiryDate", @name = "segment", @type = "text" })
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-emiratesExpiryDate" name="emiratesExpiryDate" type="text" value=" N/A">
                                                                        </div>
                                                                    }
                                                                </div>
                                                            </div>
                                                            @if (mainpass.wppass)
                                                            {
                                                                if (mainpass.isEidattachment)
                                                                {
                                                                    <a class="button button--text button--next j113-epass--pass_detail_view wpattachment" data-cat="EmirateID" data-passnumber="@mainpass.passNumber" data-id="6" title="@Translate.Text("Epass.ViewEmiratesID")">@Translate.Text("Epass.ViewEmiratesID")</a>
                                                                }
                                                            }
                                                            else if (mainpass.isEidattachment)
                                                            {
                                                                <a class="button button--text button--next j113-epass--pass_detail_view attachment" data-passnumber="@mainpass.passNumber" data-cat="EmiratesID" data-id="@viewEmirateID" title="@Translate.Text("Epass.ViewEmiratesID")">@Translate.Text("Epass.ViewEmiratesID")</a>
                                                            }
                                                        </div>

                                                        @if (!string.IsNullOrWhiteSpace(mainpass.VehicleRegNumber))
                                                        {
                                                            <div class="j113-epass--pass_detail_title">
                                                                @Translate.Text("Epass.Vehicle Details")
                                                            </div>
                                                            <div class="j113-epass--pass_detail_card">
                                                                <div class="grid__column grid__column--6">
                                                                    <div class="form-field form-field--readonly">
                                                                        <label class="form-field__label form-field__label--readonly" for="form-field-vehiclenumber">
                                                                            @Translate.Text("Epass.Vehicle Number")
                                                                        </label>
                                                                        <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                            <input name="segment" class="form-field__input form-field__input--readonly"
                                                                                   id="form-field-vehiclenumber" aria-describedby="description-for-vehiclenumber"
                                                                                   type="text" readonly=""
                                                                                   value="@(!string.IsNullOrWhiteSpace(mainpass.VehicleRegNumber) ? mainpass.VehicleRegNumber : " N/A")"
                                                                                   data-parsley-errors-container="#description-for-vehiclenumber"
                                                                                   data-parsley-trigger="focusout">
                                                                        </div>
                                                                    </div>
                                                                    @if (!mainpass.wppass)
                                                                    {
                                                                        <div class="form-field form-field--readonly">
                                                                            <label class="form-field__label form-field__label--readonly" for="form-field-VehRegistrationDate">@Translate.Text("Epass.VehicleRegistrationDate")</label>
                                                                            @if (mainpass.VehRegistrationDate != null)
                                                                            {
                                                                                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                    @Html.TextBoxFor(m => mainpass.VehRegistrationDate, "{0:MMM d, yyyy}", new { @class = "form-field__input form-field__input--readonly", @id = "form-field-VehRegistrationDate", @name = "segment", @type = "text" })
                                                                                </div>
                                                                            }
                                                                            else
                                                                            {
                                                                                <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                    <input class="form-field__input form-field__input--readonly" readonly="" id="form-field-VehRegistrationDate" name="VehRegistrationDate" type="text" value=" N/A">
                                                                                </div>
                                                                            }
                                                                        </div>
                                                                    }
                                                                </div>
                                                                @if (mainpass.wppass)
                                                                {
                                                                    if (mainpass.isTrafficfilecodeattachment)
                                                                    {
                                                                        <a class="button button--text button--next j113-epass--pass_detail_view wpattachment" data-cat="DrivingLicense" data-passnumber="@mainpass.passNumber" data-id="12" title="@Translate.Text("Epass.ViewTrafficfilecode")">@Translate.Text("Epass.ViewTrafficfilecode")</a>
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (mainpass.isTrafficfilecodeattachment)
                                                                    {
                                                                        <a class="button button--text button--next j113-epass--pass_detail_view attachment" data-passnumber="@mainpass.passNumber" data-cat="Vehicle" data-id="" title="@Translate.Text("Epass.ViewVehicleID")">@Translate.Text("Epass.ViewVehicleID")</a>
                                                                    }
                                                                    if (mainpass.isDrivingLicenseattachment)
                                                                    {
                                                                        <a class="button button--text button--next j113-epass--pass_detail_view attachment" data-passnumber="@mainpass.passNumber" data-cat="DrivingLicense" data-id="" title="@Translate.Text("Epass.ViewDrivingLicense")">@Translate.Text("Epass.ViewDrivingLicense")</a>
                                                                    }
                                                                }

                                                            </div>
                                                        }
                                                    </div>
                                                </div>
                                                @if (!mainpass.wppass)
                                                {
                                                    <div class="toggle-menu__item">
                                                        <div class="toggle-menu__trigger" data-toggle-trigger="true">
                                                            <h2 class="m25-tabs__title toggle-menu__title icon-">@Translate.Text("Epass.Holiday Passes")</h2>
                                                        </div>
                                                        <div class="m25-tabs__content toggle-menu__content" id="m25-panel-1" aria-labelledby="m25-tab-1" aria-role="tabpanel" data-toggle-content="true" data-m25-tabs-content="true">
                                                            <div class="j113-epass--pass_detail_title">
                                                                @Translate.Text("Epass.Holiday pass Details")
                                                                @if (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire)
                                                                {
                                                                    <div class="floatRight"><a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_SUBPASS_LANDING_PAGE)" class="link--green" type="button">@Translate.Text("Epass.Apply for new pass")</a></div>
                                                                }
                                                            </div>
                                                            @if (holidaypass != null && holidaypass.Count() > 0)
                                                            {
                                                                <table class="j113-epass--table">
                                                                    <thead class="j113-epass--table_header">
                                                                        <tr>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Pass")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Status")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Action")</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (SecurityPassViewModel subPass in holidaypass.ToList())
                                                                        {
                                                                            <tr class="j113-epass--table_row">
                                                                                <td class="j113-epass--table_cell">
                                                                                    @*<a class="j113-epass--table_cell--pnumber button--text holidaypass" href="#">@subPass.passNumber</a>*@
                                                                                    <span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    <div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.strstatus</div>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </td>
                                                                            </tr>

                                                                        }

                                                                    </tbody>
                                                                </table>

                                                                foreach (SecurityPassViewModel subPass in holidaypass.ToList())
                                                                {
                                                                    <div class="m39-modal m39-modal--new " data-component="m39-modal" id="@subPass.passNumber">
                                                                        <button data-trigger="true" data-modaltrigger="@subPass.passNumber" class="m39-modal__trigger j113-epass--table_cell--pnumber button--text holidaypass hidden" type="button" id="@(subPass.passNumber + "_trigger")" aria-controls="@(subPass.passNumber + "_content")">@subPass.passNumber</button>
                                                                        <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="true" id="_8gguopjrg_content" aria-labelledby="_8gguopjrg_trigger">
                                                                            <div class="m39-modal__dialog" id="ApproverForm">

                                                                                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form", @id = "form-pendingrequest", data_form = "true", enctype = "multipart/form-data" }))
                                                                                {
                                                                                    @Html.AntiForgeryToken()
                                                                                    <div class="m39-modal__header">
                                                                                        <div class="m39-modal__title">@Translate.Text("Epass.Holiday pass Details")</div>
                                                                                        <a data-close="true" class="m39-modal__button--close">@Translate.Text("Epass.Close")</a>
                                                                                        <div class="m39-modal__subtitle">
                                                                                            @subPass.passNumber
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__content">
                                                                                        <div class="grid__row mb0">
                                                                                            <div class="grid__column grid__column--12">
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Name")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.name) ? subPass.name : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Linked to")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.mainpassNumber) ? subPass.mainpassNumber : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Expiry")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strpassExpiryDate) ? subPass.strpassExpiryDate : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Pass Type")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@Translate.Text("Epass.Holiday Pass")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Status")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strstatus) ? subPass.strstatus : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>


                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__footer">
                                                                                        <button class="button button--primary" id="btnConfirmApprove" data-close="true" data-accountupdate="true" type="button">@Translate.Text("Epass.Done")</button>
                                                                                    </div>
                                                                                }

                                                                            </div>
                                                                        </div>
                                                                        <div class="m39-modal__overlay"> </div>
                                                                    </div>
                                                                }
                                                                <div class="j113-epass--keypair">
                                                                    <div class="m42-keyvalue">
                                                                        @foreach (SecurityPassViewModel subPass in holidaypass.ToList())
                                                                        {
                                                                            <dl>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Pass")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Status")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.status</div></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Action")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </dd>
                                                                            </dl>
                                                                        }
                                                                    </div>

                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="mt56 centered">@Translate.Text("Epass.No record")</div>
                                                            }
                                                        </div>
                                                    </div>
                                                    <div class="toggle-menu__item">
                                                        <div class="toggle-menu__trigger" data-toggle-trigger="true">
                                                            <h2 class="m25-tabs__title toggle-menu__title icon-">@Translate.Text("Epass.Night Passes")</h2>
                                                        </div>
                                                        <div class="m25-tabs__content toggle-menu__content" id="m25-panel-2" aria-labelledby="m25-tab-2" aria-role="tabpanel" data-toggle-content="true" data-m25-tabs-content="true">
                                                            <div class="j113-epass--pass_detail_title">
                                                                @Translate.Text("Epass.Night pass Details")
                                                                @if (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire)
                                                                {
                                                                    <div class="floatRight"><a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_SUBPASS_LANDING_PAGE)" class="link--green" type="button">@Translate.Text("Epass.Apply for new pass")</a></div>
                                                                }
                                                            </div>
                                                            @if (nightpass != null && nightpass.Count() > 0)
                                                            {
                                                                <table class="j113-epass--table">
                                                                    <thead class="j113-epass--table_header">
                                                                        <tr>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Pass")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Status")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Action")</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (SecurityPassViewModel subPass in nightpass.ToList())
                                                                        {
                                                                            <tr class="j113-epass--table_row">
                                                                                <td class="j113-epass--table_cell">
                                                                                    @*<a class="j113-epass--table_cell--pnumber button--text holidaypass" href="#">@subPass.passNumber</a>*@
                                                                                    <span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    <div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.strstatus</div>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@subPass.passNumber" class="link--green" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </td>
                                                                            </tr>

                                                                        }

                                                                    </tbody>
                                                                </table>

                                                                foreach (SecurityPassViewModel subPass in nightpass.ToList())
                                                                {
                                                                    <div class="m39-modal m39-modal--new " data-component="m39-modal" id="@subPass.passNumber">
                                                                        <button data-trigger="true" data-modaltrigger="@subPass.passNumber" class="m39-modal__trigger j113-epass--table_cell--pnumber button--text holidaypass hidden" type="button" id="@(subPass.passNumber + "_trigger")" aria-controls="@(subPass.passNumber + "_content")">@subPass.passNumber</button>
                                                                        <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="true" id="_8gguopjrg_content" aria-labelledby="_8gguopjrg_trigger">
                                                                            <div class="m39-modal__dialog" id="ApproverForm">

                                                                                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form", @id = "form-pendingrequest", data_form = "true", enctype = "multipart/form-data" }))
                                                                                {
                                                                                    @Html.AntiForgeryToken()
                                                                                    <div class="m39-modal__header">
                                                                                        <div class="m39-modal__title">
                                                                                            <span>@Translate.Text("Epass.Night pass Details")</span>

                                                                                        </div>
                                                                                        <a data-close="true" class="m39-modal__button--close">@Translate.Text("Epass.Close")</a>
                                                                                        <div class="m39-modal__subtitle">
                                                                                            @subPass.passNumber
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__content">
                                                                                        <div class="grid__row mb0">
                                                                                            <div class="grid__column grid__column--12">
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Name")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.name) ? subPass.name : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Linked to")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.mainpassNumber) ? subPass.mainpassNumber : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Expiry")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strpassExpiryDate) ? subPass.strpassExpiryDate : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Pass Type")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@Translate.Text("Epass.Night Pass")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Status")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strstatus) ? subPass.strstatus : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>


                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__footer">
                                                                                        <button class="button button--primary" id="btnConfirmApprove" data-close="true" data-accountupdate="true" type="button">@Translate.Text("Epass.Done")</button>
                                                                                    </div>
                                                                                }

                                                                            </div>
                                                                        </div>
                                                                        <div class="m39-modal__overlay"> </div>
                                                                    </div>
                                                                }
                                                                <div class="j113-epass--keypair">
                                                                    <div class="m42-keyvalue">

                                                                        @foreach (SecurityPassViewModel subPass in nightpass.ToList())
                                                                        {
                                                                            <dl>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Pass")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Status")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.status</div></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Action")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </dd>
                                                                            </dl>
                                                                        }
                                                                    </div>

                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="mt56 centered">@Translate.Text("Epass.No record")</div>
                                                            }
                                                        </div>
                                                    </div>
                                                    <div class="toggle-menu__item">
                                                        <div class="toggle-menu__trigger" data-toggle-trigger="true">
                                                            <h2 class="m25-tabs__title toggle-menu__title icon-">@Translate.Text("Epass.Electronic Device Passes")</h2>
                                                        </div>
                                                        <div class="m25-tabs__content toggle-menu__content" id="m25-panel-3" aria-labelledby="m25-tab-3" aria-role="tabpanel" data-toggle-content="true" data-m25-tabs-content="true">
                                                            <div class="j113-epass--pass_detail_title">
                                                                @Translate.Text("Epass.Electronic pass Details")
                                                                @if (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire)
                                                                {
                                                                    <div class="floatRight"><a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_SUBPASS_LANDING_PAGE)" class="link--green" type="button">@Translate.Text("Epass.Apply for new pass")</a></div>
                                                                }
                                                            </div>
                                                            @if (devicepass != null && devicepass.Count() > 0)
                                                            {
                                                                <table class="j113-epass--table">
                                                                    <thead class="j113-epass--table_header">
                                                                        <tr>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Pass")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Status")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Action")</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (SecurityPassViewModel subPass in devicepass.ToList())
                                                                        {
                                                                            <tr class="j113-epass--table_row">
                                                                                <td class="j113-epass--table_cell">
                                                                                    @*<a class="j113-epass--table_cell--pnumber button--text holidaypass" href="#">@subPass.passNumber</a>*@
                                                                                    <span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    <div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.strstatus</div>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_DEVICE_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </td>
                                                                            </tr>

                                                                        }

                                                                    </tbody>
                                                                </table>

                                                                foreach (SecurityPassViewModel subPass in devicepass.ToList())
                                                                {
                                                                    <div class="m39-modal m39-modal--new " data-component="m39-modal" id="@subPass.passNumber">
                                                                        <button data-trigger="true" data-modaltrigger="@subPass.passNumber" class="m39-modal__trigger j113-epass--table_cell--pnumber button--text holidaypass hidden" type="button" id="@(subPass.passNumber + "_trigger")" aria-controls="@(subPass.passNumber + "_content")">@subPass.passNumber</button>
                                                                        <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="true" id="_8gguopjrg_content" aria-labelledby="_8gguopjrg_trigger">
                                                                            <div class="m39-modal__dialog" id="ApproverForm">

                                                                                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form", @id = "form-pendingrequest", data_form = "true", enctype = "multipart/form-data" }))
                                                                                {
                                                                                    @Html.AntiForgeryToken()
                                                                                    <div class="m39-modal__header">
                                                                                        <div class="m39-modal__title">@Translate.Text("Epass.Electronic pass Details")</div>
                                                                                        <a data-close="true" class="m39-modal__button--close">@Translate.Text("Epass.Close")</a>
                                                                                        <div class="m39-modal__subtitle">
                                                                                            @subPass.passNumber
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__content">
                                                                                        <div class="grid__row mb0">
                                                                                            <div class="grid__column grid__column--12">
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Name")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.name) ? subPass.name : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Linked to")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.mainpassNumber) ? subPass.mainpassNumber : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Expiry")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strpassExpiryDate) ? subPass.strpassExpiryDate : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Pass Type")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@Translate.Text("Epass.Electronic Pass")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Status")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strstatus) ? subPass.strstatus : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>


                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__footer">
                                                                                        <button class="button button--primary" id="btnConfirmApprove" data-close="true" data-accountupdate="true" type="button">@Translate.Text("Epass.Done")</button>
                                                                                    </div>
                                                                                }

                                                                            </div>
                                                                        </div>
                                                                        <div class="m39-modal__overlay"> </div>
                                                                    </div>
                                                                }
                                                                <div class="j113-epass--keypair">
                                                                    <div class="m42-keyvalue">

                                                                        @foreach (SecurityPassViewModel subPass in devicepass.ToList())
                                                                        {
                                                                            <dl>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Pass")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Status")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.status</div></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Action")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </dd>
                                                                            </dl>
                                                                        }
                                                                    </div>

                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="mt56 centered">@Translate.Text("Epass.No record")</div>
                                                            }
                                                        </div>
                                                    </div>
                                                    <div class="toggle-menu__item">
                                                        <div class="toggle-menu__trigger" data-toggle-trigger="true">
                                                            <h2 class="m25-tabs__title toggle-menu__title icon-">@Translate.Text("Epass.Material Passes")</h2>
                                                        </div>
                                                        <div class="m25-tabs__content toggle-menu__content" id="m25-panel-4" aria-labelledby="m25-tab-4" aria-role="tabpanel" data-toggle-content="true" data-m25-tabs-content="true">
                                                            <div class="j113-epass--pass_detail_title">
                                                                @Translate.Text("Epass.Material pass Details")
                                                                @if (mainpass.status == SecurityPassStatus.Active || mainpass.status == SecurityPassStatus.SoontoExpire)
                                                                {
                                                                    <div class="floatRight"><a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_SUBPASS_LANDING_PAGE)" class="link--green" type="button">@Translate.Text("Epass.Apply for new pass")</a></div>
                                                                }
                                                            </div>
                                                            @if (materialpass != null && materialpass.Count() > 0)
                                                            {
                                                                <table class="j113-epass--table">
                                                                    <thead class="j113-epass--table_header">
                                                                        <tr>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Pass")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Status")</th>
                                                                            <th class="j113-epass--table_cell">@Translate.Text("Epass.Action")</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>

                                                                        @foreach (SecurityPassViewModel subPass in materialpass.ToList())
                                                                        {
                                                                            <tr class="j113-epass--table_row">
                                                                                <td class="j113-epass--table_cell">
                                                                                    @*<a class="j113-epass--table_cell--pnumber button--text holidaypass" href="#">@subPass.passNumber</a>*@
                                                                                    <span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    <div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.strstatus</div>
                                                                                </td>
                                                                                <td class="j113-epass--table_cell">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_DEVICE_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </td>
                                                                            </tr>

                                                                        }

                                                                    </tbody>
                                                                </table>

                                                                foreach (SecurityPassViewModel subPass in materialpass.ToList())
                                                                {
                                                                    <div class="m39-modal m39-modal--new " data-component="m39-modal" id="@subPass.passNumber">
                                                                        <button data-trigger="true" data-modaltrigger="@subPass.passNumber" class="m39-modal__trigger j113-epass--table_cell--pnumber button--text holidaypass hidden" type="button" id="@(subPass.passNumber + "_trigger")" aria-controls="@(subPass.passNumber + "_content")">@subPass.passNumber</button>
                                                                        <div data-content="true" class="m39-modal__container" role="dialog" aria-expanded="true" id="_8gguopjrg_content" aria-labelledby="_8gguopjrg_trigger">
                                                                            <div class="m39-modal__dialog" id="ApproverForm">

                                                                                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "form static-form", @id = "form-pendingrequest", data_form = "true", enctype = "multipart/form-data" }))
                                                                                {
                                                                                    @Html.AntiForgeryToken()
                                                                                    <div class="m39-modal__header">
                                                                                        <div class="m39-modal__title">@Translate.Text("Epass.Material pass Details")</div>
                                                                                        <a data-close="true" class="m39-modal__button--close">@Translate.Text("Epass.Close")</a>
                                                                                        <div class="m39-modal__subtitle">
                                                                                            @subPass.passNumber
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__content">
                                                                                        <div class="grid__row mb0">
                                                                                            <div class="grid__column grid__column--12">
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Name")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.name) ? subPass.name : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Linked to")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.mainpassNumber) ? subPass.mainpassNumber : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Expiry")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strpassExpiryDate) ? subPass.strpassExpiryDate : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Pass Type")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@Translate.Text("Epass.Material Pass")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="form-field form-field--readonly">
                                                                                                    <label class="form-field__label form-field__label--readonly" for="form-field-wsd1kg28f17">
                                                                                                        @Translate.Text("Epass.Status")
                                                                                                    </label>
                                                                                                    <div class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                                                                                        <input name="segment"
                                                                                                               class="form-field__input form-field__input--readonly"
                                                                                                               id="form-field-wsd1kg28f17"
                                                                                                               aria-describedby="description-for-wsd1kg28f17"
                                                                                                               type="text"
                                                                                                               readonly=""
                                                                                                               value="@(!string.IsNullOrWhiteSpace(subPass.strstatus) ? subPass.strstatus : " N/A")"
                                                                                                               data-parsley-errors-container="#description-for-wsd1kg28f17"
                                                                                                               data-parsley-trigger="focusout">
                                                                                                    </div>
                                                                                                </div>


                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="m39-modal__footer">
                                                                                        <button class="button button--primary" id="btnConfirmApprove" data-close="true" data-accountupdate="true" type="button">@Translate.Text("Epass.Done")</button>
                                                                                    </div>
                                                                                }

                                                                            </div>
                                                                        </div>
                                                                        <div class="m39-modal__overlay"> </div>
                                                                    </div>
                                                                }
                                                                <div class="j113-epass--keypair">
                                                                    <div class="m42-keyvalue">

                                                                        @foreach (SecurityPassViewModel subPass in materialpass.ToList())
                                                                        {
                                                                            <dl>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Pass")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><span data-modaltrigger="@subPass.passNumber" class="j113-epass--table_cell--pnumber j113-epass--table_cell--modaltrigger button--text">@subPass.passNumber</span></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Status")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd"><div class="j113-epass--status @subPass.strclass.ToLower()">@subPass.status</div></dd>
                                                                                <dt class="m42-keyvalue__key m42-keyvalue__key--secondary m42-keyvalue--justified-dt">@Translate.Text("Epass.Action")</dt>
                                                                                <dd class="m42-keyvalue__value m42-keyvalue__value--secondary m42-keyvalue--justified-dd">
                                                                                    @if (subPass.status.Equals(SecurityPassStatus.Active) || subPass.status.Equals(SecurityPassStatus.SoontoExpire))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass-sharelink icon-share" data-id="@subPass.passNumber">@Translate.Text("Epass.Share") </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.Rejected))
                                                                                    {
                                                                                        <a href="@LinkHelper.GetItemUrl(SitecoreItemIdentifiers.EPASS_PERMANENT_PASS)?passNo=@subPass.passNumber" class="link" data-id="@subPass.passNumber">
                                                                                            @Translate.Text("Epass.Edit")
                                                                                        </a>
                                                                                    }
                                                                                    else if (subPass.status.Equals(SecurityPassStatus.PendingApprovalwithCoordinator) || subPass.status.Equals(SecurityPassStatus.PendingApprovalwithSecurity))
                                                                                    {
                                                                                        <a href="#" class="link j113-epass--records_remove icon-cancel" data-id="@subPass.passNumber">@Translate.Text("Epass.Cancel") </a>
                                                                                    }
                                                                                </dd>
                                                                            </dl>
                                                                        }
                                                                    </div>

                                                                </div>
                                                            }
                                                            else
                                                            {
                                                                <div class="mt56 centered">@Translate.Text("Epass.No record")</div>
                                                            }
                                                        </div>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript" language="javascript">
            $(".attachment").click(function () {
                var passno = $(this).data('passnumber');
                var category = $(this).data('cat')
                //var win = window.open("/api/sitecore/ePass/DownloadAttachment?objectid=" + dms_objectId, '_blank');
                window.open("/api/sitecore/ePass/DownloadAttachmentKofax?passnumber=" + passno + "&cat=" + category, '_blank');
                //win.focus();
            });
            $(".wpattachment").click(function () {
                var dms_objectId = $(this).data('id');
                var passno = $(this).data('passnumber');
                window.open("/api/sitecore/WorkPermit/WPAttachment?passnumber=" + passno + "&objectid=" + dms_objectId, '_blank');
                //win.focus();
            });
        </script>
        <style type="text/css">
            .tblspass {
                width: 100%;
            }

                .tblspass thead tr th {
                    padding: 2px 0 2px 2px;
                    font-weight: bold;
                    border: 2px solid #818080;
                }

                .tblspass tbody tr td {
                    padding: 2px;
                    border: 1px solid #cac9c9;
                }
        </style>
    }
}
