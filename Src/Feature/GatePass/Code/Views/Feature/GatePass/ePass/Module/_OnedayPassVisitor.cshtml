@using DEWAXP.Foundation.Helpers
@using Glass.Mapper.Sc.Fields
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using Sitecore.Globalization
@using DEWAXP.Feature.GatePass.Models.ePass
@using DEWAXP.Foundation.Content
@model DEWAXP.Feature.GatePass.Models.ePass.PermanentPass
@{
    /**/

    var Nationalities = DEWAXP.Foundation.Helpers.Extensions.FormExtensions.GetSAPCountryList(Sitecore.Context.Language.CultureInfo.TextInfo.IsRightToLeft ? "ar" : "en", HttpContext.Current.Request.Headers["User-Agent"]);
    var GccCountries = EpassHelper.GetGccCountries().ToArray();
    var nowmax = DateHelper.DubaiNow().AddMonths(-1).AddDays(2);
    var FromToTime = EpassHelper.GetFromToTime();
    var CurrentFromToTime = EpassHelper.GetCurrentFromToTime();
    DateTime nowoneyear;
    var _visaExpiry = "";

    if (!string.IsNullOrWhiteSpace(Model.VisaExpiry))
    {
        //_visaExpiry = Model.VisaExpiry.Replace("January", "يناير").Replace("February", "فبراير").Replace("March", "مارس").Replace("April", "أبريل").Replace("May", "مايو").Replace("June", "يونيو").Replace("July", "يوليو").Replace("August", "أغسطس").Replace("September", "سبتمبر").Replace("October", "أكتوبر").Replace("November", "نوفمبر").Replace("December", "ديسمبر");
        _visaExpiry = Model.VisaExpiry.Replace("يناير", "January").Replace("فبراير", "February").Replace("مارس", "March").Replace("أبريل", "April").Replace("مايو", "May").Replace("يونيو", "June").Replace("يوليو", "July").Replace("أغسطس", "August").Replace("سبتمبر", "September").Replace("أكتوبر", "October").Replace("نوفمبر", "November").Replace("ديسمبر", "December");
    }
    if (!string.IsNullOrWhiteSpace(_visaExpiry) && Convert.ToDateTime(_visaExpiry).Ticks < DateHelper.DubaiNow().AddDays(30).Ticks)
    {
        nowoneyear = Convert.ToDateTime(_visaExpiry).AddMonths(-1);
    }
    else
    {
        nowoneyear = DateHelper.DubaiNow().AddMonths(-1).AddDays(30);
    }
}
<div>
    <div class="j113-epass" data-journey="j113-epass">
        <div class="grid">
            @Html.Sitecore().Placeholder("pagetitle")
            <div class="grid__row">
                <div class="grid__column grid__column--12 grid__column--form">
                    @if ((bool)ViewBag.success)
                    {
                        using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @class = "ePassForm", @data_form = "true", @enctype = "multipart/form-data", @data_submit_validate = "enabled" }))
                        {
                            @Html.AntiForgeryToken()
                            @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
                            <div class="j113-epass--permPass__form-page">
                                @Html.HiddenFor(m => m.op_code)
                                @Html.HiddenFor(m => m.op_dewaemployee)
                                <div class="form-field form-field--text  ">
                                    <label for="form-field-passnumber" class="form-field__label form-field__label--readonly">
                                        @Translate.Text("Epass.Passnumber")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                        <input maxlength="100"
                                               data-parsley-maxlength="100"
                                               value="@Model.PassNumber"
                                               class="form-field__input  form-field__input--readonly"
                                               id="form-field-passnumber"
                                               name="PassNumber"
                                               type="text"
                                               readonly=""
                                               placeholder="@Translate.Text("Epass.enterpassnumber")"
                                               aria-describedby="description-for-passnumber"
                                               data-parsley-errors-container="#description-for-passnumber"
                                               data-parsley-trigger="focusout"
                                               data-parsley-id="30">
                                    </span>
                                    <div id="description-for-passnumber" class="form-field__messages">
                                    </div>
                                </div>

                                <div class="form-field form-field--text ">
                                    <label for="form-field-visitoremailid" class="form-field__label  form-field__input--readonly">
                                        @Translate.Text("Epass.op_visitorEmailid")
                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--readonly">
                                        @Html.TextBoxFor(x => x.op_visitorEmailid,
        new
        {
            @class = "form-field-EmailAddress form-field__input  form-field__input--readonly",
            @id = "form-field-visitoremailid",
            @placeholder = Translate.Text("Epass.Enterop_visitorEmailid"),
            @data_parsley_errors_container = "#description-for-visitoremailid",
            @aria_describedby = "description-for-visitoremailid",
            @data_parsley_id = "14",
            @step = "any",
            @type = "email",
            @readonly = "",
            @maxlength = "50",
            @data_parsley_trigger = "focusout",
            @data_parsley_maxlength = "50"
        })
                                    </span>
                                    <div id="description-for-visitoremailid" class="form-field__messages">
                                        @Html.ValidationMessageFor(x => x.op_visitorEmailid, "", new { @class = "parsley-errors-list" })
                                    </div>
                                </div>

                                <div class="form-field form-field--text  ">
                                    <label for="form-field-fullname" class="form-field__label">
                                        @Translate.Text("Epass.Fullnameasonedaypass")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper">
                                        <input maxlength="50"
                                               data-parsley-maxlength="50"
                                               value="@Model.FullName"
                                               @*data-parsley-pattern="/^[a-zA-Z ]*$/"*@
                                               class="form-field__input form-field__input--text"
                                               id="form-field-fullname"
                                               name="FullName"
                                               type="text"
                                               placeholder="@Translate.Text("Epass.Fullname")"
                                               aria-describedby="description-for-fullname"
                                               data-parsley-errors-container="#description-for-fullname"
                                               required=""
                                               data-parsley-required-message="@Translate.Text("Epass.Fullname")"
                                               data-parsley-trigger="focusout"
                                               data-parsley-id="30">
                                    </span>
                                    <div id="description-for-fullname" class="form-field__messages">
                                    </div>
                                </div>

                                <div class="form-field form-field--text form-field--textarea">
                                    <label for="form-field-projectname" class="form-field__label">
                                        @Translate.Text("Epass.projectname")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper">
                                        <textarea maxlength="500"
                                                  data-parsley-maxlength="500"
                                                  class="form-field__input form-field__input--text form-field__input--textarea"
                                                  id="form-field-projectname"
                                                  name="op_projectName"
                                                  type="textarea" multiple=""
                                                  placeholder="@Translate.Text("Epass.enterprojectname")"
                                                  aria-describedby="description-for-projectname"
                                                  data-parsley-errors-container="#description-for-projectname"
                                                  required="" data-textarea="projectname"
                                                  data-parsley-required-message="@Translate.Text("Epass.projectnameerrormessage")"
                                                  data-parsley-trigger="focusout"
                                                  data-parsley-id="30">@Model.op_projectName</textarea>
                                    </span>
                                    <div id="description-for-projectname" class="form-field__messages">
                                    </div>
                                </div>

                                <div class="form-field form-field--text  ">
                                    <label for="form-field-projectid" class="form-field__label">
                                        @Translate.Text("Epass.projectid")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper">
                                        <input maxlength="100"
                                               data-parsley-maxlength="100"
                                               value="@Model.op_projectID"
                                               class="form-field__input form-field__input--text"
                                               id="form-field-projectid"
                                               name="op_projectID"
                                               type="text"
                                               placeholder="@Translate.Text("Epass.enterprojectid")"
                                               aria-describedby="description-for-projectid"
                                               data-parsley-errors-container="#description-for-projectid"
                                               required=""
                                               data-parsley-required-message="@Translate.Text("Epass.projectiderrormessage")"
                                               data-parsley-trigger="focusout"
                                               data-parsley-id="30">
                                    </span>
                                    <div id="description-for-projectid" class="form-field__messages">
                                    </div>
                                </div>

                                @if (Model.op_dewaemployee)
                                {
                                    <div class="form-field form-field--text  ">
                                        <label for="form-field-dewantid" class="form-field__label">
                                            @Translate.Text("Epass.dewantid")
                                            <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                        </label>
                                        <span class="form-field__input-wrapper">
                                            <input value="@Model.op_dewantid"
                                                   class="form-field__input"
                                                   id="form-field-dewantid"
                                                   name="op_dewantid"
                                                   type="number"
                                                   maxlength="10"
                                                   required=""
                                                   data-parsley-maxlength="10"
                                                   placeholder="@Translate.Text("Epass.enterdewantid")"
                                                   aria-describedby="description-for-dewantid"
                                                   data-parsley-errors-container="#description-for-dewantid"
                                                   data-parsley-required-message="@Translate.Text("Epass.EnterDewaPayrollnumber")"
                                                   data-parsley-trigger="focusout"
                                                   oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                                   data-parsley-id="30">
                                        </span>
                                        <div id="description-for-dewantid" class="form-field__messages">
                                        </div>
                                    </div>
                                }
                                <div class="form-field form-field--text  ">
                                    <label for="form-field-profession" class="form-field__label">
                                        @Translate.Text("Epass.designation")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper">
                                        <input maxlength="100"
                                               data-parsley-maxlength="100"
                                               value="@Model.ProfessionLevel"
                                               class="form-field__input form-field__input--text"
                                               id="form-field-profession"
                                               name="ProfessionLevel"
                                               type="text"
                                               placeholder="@Translate.Text("Epass.enterdesignation")"
                                               aria-describedby="description-for-profession"
                                               data-parsley-errors-container="#description-for-profession"
                                               required=""
                                               data-parsley-required-message="@Translate.Text("Epass.designationvalid")"
                                               data-parsley-trigger="focusout"
                                               data-parsley-id="34">
                                    </span>
                                    <div id="description-for-profession" class="form-field__messages">
                                    </div>
                                </div>
                                <div class="form-field form-field--text ">
                                    <label for="form-field-MobilePhone" class="form-field__label">
                                        @Translate.Text("movein.mobilenumber")
                                        <span class="form-field__label-required" id="spnVisanumber">(@Translate.Text("Epass.Optional"))</span>
                                    </label>

                                    <label class="form-field__input-wrapper form-field__input-wrapper--prefixed form-field__input-wrapper--mobile-number">
                                        @Html.TextBoxFor(x => x.Mobilenumber,
        new
        {
            @type = "tel",
            @class = "form-field__input form-field__input--text form-field__input--prefixed",
            @name = "MobilePhone",
            @id = "form-field-MobilePhone",
            @placeholder = Translate.Text("Enter UAE mobile number"),
            @data_parsley_error_message = Translate.Text("Please enter a valid UAE mobile number"),
            @data_parsley_errors_container = "#description-for-MobilePhone",
            @aria_describedby = "description-for-MobilePhone",
            @data_parsley_id = "14",
            @data_parsley_type = "digits",
            @data_parsley_mobilenumber = "",
            @step = "any"
        })
                                    </label>
                                    <div id="description-for-MobilePhone" class="form-field__messages">
                                        @Html.ValidationMessageFor(x => x.Mobilenumber, "", new { @class = "parsley-errors-list" })
                                    </div>
                                </div>

                                <div class="form-field form-field--select form-field--select-single">
                                    <label for="form-field-nationality" class="form-field__label">
                                        @Translate.Text("Epass.Nationality")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                        <select class="form-field__input form-field__input--select2 form-field__input--select form-field__input--select-full"
                                                id="form-field-nationality"
                                                name="Nationality"
                                                aria-describedby="description-for-nationality"
                                                data-parsley-errors-container="#description-for-nationality"
                                                required=""
                                                data-parsley-required-message="@Translate.Text("Epass.Selectnationality")"
                                                data-parsley-trigger="change"
                                                data-parsley-id="32">
                                            <option value="" selected="">@Translate.Text("Epass.Selectnationality")</option>

                                            @{
                                                foreach (var item in Nationalities)
                                                {

                                                    if (!string.IsNullOrWhiteSpace(Model.Nationality) && item.Value == Model.Nationality)
                                                    {
                                                        <option value="@item.Value" selected="selected">@item.Text</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@item.Value">@item.Text</option>
                                                    }
                                                }
                                            }
                                        </select>
                                    </span>
                                    <div id="description-for-nationality" class="form-field__messages">
                                    </div>
                                </div>
                                @if (Model.OfficeLocations != null)
                                {
                                    <div class="form-field form-field--select form-field--select-single">
                                        <label for="form-field-locations" class="form-field__label">
                                            @Translate.Text("Epass.Location")
                                        </label>
                                        <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                            <select class="form-field__input form-field__input--select form-field__input--select-full form-field__input--select2" id="form-field-locations" name="SelectedLocation" multiple="multiple" aria-describedby="description-for-ma7826si2" data-parsley-errors-container="#description-for-ma7826si2" data-placeholder="@Translate.Text("Epass.SelectLocation")" required data-parsley-required-message="@Translate.Text("Epass.SelectLocation")">
                                                @{
                                                    foreach (var item in Model.OfficeLocations)
                                                    {
                                                        <option value="@item.Value" @(Model.SelectedLocation != null && Model.SelectedLocation.Contains(item.Value) ? "selected" : string.Empty)>@Translate.Text(item.Text)</option>
                                                    }
                                                }
                                            </select>
                                        </span>
                                        <div id="description-for-ma7826si2" class="form-field__messages">
                                        </div>
                                    </div>
                                }

                                <div id="datepicker-container-DateOfVisit" class="form-field form-field--text  ">
                                    <label for="form-field-DateOfVisit" class="form-field__label">
                                        @Translate.Text("Epass.DateOfVisit")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                        <input value="@Model.DateOfVisit"
                                               class="form-field__input form-field__input--text   form-field__input--datepicker     picker__input form-field__binding"
                                               id="form-field-DateOfVisit"
                                               name="DateOfVisit"
                                               type="text"
                                               placeholder="@Translate.Text("Epass.SelectDateOfVisit")"
                                               aria-describedby="description-for-DateOfVisit"
                                               data-parsley-errors-container="#description-for-DateOfVisit"
                                               required=""
                                               data-parsley-required-message="@Translate.Text("Epass.SelectDateOfVisit")"
                                               data-el="datepicker-future"
                                               data-parsley-trigger="focusout"
                                               data-parsley-id="46"
                                               readonly=""
                                               data-bindingID="passbinding"
                                               aria-haspopup="true"
                                               aria-expanded="false"
                                               aria-readonly="false"
                                               data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 36 , &quot;format&quot;: &quot;yyyy/mm/dd&quot; , &quot;max&quot;: [@nowoneyear.Year,@nowoneyear.Month,@nowoneyear.Day] }' />
                                    </span>
                                    <div id="description-for-DateOfVisit" class="form-field__messages">
                                    </div>
                                </div>

                                <div class="form-field form-field--select form-field--select-single">
                                    <label for="form-field-FromTime" class="form-field__label">
                                        @Translate.Text("Epass.Fromtime")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                        <select class="form-field__input form-field__input--select form-field__input--select-full" id="form-field-FromTime" name="FromTime" aria-describedby="description-for-FromTime" data-parsley-errors-container="#description-for-FromTime" required data-parsley-required-message="@Translate.Text("Epass.Chooseanoption")">
                                            <option value="" selected="">@Translate.Text("Epass.Chooseanoption")</option>
                                            @{
                                                foreach (var item in FromToTime)
                                                {
                                                    if (!string.IsNullOrWhiteSpace(Model.FromTime) && item.Value == Model.FromTime)
                                                    {
                                                        <option value="@item.Value" selected>@item.Text</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@item.Value">@item.Text</option>
                                                    }
                                                }
                                            }
                                        </select>
                                    </span>
                                </div>

                                <div class="form-field form-field--select form-field--select-single">
                                    <label for="form-field-ToTime" class="form-field__label">
                                        @Translate.Text("Epass.Totime")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                        <select class="form-field__input form-field__input--select form-field__input--select-full" id="form-field-ToTime" name="ToTime" aria-describedby="description-for-ToTime" data-parsley-errors-container="#description-for-ToTime" required data-parsley-required-message="@Translate.Text("Epass.Chooseanoption")">
                                            <option value="" selected="">@Translate.Text("Epass.Chooseanoption")</option>
                                            @{
                                                foreach (var item in FromToTime)
                                                {
                                                    if (!string.IsNullOrWhiteSpace(Model.ToTime) && item.Value == Model.ToTime)
                                                    {
                                                        <option value="@item.Value" selected>@item.Text</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="@item.Value">@item.Text</option>
                                                    }
                                                }
                                            }
                                        </select>
                                    </span>
                                </div>


                                <!-- choose either Emirates ID or Passport, one is optional -->

                                <div class="form-field form-field--text  ">
                                    <label for="form-field-EmiratesID" class="form-field__label">
                                        @Translate.Text("Epass.EIDorPassportNo")
                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                    </label>
                                    <span class="form-field__input-wrapper">
                                        <input value="@Model.EmiratesID"
                                               class="form-field__input form-field__input--text form-field__binding"
                                               id="form-field-EmiratesID"
                                               name="EmiratesID"
                                               type="text"
                                               required=""
                                               data-parsley-required-message="@Translate.Text("Epass.EIDorPassportNumber")"
                                               placeholder="@Translate.Text("Epass.EIDorPassportNumber")"
                                               aria-describedby="description-for-EmiratesID"
                                               data-parsley-errors-container="#description-for-EmiratesID"
                                               maxlength="15" data-parsley-maxlength="15">
                                    </span>
                                    <div id="description-for-EmiratesID" class="form-field__messages">
                                        @Html.ValidationMessageFor(x => x.EmiratesID, "", new { @class = "parsley-errors-list" })
                                    </div>
                                </div>

                                <div id="datepicker-container-EmiratesIDExpiry" class="form-field form-field--text  ">
                                    <label for="form-field-EmiratesIDExpiry" class="form-field__label">
                                        @Translate.Text("Epass.EIDorPassportExpiry")

                                    </label>
                                    <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                        <input value="@Model.EmiratesIDExpiry"
                                               class="form-field__input form-field__input--text   form-field__input--datepicker     picker__input form-field__binding"
                                               id="form-field-EmiratesIDExpiry"
                                               name="EmiratesIDExpiry"
                                               type="text"
                                               required=""
                                               placeholder="@Translate.Text("Epass.EIDorPassportExpiry")"
                                               aria-describedby="description-for-EmiratesIDExpiry"
                                               data-parsley-errors-container="#description-for-EmiratesIDExpiry"
                                               data-parsley-error-message="@Translate.Text("Epass.EIDorPassportExpiry")"
                                               data-el="datepicker-future"
                                               data-parsley-trigger="focusout"
                                               data-parsley-id="38"
                                               data-parsley-required-message="@Translate.Text("Epass.EIDorPassportExpiry")"
                                               aria-haspopup="true"
                                               aria-expanded="false"
                                               aria-readonly="false"
                                               data-bindingID="emiratesidbinding"
                                               data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 36 , &quot;format&quot;: &quot;yyyy/mm/dd&quot; , &quot;min&quot;: [@nowmax.Year,@nowmax.Month,@(nowmax.Day)]}'>
                                    </span>
                                    <div id="description-for-EmiratesIDExpiry" class="form-field__messages">
                                        @Html.ValidationMessageFor(x => x.EmiratesID, "", new { @class = "parsley-errors-list" })
                                    </div>
                                </div>

                                <div class="form-field form-field--upload">
                                    <div class="form-field__input-wrapper">
                                        <div class="form-field__preview-wrapper">
                                            <img src="/images/preview_pdf@2x.png" data-src="/images/preview_pdf@2x.png" data-success="/images/upload_success@2x.png" class="form-field__preview" aria-hidden="true" role="presentation" alt="" data-uploader-image="emiratesIdfile">
                                        </div>
                                        <div class="form-field__uploader-details">
                                            <label for="form-field-emiratesIdfile" class="form-field__label">
                                                @Translate.Text("Epass.EIDorPassport")
                                                <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                            </label>
                                            <div>
                                                <label>
                                                    <input class="form-field__input form-field__input--upload"
                                                           id="form-field-emiratesIdfile"
                                                           name="SinglePass_EmiratesID"
                                                           type="file"
                                                           required=""
                                                           data-parsley-required-message="@Translate.Text("Epass.UploadEIDorPassport")"
                                                           aria-describedby="description-for-emiratesIdfile"
                                                           data-parsley-errors-container="#description-for-emiratesIdfile"
                                                           data-uploader-field="emiratesIdfile"
                                                           accept="image/*"
                                                           data-accepts='"jpg", ".bmp","png","jpeg"'
                                                           data-size="2048000"
                                                           data-parsley-trigger="focusout"
                                                           data-parsley-id="50">
                                                    <span class="button button--primary  button--small focus-enabled"
                                                          data-uploader-button="upload-choose">@Translate.Text("Epass.Choose")</span>
                                                    </label>
                                                </div>
                                                <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">@Translate.Text("Epass.Uploadformat")</p>
                                                <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">@Translate.Text("Epass.Uploadfilesize")</p>
                                                <p class="form-field__input--upload-filename" data-uploader-filename="emiratesIdfile"></p>
                                                <p>
                                                    <button class="button button--text button--remove hidden" data-uploader-remove="emiratesIdfile">@Translate.Text("Epass.Remove")</button>
                                                </p>
                                            </div>
                                        </div>
                                        <div id="description-for-emiratesIdfile" class="form-field__messages">
                                            <p class="form-field__description">@Translate.Text("Epass.Indoc")</p>
                                            <p class="form-field__error red">
                                                @Html.ValidationMessageFor(x => x.SinglePass_EmiratesID)
                                            </p>
                                        </div>
                                    </div>

                                    @if (!Model.op_dewaemployee)
                                    {

                                        <div class="form-field form-field--text  ">
                                            <label for="form-field-visa" class="form-field__label">
                                                @Translate.Text("Epass.Visanumber")
                                                <span class="form-field__label-required" id="spnVisanumber">(@Translate.Text("Epass.Optional"))</span>
                                            </label>
                                            <span class="form-field__input-wrapper">
                                                <input maxlength="15" data-parsley-maxlength="15" value="@Model.VisaNumber"
                                                       class="form-field__input form-field__input--text form-field__binding"
                                                       id="form-field-visa" name="VisaNumber"
                                                       type="number"
                                                       placeholder=" @Translate.Text("Epass.EnterVisanumber")"
                                                       aria-describedby="description-for-visa"
                                                       data-parsley-errors-container="#description-for-visa"
                                                       data-parsley-trigger="focusout"
                                                       data-parsley-id="40"
                                                       data-parsley-required-message="@Translate.Text("Epass.EnterVisanumber")"
                                                       data-bindingID="visabinding"
                                                       oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);">
                                            </span>
                                            <div id="description-for-visa" class="form-field__messages">
                                                <p class="form-field__description">@Translate.Text("Epass.Slash")</p>
                                            </div>
                                        </div>

                                        <div id="datepicker-container-visaexpiry" class="form-field form-field--text  ">
                                            <label for="form-field-visaexpiry" class="form-field__label">
                                                @Translate.Text("Epass.Visaexpirydate")
                                                <span class="form-field__label-required" id="spnVisaexpirydate">(@Translate.Text("Epass.Optional"))</span>
                                            </label>
                                            <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                                <input value="@Model.VisaExpiry"
                                                       class="form-field__input form-field__input--text  form-field__input--datepicker picker__input form-field__binding"
                                                       id="form-field-visaexpiry"
                                                       name="VisaExpiry"
                                                       type="text"
                                                       placeholder="@Translate.Text("Epass.Visaexpirydate")"
                                                       aria-describedby="description-for-visaexpiry"
                                                       data-parsley-errors-container="#description-for-visaexpiry"
                                                       data-el="datepicker-future"
                                                       data-parsley-trigger="focusout"
                                                       data-parsley-id="42"
                                                       readonly=""
                                                       data-parsley-required-message="@Translate.Text("Epass.Selectvisaexpirydate")"
                                                       aria-haspopup="true"
                                                       aria-expanded="false"
                                                       aria-readonly="false"
                                                       data-bindingID="visabinding"
                                                       data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 36 , &quot;format&quot;: &quot;yyyy/mm/dd&quot; , &quot;min&quot;: [@nowmax.Year,@nowmax.Month,@(nowmax.Day)]}'>
                                            </span>
                                            <div id="description-for-visaexpiry" class="form-field__messages">
                                            </div>
                                        </div>

                                        <div class="form-field form-field--upload">
                                            <div class="form-field__input-wrapper">
                                                <div class="form-field__preview-wrapper">
                                                    <img src="/images/preview_pdf@2x.png" data-src="/images/preview_pdf@2x.png" data-success="/images/upload_success@2x.png" class="form-field__preview" aria-hidden="true" role="presentation" alt="" data-uploader-image="Visafile">
                                                </div>
                                                <div class="form-field__uploader-details">
                                                    <label for="form-field-Visafile" class="form-field__label">
                                                        @Translate.Text("Epass.Visapage")
                                                        <span class="form-field__label-required" id="spnVisaPage">(@Translate.Text("Epass.Optional"))</span>
                                                    </label>
                                                    <div>
                                                        <label>
                                                            <input class="form-field__input form-field__input--upload"
                                                                   id="form-field-Visafile"
                                                                   name="SinglePass_Visa"
                                                                   type="file"
                                                                   data-parsley-required-message="@Translate.Text("Epass.UploadVisapage")"
                                                                   aria-describedby="description-for-Visafile"
                                                                   data-parsley-errors-container="#description-for-Visafile"
                                                                   data-uploader-field="Visafile"
                                                                   accept="image/*"
                                                                   data-accepts='"jpg", ".bmp","png","jpeg"'
                                                                   data-size="2048000"
                                                                   data-parsley-trigger="focusout"
                                                                   data-parsley-id="52">
                                                            <span class="button button--primary  button--small focus-enabled"
                                                                  data-uploader-button="upload-choose">@Translate.Text("Epass.Choose")</span>
                                                            </label>
                                                        </div>
                                                        <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">@Translate.Text("Epass.Uploadformat")</p>
                                                        <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">@Translate.Text("Epass.Uploadfilesize")</p>
                                                        <p class="form-field__input--upload-filename" data-uploader-filename="Visafile"></p>
                                                        <p>
                                                            <button class="button button--text button--remove hidden" data-uploader-remove="Visafile">@Translate.Text("Epass.Remove")</button>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div id="description-for-Visafile" class="form-field__messages">
                                                    <p class="form-field__description">@Translate.Text("Epass.Indoc")</p>
                                                    <p class="form-field__error red">
                                                        @Html.ValidationMessageFor(x => x.SinglePass_Visa)
                                                    </p>
                                                </div>
                                            </div>

                                        }
                                    @if (Model.op_dewaemployee)
                                    {
                                        <div class="form-field form-field--upload">
                                            <div class="form-field__input-wrapper">
                                                <div class="form-field__preview-wrapper">
                                                    <img src="/images/preview_pdf@2x.png" data-src="/images/preview_pdf@2x.png" data-success="/images/upload_success@2x.png" class="form-field__preview" aria-hidden="true" role="presentation" alt="" data-uploader-image="op_DEWAId">
                                                </div>
                                                <div class="form-field__uploader-details">
                                                    <label for="form-field-op_DEWAId" class="form-field__label">
                                                        @Translate.Text("Epass.DewaIdBoth")
                                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                                    </label>
                                                    <div>
                                                        <label>
                                                            <input class="form-field__input form-field__input--upload"
                                                                   id="form-field-op_DEWAId"
                                                                   name="op_DEWAId"
                                                                   type="file"
                                                                   required=""
                                                                   data-parsley-required-message="@Translate.Text("Epass.UploadDewaIDBoth")"
                                                                   aria-describedby="description-for-op_DEWAId"
                                                                   data-parsley-errors-container="#description-for-op_DEWAId"
                                                                   data-uploader-field="op_DEWAId"
                                                                   accept="image/*"
                                                                   data-accepts='"jpg", ".bmp","png","jpeg"'
                                                                   data-size="2048000"
                                                                   data-parsley-trigger="focusout"
                                                                   data-parsley-id="50">
                                                            <span class="button button--primary  button--small focus-enabled"
                                                                  data-uploader-button="upload-choose">@Translate.Text("Epass.Choose")</span>
                                                            </label>
                                                        </div>
                                                        <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">@Translate.Text("Epass.Uploadformat")</p>
                                                        <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">@Translate.Text("Epass.Uploadfilesize")</p>
                                                        <p class="form-field__input--upload-filename" data-uploader-filename="op_DEWAId"></p>
                                                        <p>
                                                            <button class="button button--text button--remove hidden" data-uploader-remove="op_DEWAId">@Translate.Text("Epass.Remove")</button>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div id="description-for-op_DEWAId" class="form-field__messages">
                                                    <p class="form-field__description">@Translate.Text("Epass.Indoc")</p>
                                                    <p class="form-field__error red">
                                                        @Html.ValidationMessageFor(x => x.op_DEWAId)
                                                    </p>
                                                </div>
                                            </div>
                                        }

                                    <div class="form-field form-field--upload">
                                        <div class="form-field__input-wrapper">
                                            <div class="form-field__preview-wrapper">
                                                <img src="/images/preview_pdf@2x.png" data-src="/images/preview_pdf@2x.png" data-success="/images/upload_success@2x.png" class="form-field__preview" aria-hidden="true" role="presentation" alt="" data-uploader-image="applicantphoto">
                                            </div>
                                            <div class="form-field__uploader-details">
                                                <label for="form-field-applicantphoto" class="form-field__label">
                                                    @Translate.Text("Epass.EIDpassport")
                                                    <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                                </label>
                                                <div>
                                                    <label>
                                                        <input class="form-field__input form-field__input--upload"
                                                               id="form-field-applicantphoto"
                                                               name="SinglePass_Photo"
                                                               type="file"
                                                               aria-describedby="description-for-applicantphoto"
                                                               data-parsley-errors-container="#description-for-applicantphoto"
                                                               required=""
                                                               data-parsley-required-message="@Translate.Text("Epass.UploadApplicantPhoto")"
                                                               data-uploader-field="applicantphoto"
                                                               accept="image/*"
                                                               data-accepts='"jpg", ".bmp","png","jpeg"'
                                                               data-size="2048000"
                                                               data-parsley-trigger="focusout"
                                                               data-parsley-id="48">
                                                        <span class="button button--primary  button--small focus-enabled"
                                                              data-uploader-button="upload-choose">@Translate.Text("Epass.Choose")</span>

                                                        </label>
                                                    </div>
                                                    <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">@Translate.Text("Epass.Uploadformat")</p>
                                                    <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">@Translate.Text("Epass.Uploadfilesize")</p>
                                                    <p class="form-field__input--upload-filename" data-uploader-filename="applicantphoto"></p>

                                                    <p>
                                                        <button class="button button--text button--remove hidden" data-uploader-remove="applicantphoto">@Translate.Text("Epass.Remove")</button>
                                                    </p>
                                                </div>
                                            </div>
                                            <div id="description-for-applicantphoto" class="form-field__messages">
                                                <p class="form-field__description">@Translate.Text("Epass.Indoc")</p>
                                                <p class="form-field__error red">
                                                    @Html.ValidationMessageFor(x => x.SinglePass_Photo)
                                                </p>
                                            </div>
                                        </div>

                                        <div class="form-field form-field--toggles mb24">
                                            <fieldset class="fieldset">
                                                <legend class="legend-color">.</legend>
                                                <div class="form-field__checkbox   first">
                                                    <label>
                                                        <input class="form-field__input form-field__input--checkbox"
                                                               id="form-field-checkbox_iswithcar"
                                                               aria-label="form-field-checkbox_iswithcar"
                                                               name="withcar"
                                                               type="checkbox"
                                                               value="False"
                                                               aria-describedby="description-for-issanadsmartcard"
                                                               data-parsley-errors-container="#description-for-issanadsmartcard">

                                                        <span class="form-field__fakecheckbox focus-enabled">
                                                            @Translate.Text("wp.do you want to accompany with Car")
                                                        </span>
                                                    </label>
                                                </div>
                                                <div id="description-for-withcar" class="form-field__messages">
                                                </div>
                                            </fieldset>
                                        </div>

                                        <div class="form-field form-field--select form-field--select-single withcar hidden mt12">
                                            <label for="form-field-emirates" class="form-field__label">
                                                <span id="spEmirate"> @Translate.Text("EV Choose Emirate")</span>
                                                <span class="form-field__label-required aria-only">@Translate.Text("required")</span>
                                            </label>
                                            <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                                @Html.DropDownListFor(model => model.EmirateOrCountry, Model.Emirates, Translate.Text("EV Select Emirate"), new
                                           {
                                               @class = "form-field__input form-field__input--select form-field__input--select-full",
                                               @id = "form-field-emirates",
                                               @required = "required",
                                               @data_parsley_required_message = Translate.Text("EV Select Emirate"),
                                               @data_parsley_errors_container = "#description-for-w1mfbetd3",
                                               @aria_describedby = "description-for-w1mfbetd3",
                                               @data_postedvalue = Model.EmirateOrCountry
                                           })

                                            </span>
                                            <div id="description-for-w1mfbetd3" class="form-field__messages">
                                                @Html.ValidationMessageFor(x => x.EmirateOrCountry, "", new { @class = "parsley-errors-list" })
                                            </div>
                                        </div>

                                        <div class="form-field form-field--select form-field--select-single  withcar hidden mt12 onlydxb">
                                            <label for="form-field-categorycode" class="form-field__label">
                                                <span>  @Translate.Text("EV.Category Code")</span>
                                                <span class="form-field__label-required aria-only">@Translate.Text("required")</span>
                                            </label>
                                            <span class="form-field__input-wrapper form-field__input-wrapper--select">
                                                @Html.DropDownListFor(model => model.SelectedPlateCategory, Model.PlateCategory, Translate.Text("EV Select categorycode"), new
                                           {
                                               @class = "form-field__input form-field__input--select form-field__input--select-full",
                                               @id = "form-field-categorycode",
                                               @required = "required",
                                               @data_parsley_required_message = @Translate.Text("EVcategorycodeErrorMessage"),
                                               @data_parsley_errors_container = "#description-for-categorycode",
                                               @aria_describedby = "description-for-categorycode",
                                               @data_postedvalue = Model.SelectedPlateCategory
                                           })

                                            </span>
                                            <div id="description-for-categorycode" class="form-field__messages">
                                                @Html.ValidationMessageFor(x => x.SelectedPlateCategory, "", new { @class = "parsley-errors-list" })
                                            </div>
                                        </div>

                                        <div class="form-field form-field--text  withcar hidden mt12">
                                            <label for="form-field-PlateCode" class="form-field__label">
                                                @Translate.Text("Epass.Car Plate Code")
                                                <span class="form-field__label-required aria-only">(@Translate.Text("Required"))</span>
                                            </label>
                                            <span class="form-field__input-wrapper">
                                                <input class="form-field__input form-field__input--text"
                                                       id="form-field-PlateCode"
                                                       name="PlateCode"
                                                       type="text"
                                                       placeholder="@Translate.Text("Epass.Car Plate Code Placeholder")"
                                                       aria-describedby="description-for-PlateCode"
                                                       maxlength="3"
                                                       data-parsley-maxlength="3"
                                                       value="@Model.PlateCode"
                                                       data-postedvalue="@Model.PlateCode"
                                                       data-parsley-error-message="@Translate.Text("Epass.Car Plate Code Error Message")"
                                                       data-parsley-errors-container="#description-for-PlateCode"
                                                       onkeyup="this.value=removeSpaces(this.value);" />
                                            </span>
                                            <div id="description-for-PlateCode" class="form-field__messages">
                                                @Html.ValidationMessageFor(x => x.PlateCode)
                                            </div>
                                        </div>
                                        <div class="form-field form-field--text  withcar hidden mt12" id="divPlateNumber">
                                            <label for="form-field-PlateNumber" class="form-field__label">
                                                @Translate.Text("EV.Car Plate Number")
                                                <span class="form-field__label-required aria-only">(@Translate.Text("Required"))</span>
                                            </label>
                                            <span class="form-field__input-wrapper form-field__input-wrapper--plate-number">
                                                <input class="form-field__input form-field__input--text ct_platenumber"
                                                       id="form-field-PlateNumber"
                                                       name="PlateNumber"
                                                       type="text"
                                                       data-parsley-type="number"
                                                       placeholder="@Translate.Text("EV.Car Plate Number")"
                                                       aria-describedby="description-for-PlateNumber"
                                                       required=""
                                                       value="@Model.PlateNumber"
                                                       maxlength="20"
                                                       data-parsley-maxlength="20"
                                                       data-postedvalue="@Model.PlateNumber"
                                                       data-parsley-error-message="@Translate.Text("EV.errorMessage_PlateNumber")"
                                                       data-parsley-errors-container="#description-for-PlateNumber"
                                                       onkeyup="this.value=removeSpaces(this.value);" />
                                            </span>
                                            <div id="description-for-PlateNumber" class="form-field__messages">
                                                @Html.ValidationMessageFor(x => x.PlateNumber)
                                            </div>
                                        </div>


                                        <div id="datepicker-container-vehregis" class="form-field form-field--text   withcar hidden mt12">
                                            <label for="form-field-vehregis" class="form-field__label">
                                                @Translate.Text("Epass.VehicleRegistrationDate")
                                                <span class="form-field__label-required hidden" id="spnvehregisdate">(@Translate.Text("Epass.Optional"))</span>
                                            </label>
                                            <span class="form-field__input-wrapper form-field__input-wrapper--datepicker">
                                                <input value="@Model.VehicleRegistrationDate"
                                                       class="form-field__input form-field__input--text  form-field__input--datepicker picker__input form-field__binding"
                                                       id="form-field-vehregis"
                                                       name="VehicleRegistrationDate"
                                                       type="text"
                                                       placeholder="@Translate.Text("Epass.VehicleRegistrationDate")"
                                                       aria-describedby="description-for-vehregis"
                                                       data-parsley-errors-container="#description-for-vehregis"
                                                       data-el="datepicker"
                                                       required=""
                                                       data-parsley-trigger="focusout"
                                                       data-parsley-id="43"
                                                       aria-haspopup="true"
                                                       aria-expanded="false"
                                                       aria-readonly="false"
                                                       data-bindingID="vehiclebinding"
                                                       data-picker-options='{&quot;selectMonths&quot;: true , &quot;selectYears&quot;: 2 , &quot;format&quot;: &quot;yyyy/mm/dd&quot;, &quot;min&quot;: [@DateTime.Now.AddYears(-2).Year.ToString(),@((DateTime.Now.AddYears(-2).Month-1).ToString()),@DateTime.Now.AddYears(-2).Day.ToString()], &quot;max&quot;: [@DateTime.Now.Year.ToString(),@((DateTime.Now.Month-1).ToString()),@DateTime.Now.Day.ToString()]}'>
                                            </span>
                                            <div id="description-for-vehregis" class="form-field__messages">
                                            </div>
                                        </div>

                                        <div class="form-field form-field--upload hidden withcar">
                                            <div class="form-field__input-wrapper">
                                                <div class="form-field__preview-wrapper">
                                                    <img src="/images/preview_pdf@2x.png" data-src="/images/preview_pdf@2x.png" data-success="/images/upload_success@2x.png" class="form-field__preview" aria-hidden="true" role="presentation" alt="" data-uploader-image="drivinglicense">
                                                </div>
                                                <div class="form-field__uploader-details">
                                                    <label for="form-field-drivinglicense" class="form-field__label">
                                                        @Translate.Text("wp.driving license")
                                                        <span class="form-field__label-required aria-only">@Translate.Text("Epass.Required")</span>
                                                    </label>
                                                    <div>
                                                        <label>
                                                            <input class="form-field__input form-field__input--upload"
                                                                   id="form-field-drivinglicense"
                                                                   name="SinglePass_DrivingLicense"
                                                                   type="file"
                                                                   aria-describedby="description-for-drivinglicense"
                                                                   data-parsley-errors-container="#description-for-drivinglicense"
                                                                   required=""
                                                                   data-parsley-required-message="@Translate.Text("Epass.Uploaddrivinglicense")"
                                                                   data-uploader-field="drivinglicense"
                                                                   accept="image/*"
                                                                   data-accepts='"jpg", ".bmp","png","jpeg"'
                                                                   data-size="2048000"
                                                                   data-parsley-trigger="focusout"
                                                                   data-parsley-id="48">
                                                            <span class="button button--primary button--small focus-enabled"
                                                                  data-uploader-button="upload-choose">@Translate.Text("Epass.Choose")</span>

                                                            </label>
                                                        </div>
                                                        <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">@Translate.Text("Epass.Uploadformat")</p>
                                                        <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">@Translate.Text("Epass.Uploadfilesize")</p>
                                                        <p class="form-field__input--upload-filename" data-uploader-filename="drivinglicense"></p>

                                                        <p>
                                                            <button class="button button--text button--remove hidden" data-uploader-remove="drivinglicense">@Translate.Text("Epass.Remove")</button>
                                                        </p>
                                                    </div>
                                                </div>
                                                <div id="description-for-drivinglicense" class="form-field__messages">
                                                    <p class="form-field__description">@Translate.Text("Epass.Indoc")</p>
                                                    <p class="form-field__error red">
                                                        @Html.ValidationMessageFor(x => x.SinglePass_Photo)
                                                    </p>
                                                </div>
                                            </div>

                                            <div class="form-field form-field--upload hidden withcar">
                                                <div class="form-field__input-wrapper">
                                                    <div class="form-field__preview-wrapper">
                                                        <img src="/images/preview_pdf@2x.png" data-src="/images/preview_pdf@2x.png" data-success="/images/upload_success@2x.png" class="form-field__preview" aria-hidden="true" role="presentation" alt="" data-uploader-image="vehicleno">
                                                    </div>
                                                    <div class="form-field__uploader-details">
                                                        <label for="form-field-vehicleno" class="form-field__label">
                                                            @Translate.Text("Epass.VehicleRegistration")
                                                            <span class="form-field__label-required hidden">(@Translate.Text("Epass.Optional"))</span>
                                                        </label>
                                                        <div>
                                                            <label>
                                                                <input class="form-field__input form-field__input--upload"
                                                                       id="form-field-vehicleno"
                                                                       name="SinglePass_VehicleRegistration"
                                                                       type="file"
                                                                       required=""
                                                                       aria-describedby="description-for-vehicleno"
                                                                       data-parsley-errors-container="#description-for-vehicleno"
                                                                       data-parsley-required-message="@Translate.Text("Epass.UploadVehicleRegistration")"
                                                                       data-uploader-field="vehicleno"
                                                                       accept="image/*"
                                                                       data-accepts='"jpg", ".bmp","png","jpeg"'
                                                                       data-size="2048000"
                                                                       data-parsley-trigger="focusout"
                                                                       data-parsley-id="48">
                                                                <span class="button button--primary  button--small focus-enabled"
                                                                      data-uploader-button="upload-choose">@Translate.Text("Epass.Choose")</span>

                                                                </label>
                                                            </div>
                                                            <p class="form-field__input--upload-format-error-message" data-uploader-format-error="error-message">@Translate.Text("Epass.Uploadformat")</p>
                                                            <p class="form-field__input--upload-size-error-message" data-uploader-size-error="error-message">@Translate.Text("Epass.Uploadfilesize")</p>
                                                            <p class="form-field__input--upload-filename" data-uploader-filename="vehicleno"></p>

                                                            <p>
                                                                <button class="button button--text button--remove hidden" data-uploader-remove="vehicleno">@Translate.Text("Epass.Remove")</button>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div id="description-for-vehicleno" class="form-field__messages">
                                                        <p class="form-field__description">@Translate.Text("Epass.Indoc")</p>
                                                        <p class="form-field__error red">
                                                            @Html.ValidationMessageFor(x => x.SinglePass_VehicleRegistration)
                                                        </p>
                                                    </div>
                                                </div>


                                                <div class="form-field__button">
                                                    <button class="button button--primary" id="btsubmit" data-submission-text="@Translate.Text("Submitting")..." type="submit">@Translate.Text("Epass.Submit")</button>
                                                </div>
                                            </div>

                                        }
                                    }
                                    else
                                    {
                                        @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")
                                    }
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    docReady(function () {
        var f_sel = "#form-field-FromTime", t_sel = "select#form-field-ToTime";
        jQuery(f_sel).on("change", function () {
            var vals = $('select' + f_sel + ' > option').map(function () { if (this.value) return this.value; }).get();
            var sval = jQuery(this).children("option:selected").val();
            var idx = vals.findIndex(x => x === sval);
            var newvals = jQuery.grep(vals, function (n, i) { return (i > idx); });
            //console.log(JSON.stringify(newvals));
            $(t_sel + ' > option').each(function () { $(this).attr("disabled", "disabled"); });
            $.each(newvals, function (i, v) { var d = $(t_sel + ' option[value="' + v + '"]'); if (d) { $(d).prop("disabled", false); } });
        });
        var iswithcar = jQuery("#form-field-checkbox_iswithcar");
        var withcar = jQuery(".withcar");
        iswithcar.on('change', function () {
            withcar.hide();
            if ($(this).is(':checked')) {
                withcar.show();
                iswithcar.attr('value', 'True');

            } else { iswithcar.attr('value', 'False'); }
        });
        require(['pickerdate'], function () {
            $('.ePassForm').find('.form-field:not(.form-field--upload)').find('input').each(function () {
                if ($(this).hasClass('form-field__input--datepicker') && ($(this).val().length > 0)) {
                    jQuery(this).pickadate('picker').set('select', new Date($(this).val()));
                }
            });
        });
        jQuery('#form-field-nationality').on('change', function () {
            //alert(this.value);
            var isRequired = true;
            var CountryArray = @Html.Raw(Json.Encode(@GccCountries.ToArray()));
            for (i = 0; i < CountryArray.length; i++) {
                if ($(this).find("option:selected").val() == CountryArray[i].Value) {
                    isRequired = false;
                    break;
                }
            }
            if (isRequired) {
                $("#spnVisanumber").html("");
                $("#spnVisaexpirydate").html("");
                $("#spnVisaPage").html("");
                $("#form-field-visa, #form-field-visaexpiry").prop('required', true);
                $("#form-field-Visafile").prop('required', true);
            }
            else {
                $("#spnVisanumber").html("(@Translate.Text("Epass.Optional"))");
                $("#spnVisaexpirydate").html("(@Translate.Text("Epass.Optional"))");
                $("#spnVisaPage").html("(@Translate.Text("Epass.Optional"))");
                $("#form-field-visa, #form-field-visaexpiry").removeAttr('required');
                $("#form-field-Visafile").removeAttr('required');
            }
        });
        /*jQuery("#form-field-FromTime,#form-field-ToTime").on('change', function () {
            var fromTime = jQuery('#form-field-FromTime').val();
            var toTime = jQuery('#form-field-ToTime').val();
            if (parseFloat(fromTime) >= parseFloat(toTime)) {
                jQuery('#form-field-FromTime').val('');
                jQuery('#form-field-ToTime').val('');
            }
        });*/

        jQuery("#form-field-PassIssueDate").on('change', function () {
            var currentdate = jQuery('#form-field-PassIssueDate').val();
            currentdate = currentdate.replace("يناير", "January").replace("فبراير", "February").replace("مارس", "March").replace("أبريل", "April").replace("مايو", "May").replace("يونيو", "June").replace("يوليو", "July").replace("أغسطس", "August").replace("سبتمبر", "September").replace("أكتوبر", "October").replace("نوفمبر", "November").replace("ديسمبر", "December");
            var today = new Date();
            today.setHours(0, 0, 0, 0);
            var selectedFromTime = '@Model.FromTime';
            var selectedToTime = '@Model.ToTime';

            if (Date.parse(currentdate) == Date.parse(today)) {
                // date is greater than today
                var timeOptions = @Html.Raw(Json.Encode(CurrentFromToTime));

                jQuery("#form-field-FromTime").empty();
                jQuery("#form-field-ToTime").empty();
                jQuery("#form-field-FromTime").append(jQuery("<option></option>").val("").html('@Translate.Text("Epass.Chooseanoption")'));
                jQuery("#form-field-ToTime").append(jQuery("<option></option>").val("").html('@Translate.Text("Epass.Chooseanoption")'));
                for (var i = 0; i < timeOptions.length; i++) {
                    jQuery("#form-field-FromTime").append(jQuery("<option></option>").val(timeOptions[i].Value).html(timeOptions[i].Text));
                    jQuery("#form-field-ToTime").append(jQuery("<option></option>").val(timeOptions[i].Value).html(timeOptions[i].Text));
                    if (selectedToTime == timeOptions[i].Value && selectedToTime != "")
                        jQuery("#form-field-ToTime").val(selectedToTime);

                    if (selectedFromTime == timeOptions[i].Value && selectedFromTime != "")
                        jQuery("#form-field-FromTime").val(selectedFromTime);
                }

            }
            else {
                var timeOptions = @Html.Raw(Json.Encode(FromToTime));
                jQuery("#form-field-FromTime").empty();
                jQuery("#form-field-ToTime").empty();
                jQuery("#form-field-FromTime").append(jQuery("<option></option>").val("").html('@Translate.Text("Epass.Chooseanoption")'));
                jQuery("#form-field-ToTime").append(jQuery("<option></option>").val("").html('@Translate.Text("Epass.Chooseanoption")'));
                for (var i = 0; i < timeOptions.length; i++) {
                    jQuery("#form-field-FromTime").append(jQuery("<option></option>").val(timeOptions[i].Value).html(timeOptions[i].Text));
                    jQuery("#form-field-ToTime").append(jQuery("<option></option>").val(timeOptions[i].Value).html(timeOptions[i].Text));
                    if (selectedToTime == timeOptions[i].Value && selectedToTime != "")
                        jQuery("#form-field-ToTime").val(selectedToTime);

                    if (selectedFromTime == timeOptions[i].Value && selectedFromTime != "")
                        jQuery("#form-field-FromTime").val(selectedFromTime);
                }
            }
        });

    });

</script>
<script src="~/Scripts/External/nml/form-submit-validate.js"></script>
