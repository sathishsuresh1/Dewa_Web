@using DEWAXP.Foundation.Helpers
@using Glass.Mapper.Sc.Fields
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using Sitecore.Globalization
@using DEWAXP.Foundation.Content
@model DEWAXP.Feature.GatePass.Models.ePass.SetNewPassword


<div class="j113-epass">
    <div class="grid">
        <div class="grid__row">
            <div class="grid__column grid__column--12 grid__column--form">
            </div>
            <div class="grid__column grid__column--12 grid__column--form" style="padding-left:16px;">
                @Html.Sitecore().Placeholder("contenttitle")
                @if (ViewBag.success != null && (bool)ViewBag.success)
                {
                    <div class="m40-status-message m40-status-message--success  icon icon-new-success-message" data-component="m40-status-message">
                        <div class="m40-status-message__title  ">
                            @Translate.Text("Epass.Success")
                        </div>
                        <div class="m40-status-message__text ">
                            @Translate.Text("Epass.Passwordchanged")
                        </div>
                    </div>
                }

                @using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, FormMethod.Post, new { @data_parsley_focus = "true", @data_form = "true", @class = "form", @data_submit_validate = "enabled", @novalidate = string.Empty, @autocomplete = "off" }))
                {
                    @Html.Sitecore().FormHandler("ePass", "ChangePassword")
                    @Html.AntiForgeryToken()
                    @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")

                    <fieldset class="fieldset">
                        <legend class="legend-color">.</legend>

                        <div class="form-field form-field--text">
                            <label for="form-field-oldpassword" class="form-field__label">
                                @Translate.Text("Old Password")
                            </label>

                            <span class="form-field__input-wrapper">
                                @Html.PasswordFor(x => x.OldPassword, new
                        {
                            @class = "form-field__input form-field__input--text",
                            @id = "form-field-oldpassword",
                            @placeholder = Translate.Text("Old Password"),
                            @required = "required",
                            @type = "password",
                            @data_parsley_error_message = Translate.Text("login password validation message alphanumeric"),
                            @data_parsley_errors_container = "#description-for-oldpassword",
                            @data_parsley_password = "",
                            @aria_describedby = "description-for-oldpassword",
                            @autocomplete = "off"
                        })
                            </span>

                            <div id="description-for-oldpassword" class="form-field__messages">
                                @Html.ValidationMessageFor(x => x.Password, string.Empty, new { @class = "parsley-errors-list" })
                            </div>
                        </div>

                        <div class="form-field form-field--text">
                            <label for="form-field-newpassword" class="form-field__label">
                                @Translate.Text("New Password")
                            </label>

                            <span class="form-field__input-wrapper">
                                @Html.PasswordFor(x => x.Password, new
                {
                    @class = "form-field__input form-field__input--text",
                    @id = "form-field-newpassword",
                    @placeholder = Translate.Text("New password"),
                    @required = "required",
                    @type = "password",
                    @data_parsley_error_message = Translate.Text("login password validation message alphanumeric"),
                    @data_parsley_errors_container = "#description-for-set-password",
                    @data_parsley_password = "",
                    @aria_describedby = "description-for-set-password",
                    @autocomplete = "off"
                })
                            </span>

                            <div id="description-for-set-password" class="form-field__messages">
                                @Html.ValidationMessageFor(x => x.Password, string.Empty, new { @class = "parsley-errors-list" })
                            </div>
                        </div>

                        <div class="form-field form-field--text">
                            <label for="form-field-confirm_password" class="form-field__label">
                                @Translate.Text("Confirm New password")
                            </label>
                            <span class="form-field__input-wrapper">
                                @Html.PasswordFor(x => x.ConfirmPassword, new
                {
                    @class = "form-field__input form-field__input--text",
                    @id = "form-field-confirm_password",
                    @placeholder = Translate.Text("Confirm New password"),
                    @required = "required",
                    @type = "password",
                    @data_parsley_errors_container = "#description-for-confirm_password",
                    @aria_describedby = "description-for-confirm_password",
                    @data_parsley_error_message = Translate.Text("Password mismatch error"),
                    @data_parsley_equalto = "#form-field-newpassword",
                    @autocomplete = "off"
                })
                            </span>

                            <div id="description-for-confirm_password" class="form-field__messages">
                                @Html.ValidationMessageFor(x => x.ConfirmPassword, string.Empty, new { @class = "parsley-errors-list" })
                            </div>
                        </div>
                    </fieldset>

                    <div class="form-field__button">
                        <button class="button button--primary button--fullwidth" type="submit" data-submission-text="@Translate.Text("Submitting")...">@Translate.Text("Submit")</button>
                    </div>
                }
            </div>
            <div class="grid__column grid__column--12 grid__column--form">
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/External/nml/form-submit-validate.js"></script>
@if (ViewBag.success != null)
{
    <script type="text/javascript">
        document.getElementsByClassName("m25-tabs")[0].setAttribute('data-selected-tab-id', 'm25-tab-1');
    </script>
}