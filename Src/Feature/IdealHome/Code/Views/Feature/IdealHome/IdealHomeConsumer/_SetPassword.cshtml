@model DEWAXP.Feature.IdealHome.Models.IdealHomeConsumer.IdealHomeSetNewPassword
@using DEWAXP.Foundation.Helpers
@using Glass.Mapper.Sc.Fields
@using Sitecore.Mvc
@using Sitecore.Mvc.Configuration
@using Sitecore.Globalization
@using DEWAXP.Foundation.Content


<div class="grid">


    <div class="grid__row">
        <div class="grid__column grid__column--12 grid__column--form">
            @if (ViewBag.success != null && (bool)ViewBag.success)
            {
                <div class="m40-status-message m40-status-message--success  icon icon-new-success-message" data-component="m40-status-message">
                    <div class="m40-status-message__title"> @Translate.Text("submission successful text")</div>
                    <div class="m40-status-message__text">
                        @Translate.Text("password changed text")
                    </div>
                </div>
            }
            else
            {
                using (Html.BeginRouteForm(MvcSettings.SitecoreRouteName, new { returnUrl = "" }, FormMethod.Post, new { @data_parsley_focus = "true", @data_form = "true", @class = "form", @data_submit_validate = "enabled", @novalidate = true, @autocomplete = "off" }))
                {
                    @Html.Sitecore().FormHandler()
                    @Html.AntiForgeryToken()

                    @Html.Partial("~/Views/Feature/CommonComponents/Shared/_SubmissionError.cshtml")

                    if (ViewBag.Linkexpired == null)
                    {
                        @Html.HiddenFor(x => x.Id)
                        <div class="form-field form-field--text ">
                            <label for="form-field-password" class="form-field__label">
                                @Translate.Text("J106.PasswordLabel")

                                <span class="form-field__label-required aria-only">(required)</span>
                            </label>
                            <span class="form-field__input-wrapper">
                                <input class="form-field__input form-field__input--text"
                                       maxlength="12"
                                       id="form-field-password"
                                       name="Password"
                                       type="password"
                                       autocomplete="off"
                                       data-parsley-minlength="8"
                                       placeholder="@Translate.Text("J106.PasswordLabel")"
                                       aria-describedby="description-for-password"
                                       data-parsley-errors-container="#description-for-password"
                                       required
                                       data-parsley-equalto-message="@Translate.Text("J106.MatchPassword")"
                                       data-parsley-required-message="@Translate.Text("Please enter") @Translate.Text("J106.PasswordLabel")"
                                       data-parsley-minlength-message="@Translate.Text("J106.MinPassword")" />
                            </span>
                            <div id="description-for-password" class="form-field__messages">
                                @Html.ValidationMessageFor(x => x.Password, string.Empty, new { @class = "parsley-errors-list" })
                            </div>
                        </div>
                        <div class="form-field form-field--text ">
                            <label for="form-field-rfdru9z8c" class="form-field__label">
                                @Translate.Text("J106.ConfirmPasswordLabel")

                                <span class="form-field__label-required aria-only">(required)</span>
                            </label>
                            <span class="form-field__input-wrapper">
                                <input class="form-field__input form-field__input--text"
                                       maxlength="12"
                                       data-parsley-minlength="8"
                                       id="form-field-rfdru9z8c"
                                       name="ConfirmPassword"
                                       type="password"
                                       autocomplete="off"
                                       placeholder="@Translate.Text("J106.ConfirmPasswordLabel")"
                                       aria-describedby="description-for-rfdru9z8c"
                                       data-parsley-errors-container="#description-for-rfdru9z8c"
                                       required
                                       data-parsley-required-message="@Translate.Text("Please enter") @Translate.Text("J106.ConfirmPasswordLabel")"
                                       data-parsley-equalto="#form-field-password"
                                       data-parsley-equalto-message="@Translate.Text("J106.MatchPassword")"
                                       data-parsley-minlength-message="@Translate.Text("J106.MinPassword")" />
                            </span>
                            <div id="description-for-rfdru9z8c" class="form-field__messages">
                                @Html.ValidationMessageFor(x => x.ConfirmPassword, string.Empty, new { @class = "parsley-errors-list" })
                            </div>
                        </div>


                        <div class="form-field__button">
                            <button type="submit" class="button button--primary button--fullwidth-mobile">@Translate.Text("J106.SetNewPassword")</button>
                        </div>
                    }
                }
            }
        </div>
    </div>

</div>

<script src="~/Scripts/External/nml/form-submit-validate.js"></script>